{"version":3,"sources":["classifier.js","geo.js","lang.js","main.js","nav.js","overlay.js","popup.js","scroll-bar.js","util.js"],"names":["$","hideClassifier","removeClass","window","width","on","click","e","preventDefault","cityToFind","this","val","toUpperCase","cityToFindLength","length","find","each","cityWrapper","closest","city","text","substring","hide","show","classifier","addClassifier","map","array","orgs","sortedArray","sort","a","b","name","forEach","elem","splice","indexOf","unshift","halfLength","Math","ceil","half","interimArray","i","undefined","push","sortArray","Array","prototype","call","fragmentMenuItem","document","createDocumentFragment","templateElement","querySelector","content","cloneNode","setAttribute","id","textContent","status","point","appendChild","append","scrollBox","attr","split","util","flyTo","parseFloat","toggleClass","hasClass","addGeo","popup","handleDistrictClick","localStorage","getItem","ajax","method","url","data","request","done","msg","obj","jQuery","parseJSON","setItem","JSON","stringify","addDistricts","parse","handleCityClick","district","citiesArray","objItem","objItem_i","term_city_id","name_city","latitude_city","longitude_city","value","item","item_i","addCities","addOrgs","district_id","html","parent","parent_i","childs","child","child_i","yandexLink","join","phones","phoneArray","phone","phoneLink","getPhonesWithLinks","addClass","lat","lng","address","email","site","addPopup","cities","slice","orgsArray","religOrg","relig","console","log","empty","key","types","type","type_i","id_type","name_type","citiesItem","citiesItem_i","obj_item","obj_i","rabbi","orgsArrayClone","order","coords","zoom","COORDS_CZENTRALNYJ","COORDS_SIBIRSKIJ","COORDS_URALSKIJ","COORDS_SEVERO_ZAPADNYJ","COORDS_PRIVOLZHSKIJ","COORDS_YUZHNYJ","COORDS_SEVERO_KAVKAZKIJ","COORDS_DALNEVOSTOCHNYJ","geo","BOUNDS_RUSSIA","L","LatLngBounds","mapbox","accessToken","doubleClickZoom","zoomControl","zoomDelta","zoomSnap","minZoom","setView","addLayer","styleLayer","fitBounds","padding","southWest","latLng","northEast","bounds","latLngBounds","setMaxBounds","panInsideBounds","animate","closeButton","closeOnClick","keepInView","getMarkersWithChildren","addCitiesOnMap","orgs2","arrayItem","arrayItemIndex","childsItems","itemIndex","childValue","itemChild","itemChildIndex","layer_0","featureLayer","layer_1","layer_2","layer_3","layerWithOrgs","onClickCity","target","_latlng","onClickPlace","_icon","classList","add","options","ev","remove","markerElem","marker","icon","divIcon","className","zIndexOffset","addTo","object","onClickPlaces","place","iconUrl","iconSize","iconAnchor","popupAnchor","showLabel","css","hideLabel","setLayer","removeLayer","closePopup","_zoom","hideNavList","slideUp","slideToggle","event","stopPropagation","fadeIn","fadeOut","niceScroll","horizrailenabled","pluginName","defaults","containerClass","containerNoScrollClass","contentClass","scrollbarContainerClass","scrollBarClass","Plugin","element","settings","extend","_defaults","_name","init","addScrollbar","addEvents","onResize","wrapper","contents","scollbarContainer","scrollBar","prepend","proxy","onScroll","onMousedown","onTouchstart","me","y","offsetTop","end","delta","touches","pageY","style","top","min","clientHeight","max","scrollTop","scrollHeight","off","height","wrapper_client_height","fn","getZoom","duration","easeLinearity","org","objectItem","objectItemIndex","getContent","setLatLng","setContent","openOn","getNiceScroll"],"mappings":"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","file":"main.min.js","sourcesContent":["$(function () {\n    var MOBILE_WIDTH = 600;\n\n    var hideClassifier = function () {\n        $('#js-jewmapHamburger').removeClass('active');\n        $('#js-classifier').removeClass('open');\n        if ($(window).width() <= MOBILE_WIDTH) {\n            $('.leaflet-control-container').removeClass('hide');\n            $('#js-lang').removeClass('hide');\n        }\n    }\n\n    // hide classifier on nav click\n    $(window).on('resize', function () {\n        hideClassifier();\n    });\n\n    // hide classifier on resize\n    $('#js-navListWrapper ul>li>a').on('click', function () {\n        hideClassifier();\n    });\n\n    // remove submit button default behavior\n    $('#js-classifier button[type=\"submit\"]').click(function(e) {\n        e.preventDefault();\n    });\n\n    // show classifier items equal to entered by user\n    $('#js-classifier input[type=\"text\"]').on('change keydown keyup', function() {\n        var input = $(this);\n        var cityToFind = input.val().toUpperCase();\n        var cityToFindLength = cityToFind.length;\n        \n        var block = $('#js-classifier ul')\n\n        block.find('a').each(function() {\n            var cityWrapper = $(this).closest('li');\n            var city = $(this).text().toUpperCase();\n            city = city.substring(0, cityToFindLength);\n    \n            if (city !== cityToFind) {\n                cityWrapper.hide();\n            } else {\n                cityWrapper.show();\n            }\n        })\n    });\n    \n    // var citiesArray = [];\n\n    var cities = \n    [\n        'Москва',\n        'Санкт-Петербург',\n        'Новосибирск',\n        'Екатеринбург',\n        'Казань',\n        'Челябинск',\n        'Омск',\n        'Самара',\n        'Ростов-на-Дон',\n        'Уфа',\n        'Красноярск',\n        'Воронеж',\n        'Пермь',\n        'Волгоград',\n        'Краснодар',\n        'Саратов',\n        'Тюмень',\n        'Тольятти',\n        'Ижевск',\n        'Воронеж',\n        'Пермь',\n        'Волгоград',\n        'Краснодар',\n        'Саратов',\n        'Тюмень',\n        'Тольятти',\n        'Ижевск',\n        'Москва',\n        'Санкт-Петербург',\n        'Новосибирск',\n        'Екатеринбург',\n        'Казань',\n        'Челябинск',\n        'Омск',\n        'Самара',\n        'Ростов-на-Дон',\n        'Уфа',\n        'Красноярск',\n        'Воронеж',\n        'Пермь',\n        'Волгоград',\n        'Краснодар',\n        'Саратов',\n        'Тюмень',\n        'Тольятти',\n        'Ижевск',\n        'Воронеж',\n        'Пермь',\n        'Волгоград',\n        'Краснодар',\n        'Саратов',\n        'Тюмень',\n        'Тольятти',\n        'Ижевск'\n    ]\n\n    var addClassifier = function (map, orgs) {\n\n        // sort array\n        var sortArray = function (array) {\n\n            // sort by alphabet\n            array.sort(function(a, b){\n                if(a.name < b.name) { return -1; }\n                if(a.name > b.name) { return 1; }\n                return 0;\n            });\n\n            // spb to top\n            array.forEach(function (elem) {\n                if (elem.name === 'Санкт-Петербург') {\n                    array.splice(array.indexOf(elem), 1)\n                    array.unshift(elem);\n                    return false;\n                }\n            });\n\n            // moscow to top\n            array.forEach(function (elem) {\n                if (elem.name === 'Москва') {\n                    array.splice(array.indexOf(elem), 1)\n                    array.unshift(elem);\n                    return false;\n                }\n            });\n\n            // get index of center elem\n            var halfLength = Math.ceil(array.length / 2);\n\n            // cut array on two halves (half - first half, array - second half)\n            var half = array.splice(0, halfLength);\n\n            // add one elem from each half at a time\n            var interimArray = [];\n            \n            for (var i = 0; i < halfLength; i++) {\n                half[i] !== undefined ? interimArray.push(half[i]) : '';\n                array[i] !== undefined ? interimArray.push(array[i]) : '';\n            };\n\n            return array = interimArray;\n        }\n\n        sortedArray = sortArray(orgs);\n\n        // create classifier from template and array\n        var addPopup = function (array) {\n            // var fragmentMenu = document.createDocumentFragment();\n            // var template = document.querySelector('#js-templateClassifier').content.querySelector('.classifier');\n            // var templateElement = template.cloneNode(true);\n            // fragmentMenu.appendChild(templateElement);\n            // $('#js-jewmap').append(fragmentMenu);\n\n            Array.prototype.forEach.call(array, function (elem) {\n                var fragmentMenuItem = document.createDocumentFragment();\n                var template = document.querySelector('#js-templateClassifierItem').content.querySelector('.classifier__list-item');\n                var templateElement = template.cloneNode(true);\n                templateElement.querySelector('.classifier__list-link').setAttribute('data-id', elem.id);\n                templateElement.querySelector('.classifier__list-link').textContent = elem.name;\n                // templateElement.querySelector('.classifier__list-link').setAttribute('data-address', elem.address);\n                // templateElement.querySelector('.classifier__list-link').setAttribute('data-person', elem.person);\n                // templateElement.querySelector('.classifier__list-link').setAttribute('data-phone', elem.phone);\n                templateElement.querySelector('.classifier__list-link').setAttribute('data-status', elem.status);\n                templateElement.querySelector('.classifier__list-link').setAttribute('data-point', elem.point);\n                fragmentMenuItem.appendChild(templateElement);\n                document.querySelector('.classifier__list').append(fragmentMenuItem);\n            });\n\n            $('#js-classifierScrollbar').scrollBox();\n\n            $('.classifier__list-link').on('click', function () {\n                var point = $(this).attr('data-point').split(',');\n                window.util.flyTo(map, [ parseFloat(point[0]), parseFloat(point[1]) ]);\n                hideClassifier();\n            })\n\n            // show/hide classifier on jewmap hamburger click\n            $('.jewmap__hamburger').on('click', function () {\n                $('#js-jewmapHamburger').toggleClass('active');\n                $('#js-classifier').toggleClass('open');\n                if ($(window).width() <= MOBILE_WIDTH) {\n                    $('.leaflet-control-container').toggleClass('hide');\n                    $('#js-lang').toggleClass('hide');\n                }\n                if ($('.popup').hasClass('open')) {\n                    $('.popup').removeClass('open');\n                    $('#js-navListWrapper ul>li>a').removeClass('active');\n                }\n            });\n        }\n\n        addPopup(sortedArray);\n    }\n    \n    window.classifier = {\n        addClassifier: function (map, array) {\n            addClassifier(map, array);\n        }\n    }\n});","$(function () {\n\n    // var BOUNDS_DALNEVOSTOCHNYJ = new L.LatLngBounds([65.0, 70.0], [62.0, 210.0]);\n    // var BOUNDS_PRIVOLZHSKIJ = new L.LatLngBounds([45.0, 51.0], [64.0, 54.0]);\n    // var BOUNDS_SEVERO_ZAPADNYJ = new L.LatLngBounds([50.0, 51.0], [74.0, 34.0]);\n    // var BOUNDS_SEVERO_KAVKAZKIJ = new L.LatLngBounds([45.0, 57.0], [43.0, 30.0]);\n    // var BOUNDS_SIBIRSKIJ = new L.LatLngBounds([40.0, 55.0], [78.0, 148.0]);\n    // var BOUNDS_URALSKIJ = new L.LatLngBounds([49.0, 55.0], [75.0, 87.0]);\n    // var BOUNDS_CZENTRALNYJ = new L.LatLngBounds([47.0, 41.0], [60.0, 34.0]);\n    // var BOUNDS_YUZHNYJ = new L.LatLngBounds([53.0, 44.0], [42.0, 45.0]);\n    var COORDS_DALNEVOSTOCHNYJ = [64.825365, 144.878838];\n    var COORDS_PRIVOLZHSKIJ = [56.189357,51.733371];\n    var COORDS_SEVERO_ZAPADNYJ = [70.600608, 44.406038];\n    var COORDS_SEVERO_KAVKAZKIJ = [43.765150,44.735885];\n    var COORDS_SIBIRSKIJ = [70.886952,94.748395];\n    var COORDS_URALSKIJ = [64.871851,71.569335];\n    var COORDS_CZENTRALNYJ = [54.905772,39.195997];\n    var COORDS_YUZHNYJ = [47.401426,41.055524];\n\n    var sortArray = function (array) {\n\n        // sort by alphabet\n        array.sort(function(a, b){\n            if(a.name < b.name) { return -1; }\n            if(a.name > b.name) { return 1; }\n            return 0;\n        });\n\n        // get index of center elem\n        var halfLength = Math.ceil(array.length / 2);\n\n        // cut array on two halves (half - first half, array - second half)\n        var half = array.splice(0, halfLength);\n\n        // add one elem from each half at a time\n        var interimArray = [];\n        \n        for (var i = 0; i < halfLength; i++) {\n            half[i] !== undefined ? interimArray.push(half[i]) : '';\n            array[i] !== undefined ? interimArray.push(array[i]) : '';\n        };\n\n        return array = interimArray;\n    }\n\n    var getPhonesWithLinks = function (phones) {\n        var phoneArray = [];\n        Array.prototype.forEach.call(phones, function (phone) { \n            var phoneLink = phone.split(' ').join('').split('(').join('').split(')').join('').split('-').join('').split('?').join('');\n\n            phoneArray.push({\n                'phone': phone,\n                'phoneLink': phoneLink\n            });\n        });\n        return phoneArray;\n    }\n\n\n    var addGeo = function (map, popup) {\n\n        var handleDistrictClick = function () {\n            if (localStorage.getItem('districts') === null) {\n                $.ajax({\n                    method: \"GET\",\n                    url: \"post.php\",\n                    data: {\n                        request: 2\n                    }\n                })\n                    .done(function( msg ) {\n                        var obj = jQuery.parseJSON(msg);\n                        // console.log(obj);\n                        localStorage.setItem('districts', JSON.stringify(obj));\n                        addDistricts(JSON.parse(localStorage.getItem('districts')));\n                    });\n            } else {\n                addDistricts(JSON.parse(localStorage.getItem('districts')));\n            }\n        }\n    \n        var handleCityClick = function (id, name) {\n\n            $.ajax({\n                method: \"GET\",\n                url: \"post.php\",\n                data: {\n                    request: 3,\n                    district: id\n                }\n            })\n                .done(function( msg ) {\n                    var obj = jQuery.parseJSON(msg);\n\n                    var citiesArray = [];\n\n                    Array.prototype.forEach.call(obj, function (objItem, objItem_i) {\n\n                        if (citiesArray.length === 0){\n                            citiesArray.push({\n                                'term_city_id': objItem['term_city_id'],\n                                'name_city': objItem['name_city'],\n                                'latitude_city': objItem['latitude_city'],\n                                'longitude_city': objItem['longitude_city'],\n                                'orgs': []\n                            });\n                            citiesArray[0].orgs.push(objItem);\n                        } else {\n                            var value = false;\n            \n                            Array.prototype.forEach.call(citiesArray, function (item, item_i) {\n                                \n                                if (item['term_city_id'] === objItem['term_city_id']) {\n                                    value = true;\n                                    item.orgs.push(objItem)\n                                }\n                            })\n            \n                            if (value === false) {\n                                citiesArray.push({\n                                    'term_city_id': objItem['term_city_id'],\n                                    'name_city': objItem['name_city'],\n                                    'latitude_city': objItem['latitude_city'],\n                                    'longitude_city': objItem['longitude_city'],\n                                    'orgs': []\n                                });\n                            }\n                        }\n                    });\n                    addCities(citiesArray, name, id);\n                });\n        }\n\n        var addOrgs = function (array, city, district, district_id) {\n\n            $('#js-geo .popup__main').html('');\n            var html = '';\n\n            html += '<span class=\"geo__district-title\">'\n                    //  + '<span class=\"geo__decor\">|</span>'\n                     + '<span class=\"geo__district-text\">' + district + '</span>'\n                     + '<span class=\"geo__district-item-descr\">федеральный округ</span>'\n                     + '</span>'\n                     + '<span id=\"' + district_id + '\" class=\"geo__city-title\">' + city + '</span>'\n\n            if (array.length !== 0) {\n                html += '<div class=\"geo__orgs-wrapper\">'\n                html += '<div class=\"geo__orgs\">'\n                \n                Array.prototype.forEach.call(array, function (parent, parent_i) {\n\n                    html += '<p class=\"geo__orgs-type\">'\n                        // + '<span class=\"geo__decor\">|</span>'\n                        + '<span id=\"' + parent['id_type'] + '\">' + parent['name_type'] + '</span>'\n                    + '</p>'\n\n                    Array.prototype.forEach.call(parent.childs, function (child, child_i) {\n                        html += '<div class=\"geo__org\">'\n                        if (child['lat'] !== '' || child['lng'] !== '') {\n                            html += '<a href=\"#\"'\n                                + ' data-lat=\"' + child['lat']\n                                + '\" data-lng=\"' + child['lng'] \n                                + '\" data-address=\"' + child['address']\n                                + '\" data-phone=\"' + child['phone']\n                                + '\" data-email=\"' + child['email']\n                                + '\" data-site=\"' + child['site']\n                                + '\" class=\"geo__org-name\">' + child['name'] + '</a>'\n                        } else {\n                            html += '<p class=\"geo__org-name\">' + child['name'] + '</p>'\n                        }\n\n                        if (child['rabbi'] !== '' && child['rabbi'] !== null) {\n                        html += '<p class=\"geo__org-rabbi\">'\n                                + '<span class=\"geo__org-icon icon-user\"></span>'\n                                + '<span class=\"geo__org-text\">' + child['rabbi'] + '</span>'\n                            + '</p>'\n                        }\n\n                        if (child['address'] !== '') {\n                            if (child['lat'] !== '' || child['lng'] !== '') {\n                                var yandexLink = 'https://yandex.by/maps/?ll=' + child['lng'] + ',' + child['lat'] + '&z=16&text=' + child['name'].split(' ').join('%20'); \n                                html += '<a href=\"' + yandexLink +'\" class=\"geo__org-address\">'\n                                        + '<span class=\"geo__org-icon icon-address\"></span>'\n                                        + '<span class=\"geo__org-text\">' + child['address'] + '</span>'\n                                    + '</a>'\n                            } else {\n                                html += '<p class=\"geo__org-address\">'\n                                        + '<span class=\"geo__org-icon icon-address\"></span>'\n                                        + '<span class=\"geo__org-text\">' + child['address'] + '</span>'\n                                    + '</p>'\n                            }\n                        }\n\n                        if (child['phone'] !== '') {\n                            \n                            var phones = child['phone'].split(';');\n                    \n                            if (phones.length !== 0) {\n                                var phoneArray = getPhonesWithLinks(phones);\n\n                                html += '<div class=\"geo__org-phone\"><span class=\"geo__org-icon icon-phone\"></span><div class=\"geo__org-phone-content\">';\n\n                                Array.prototype.forEach.call(phoneArray, function (elem, i) { \n                                    html += '<a href=\"tel:' + elem.phoneLink + '\" class=\"geo__org-text\">' + elem.phone + '</a>';\n                                    // i < phoneArray.length - 1 ? html += ', ' : '';\n                                }); \n                                html += '</div></div>';\n                            }\n                        }\n                        html += '</div>';\n                    });\n                    \n                });\n                html += '</div>';\n                html += '</div>';\n    \n            } else {\n                html += '<div class=\"geo__orgs-wrapper\">'\n                html += '<div class=\"geo__orgs\"><p>Ничего не найдено.</p>'\n                html += '</div></div>'\n            }\n\n            // $('#js-geo .geo__district-title .geo__district-text').text(district);\n            // $('#js-geo .geo__city-title').text(city);\n            // $('#js-geo .geo__city-title').attr('id', district_id);\n            $('#js-geo .popup__main').append(html);\n            $('.popup').removeClass('open');\n            $('#js-geo').addClass('open');\n\n            $('#js-geo .geo__district-title').on('click', function () {\n                handleDistrictClick();\n            });\n\n            $('#js-geo .geo__city-title').on('click', function (e) {\n                handleCityClick(district_id, district);\n            })\n\n            $('#js-geo a.geo__org-name').on('click', function (e) {\n                var lat = parseFloat($(this).attr('data-lat'));\n                var lng = parseFloat($(this).attr('data-lng'));\n                var name = $(this).text();\n                var address = $(this).attr('data-address');\n                var phone = $(this).attr('data-phone');\n                var email = $(this).attr('data-email');\n                var site = $(this).attr('data-site');\n\n                $('.popup').removeClass('open');\n                $('#js-jewmapHamburger').removeClass('move');\n                $('#js-jewmapSearch').removeClass('move');\n                $('#js-navListWrapper ul>li>a').removeClass('active');\n        \n                window.util.flyTo(map, [lat, lng], 13);\n                window.util.addPopup(map, popup, {\n                    'name': name,\n                    'point': [lat,lng],\n                    'address': address,\n                    'phone': phone,\n                    'email': email,\n                    'site': site\n                });\n            })\n        }\n\n        var addCities = function (array, district, district_id) {\n            $('#js-geoCities .popup__main').html('');\n\n            var html = '';\n\n            var cities = array.slice(0);\n            var sortedArray = sortArray(array);\n\n\n            if (array.length !== 0) {\n                html += '<span class=\"geo__district-title\">'\n                    //  + '<span class=\"geo__decor\">|</span>'\n                     + '<span class=\"geo__district-text\">' + district + '</span>'\n                     + '<span class=\"geo__district-item-descr\">федеральный округ</span>'\n                     + '</span>'\n                html += '<ul class=\"geo__city-list\">'\n\n                Array.prototype.forEach.call(sortedArray, function (item, i) {\n                    html += '<li class=\"geo__city-wrapper\">'\n                        + '<a id=\"' + item['term_city_id'] + '\" class=\"geo__city-item\" data-lat=\"' + item['latitude_city'] + '\" data-lng=\"' + item['longitude_city'] + '\">' + item['name_city'] + '</a>'\n                        + '</li>'\n                });\n                html += '</ul>'\n            }\n\n            // $('#js-geoCities .geo__district-title .geo__district-text').text(district);\n            $('#js-geoCities .popup__main').append(html);\n            $('.popup').removeClass('open');\n            $('#js-geoCities').addClass('open');\n\n            $('#js-geoCities .geo__district-title').on('click', function () {\n                handleDistrictClick();\n            });\n\n            $('#js-geoCities .geo__city-item').on('click', function (e) {\n                var id = $(this).attr('id');\n                var name = $(this).text();\n                var lat = parseFloat($(this).attr('data-lat'));\n                var lng = parseFloat($(this).attr('data-lng'));\n\n                var orgsArray = [];\n                var religOrg = '';\n\n                $.ajax({\n                    method: \"GET\",\n                    url: \"post.php\",\n                    data: {\n                        request: 6,\n                        city: id\n                    }\n                })\n                    .done(function( msg ) {\n                        var relig = jQuery.parseJSON(msg);\n                        console.log('relig', relig)\n                        var empty = 1;\n                        $.each( relig, function( key, value ) {\n                            if (value !== '') {\n                                return empty = 0;\n                            }\n                        });\n\n                        if (empty === 0) {\n                            religOrg = relig;\n                            religOrg['lat'] = '';\n                            religOrg['lng'] = '';\n                            religOrg['site'] = '';\n                        }\n                        \n                    });\n\n                $.ajax({\n                    method: \"GET\",\n                    url: \"post.php\",\n                    data: {\n                        request: 5\n                    }\n                })\n                    .done(function( msg ) {\n                        var types = jQuery.parseJSON(msg);\n\n                        Array.prototype.forEach.call(types, function (type, type_i) {\n\n                            var parent = {\n                                'id_type': type['term_type_id'],\n                                'name_type': type['name_type'],\n                                'childs': []\n                            };\n\n                            var child = '';\n                            var city = '';\n\n                            Array.prototype.forEach.call(cities, function (citiesItem, citiesItem_i) {\n                                if (citiesItem['term_city_id'] === id) {\n                                    city = citiesItem;\n                                    return false;\n                                }\n                            });\n\n\n                            Array.prototype.forEach.call(city.orgs, function (obj_item, obj_i) {\n                                if (obj_item['ID'] === type['ID']) {\n                                    child = {\n                                        'id': obj_item['ID'],\n                                        'name': obj_item['post_title'],\n                                        'lat': obj_item['latitude'],\n                                        'lng': obj_item['longitude'],\n                                        'address': obj_item['address'],\n                                        'phone': obj_item['phone'],\n                                        'rabbi': obj_item['rabbi'],\n                                        'email': obj_item['email'],\n                                        'site': obj_item['site']\n                                    };\n                                }\n                            });\n                    \n                            if (orgsArray.length === 0){\n                                orgsArray.push(parent);\n                                child !== '' ? orgsArray[0].childs.push(child) : '';\n                            } else {\n                                var value = false;\n                \n                                Array.prototype.forEach.call(orgsArray, function (item, item_i) {\n                                    \n                                    if (item['name_type'] === type['name_type']) {\n                                        value = true;\n                                        child !== '' ? item.childs.push(child) : '';\n                                    }\n                                })\n                \n                                if (value === false) {\n                                    orgsArray.push(parent);\n                                    child !== '' ? orgsArray[orgsArray.length - 1].childs.push(child) : '';\n                                }\n                            }\n                        })\n\n                        var orgsArrayClone = [];\n\n                        if (religOrg !== '') {\n                            Array.prototype.forEach.call(orgsArray, function (item, item_i) {\n        \n                                if (item['id_type'] === '190') {\n                                    item.childs.unshift(religOrg);\n                                    return false;\n                                }\n                            });\n                        }\n                        \n                        Array.prototype.forEach.call(orgsArray, function (item, item_i) {\n                            if (item.childs.length !== 0) {\n                                \n                                if (item['id_type'] === '190') {\n                                    item['order'] = 1;\n                                    item['name_type'] = 'Религиозные организации';\n                                } else if (item['id_type'] === '5') {\n                                    item['order'] = 2;\n                                } else if (item['id_type'] === '6') {\n                                    item['order'] = 3;\n                                } else if (item['id_type'] === '8') {\n                                    item['order'] = 4;\n                                } else if (item['id_type'] === '9') {\n                                    item['order'] = 5;\n                                } else if (item['id_type'] === '10') {\n                                    item['order'] = 6;\n                                } else if (item['id_type'] === '13') {\n                                    item['order'] = 7;\n                                } else if (item['id_type'] === '14') {\n                                    item['order'] = 8;\n                                } else if (item['id_type'] === '15') {\n                                    item['order'] = 9;\n                                } else if (item['id_type'] === '17') {\n                                    item['order'] = 10;\n                                } else if (item['id_type'] === '18') {\n                                    item['order'] = 11;\n                                } else if (item['id_type'] === '189') {\n                                    item['order'] = 12;\n                                } else {\n                                    item['order'] = 13;\n                                }\n                                orgsArrayClone.push(item)\n                            }\n                        })\n\n                        orgsArrayClone.sort(function(a, b){\n                            if(a.order < b.order) { return -1; }\n                            if(a.order > b.order) { return 1; }\n                            return 0;\n                        });\n\n                        addOrgs(orgsArrayClone, name, district, district_id);\n                    })\n\n                    window.util.flyTo(map, [lat, lng], 13);\n            })\n        }\n\n        var addDistricts = function (array) {\n            $('#js-geoDistricts .popup__main').html('');\n\n            var html = '';\n\n            if (array.length !== 0) {\n                html += '<ul class=\"geo__district-list\">'\n\n                Array.prototype.forEach.call(array, function (item, i) {\n                    html += '<li class=\"geo__district-wrapper\">'\n                        + '<a id=\"' + item['term_district_id'] + '\" class=\"geo__district-item\">' + item['name_district'] + '</a>'\n                        + '<span class=\"geo__district-item-descr\">федеральный округ</span>'\n                        + '</li>'\n                });\n                html += '</ul>'\n            }\n\n            $('#js-geoDistricts .popup__main').append(html);\n            $('#js-jewmapHamburger').addClass('move');\n            $('#js-jewmapSearch').addClass('move');\n            $('.popup').removeClass('open');\n            $('#js-geoDistricts').addClass('open');\n\n            $('#js-geoDistricts .geo__district-item').on('click', function (e) {\n                var id = $(this).attr('id');\n                var name = $(this).text();\n                handleCityClick(id, name);\n                var coords = '';\n                var zoom = '';\n                switch(id) {\n                    case '31':\n                        coords = COORDS_CZENTRALNYJ\n                        zoom = 5\n                        break\n                    case '32':\n                        coords = COORDS_SIBIRSKIJ\n                        zoom = 4;\n                        break\n                    case '33':\n                        coords = COORDS_URALSKIJ\n                        zoom = 4.5\n                        break\n                    case '34':\n                        coords = COORDS_SEVERO_ZAPADNYJ\n                        zoom = 4\n                        break\n                    case '35':\n                        coords = COORDS_PRIVOLZHSKIJ\n                        zoom = 5\n                        break\n                    case '36':\n                        coords = COORDS_YUZHNYJ\n                        zoom = 5.5\n                        break\n                    case '37':\n                        coords = COORDS_SEVERO_KAVKAZKIJ\n                        zoom = 5.5\n                        break\n                    case '38':\n                        coords = COORDS_DALNEVOSTOCHNYJ\n                        zoom= 4\n                        break\n                  }\n                window.util.flyTo(map, coords, zoom);\n            })\n        }\n\n        $('#js-nav a[data-popup=\"geoDistricts\"]').on('click', function () {\n            handleDistrictClick();\n        });\n    };\n\n    window.geo = {\n        addGeo: function (map, popup) {\n            addGeo(map, popup);\n        }\n    }\n});","$(function () {\n    $('#js-lang a').on('click', function () {\n        $(this).removeClass('active');\n        var elem = $(this)\n        $('#js-lang a').each(function () {\n            if ($(elem).text() !== $(this).text()) {\n                $(this).addClass('active')\n            }\n        })\n    })\n});","$(function () {\n    \n    var orgs = [];\n    \n    var PIN = 'public/img/pin.png';\n    var BUILDING = 'public/img/building-blue.png';\n    var ZOOM = 4;\n    var BOUNDS_RUSSIA = new L.LatLngBounds([60.0, 21], [69.0, 167.0]);\n    if ($(window).width() <= 600) {\n        BOUNDS_RUSSIA = new L.LatLngBounds([40.0, 25.0], [55.0, 180.0]);\n    }\n\n    L.mapbox.accessToken = 'pk.eyJ1IjoiYWxpYXBrbyIsImEiOiJjangyenVmeGMwcTFjM3lvNGhsdmUzejRoIn0.zdJYMN5sxS2SJXZV2Lb3aA';\n\n    var map = L.map('map', {\n        doubleClickZoom: false,\n        zoomControl: true,\n        zoomDelta: 0.25,\n        zoomSnap: 0,\n        // maxZoom: 10,\n        minZoom: 2,\n        // maxBounds: new L.LatLngBounds([10.0, 15.0],[25.0, 188.0]),\n        // zoomSnap: 0,\n        // maxBoundsViscosity: 1\n    })\n        .setView([63.674041, 99.742382], ZOOM)\n        .addLayer(L.mapbox.styleLayer('mapbox://styles/aliapko/ck0066wpr2azz1cpl59flq3df'));\n\n    map.fitBounds(BOUNDS_RUSSIA, { padding: [20, 20] });\n\n    var southWest = L.latLng(-89.98155760646617, -180),\n    northEast = L.latLng(89.99346179538875, 230);\n    var bounds = L.latLngBounds(southWest, northEast);\n\n    map.setMaxBounds(bounds);\n    map.on('drag', function() {\n        map.panInsideBounds(bounds, { animate: false });\n    });\n\n    // create popup\n    // var markerHeight = 20, markerRadius = 10, linearOffset = 25;\n    // var popupOffsets = {\n    //  'top': [0, 20],\n    //  'top-left': [0,0],\n    //  'top-right': [0,0],\n    //  'bottom': [0, -markerHeight],\n    //  'bottom-left': [linearOffset, (markerHeight - markerRadius + linearOffset) * -1],\n    //  'bottom-right': [-linearOffset, (markerHeight - markerRadius + linearOffset) * -1],\n    //  'left': [markerRadius, (markerHeight - markerRadius) * -1],\n    //  'right': [-markerRadius, (markerHeight - markerRadius) * -1]\n    //  };\n\n    var popup = new L.popup({\n        // offset: popupOffsets,\n        closeButton: true,\n        closeOnClick: true,\n        keepInView: true\n    });\n\n    window.geo.addGeo(map, popup)\n\n    $.ajax({\n        method: \"GET\",\n        url: \"post.php\",\n        data: {\n            request: 1\n        }\n      })\n        .done(function( msg ) {\n          var obj = jQuery.parseJSON(msg);\n          console.log(obj);\n          getMarkersWithChildren(obj);\n          console.log(orgs);\n          addCitiesOnMap(orgs);\n          var orgs2 = orgs.slice(0);\n          window.classifier.addClassifier(map, orgs2);\n        //   window.geo.addGeo(map, orgs);\n        });\n\n    // transform list of orgs into array of cities with children\n    var getMarkersWithChildren = function (array) {\n    \n        Array.prototype.forEach.call(array, function (arrayItem, arrayItemIndex) {\n\n            var parent = {\n                'id': arrayItemIndex,\n                'name': arrayItem['name_city'],\n                'point': [\n                    arrayItem['latitude_city'] === '' || arrayItem['latitude_city'] === null ? '' : parseFloat(arrayItem['latitude_city']),\n                    arrayItem['longitude_city'] === '' || arrayItem['longitude_city'] === null ? '' : parseFloat(arrayItem['longitude_city'])\n                ],\n                'status': arrayItem['status_city'],\n                'childs': []\n            };\n\n            var child = {\n                'name': arrayItem['post_title'],\n                'address': arrayItem['address'],\n                'point': [\n                    arrayItem['latitude'] === '' || arrayItem['latitude'] === null ? '' : parseFloat(arrayItem['latitude']),\n                    arrayItem['longitude'] === '' || arrayItem['longitude'] === null ? '' : parseFloat(arrayItem['longitude'])\n                ],\n                'phone': arrayItem['phone'],\n                'email': arrayItem['email'],\n                'site': arrayItem['site']\n            };\n        \n            if (orgs.length === 0){\n                orgs.push(parent);\n                // orgs[0].childs.push(child);\n\n                orgs[0].childs.push({\n                    coords: child.point,\n                    childsItems: []\n                });\n                orgs[0].childs[0].childsItems.push(child);\n            } else {\n                var value = false;\n\n                Array.prototype.forEach.call(orgs, function (item, itemIndex) {\n                    \n                    if (item['name'] === arrayItem['name_city']) {\n                        value = true;\n                        // item.childs.push(child);\n\n                        var childValue = false;\n                        Array.prototype.forEach.call(item.childs, function (itemChild, itemChildIndex) {\n\n                            if (itemChild['coords'][0] === child['point'][0]\n                            && itemChild['coords'][1] === child['point'][1]) {\n                                childValue = true;\n                                itemChild.childsItems.push(child);\n                            }\n                        });\n\n                        if (childValue === false) {\n                            item.childs.push({\n                                coords: child.point,\n                                childsItems: []\n                            });\n                            item.childs[item.childs.length - 1].childsItems.push(child);\n                        }\n                        \n                    }\n                })\n\n                if (value === false) {\n                    orgs.push(parent);\n                    // orgs[orgs.length - 1].childs.push(child);\n\n                    orgs[orgs.length - 1].childs.push({\n                        coords: child.point,\n                        childsItems: []\n                    });\n                    orgs[orgs.length - 1].childs[0].childsItems.push(child);\n                }\n            }\n        });\n    };\n\n    var addCitiesOnMap = function (array) {\n\n        // create layers with cities\n        var layer_0 = L.mapbox.featureLayer();\n        var layer_1 = L.mapbox.featureLayer();\n        var layer_2 = L.mapbox.featureLayer();\n        var layer_3 = L.mapbox.featureLayer();\n        var layerWithOrgs = L.mapbox.featureLayer();\n\n        // handle click event\n        function onClickCity(e) {\n            var point = e.target._latlng;\n            window.util.flyTo(map, [point.lat, point.lng]);\n        }\n\n        function onClickPlace(e) {\n            e.target._icon.classList.add('icon-hidden')\n            var point = e.target._latlng;\n            var name = e.target.options.name;\n            var address = e.target.options.address;\n            var phone = e.target.options.phone;\n            var email = e.target.options.email;\n            var site = e.target.options.site;\n            window.util.flyTo(map, [point.lat, point.lng]);\n            window.util.addPopup(map, popup, {\n                'name': name,\n                'point': [parseFloat(point.lat),parseFloat(point.lng)],\n                'address': address,\n                'phone': phone,\n                'email': email,\n                'site': site\n            });\n            map.on('popupclose', function(ev) {\n                e.target._icon !== null ? e.target._icon.classList.remove('icon-hidden') : '';\n            });\n        }\n\n        function onClickPlaces(object) {\n            window.util.flyTo(map, object[0].point);\n            window.util.addPopup(map, popup, object, 1);\n        }\n\n        // add markers on layers\n        Array.prototype.forEach.call(array, function (markerElem) { \n\n            if (markerElem.point[0] !== '' || markerElem.point[1] !== '') {\n\n                if (markerElem['status'] === '1') {\n\n                    if (markerElem['name'] === 'Москва') {\n                        var html = '<div class=\"jewmap__pin\"><div class=\"jewmap__pin-icon\"></div><span class=\"jewmap__pin-label\">' + markerElem.name + '</span></div>';\n                        var marker = L.marker(markerElem.point, {\n                            icon: L.divIcon({\n                                html: html,\n                                className: 'capital'\n                            }),\n                            zIndexOffset: 40\n                        }).addTo(layer_0);\n                        marker.on('click', onClickCity);\n\n                    } else {\n                        var html = '<div class=\"jewmap__pin\"><div class=\"jewmap__pin-icon\"></div><span class=\"jewmap__pin-label\">' + markerElem.name + '</span></div>';\n                        var marker = L.marker(markerElem.point, {\n                            icon: L.divIcon({\n                                html: html,\n                                className: 'district'\n                            }),\n                            zIndexOffset: 30\n                        }).addTo(layer_1);\n                        marker.on('click', onClickCity);\n                    }\n                    \n                } else if (markerElem['status'] === '2') {\n                    var html = '<div class=\"jewmap__pin\"><div class=\"jewmap__pin-icon\"></div><span class=\"jewmap__pin-label\">' + markerElem.name + '</span></div>';\n                    var marker = L.marker(markerElem.point, {\n                        icon: L.divIcon({\n                            html: html,\n                            className: 'region'\n                        }),\n                        zIndexOffset: 20\n                    }).addTo(layer_2);\n                    marker.on('click', onClickCity);\n\n                } else if (markerElem['status'] === '3' || markerElem['status'] === null) {\n                    var html = '<div class=\"jewmap__pin\"><div class=\"jewmap__pin-icon\"></div><span class=\"jewmap__pin-label\">' + markerElem.name + '</span></div>';\n                    var marker = L.marker(markerElem.point, {\n                        icon: L.divIcon({\n                            html: html,\n                            className: 'city'\n                        }),\n                        zIndexOffset: 10\n                    }).addTo(layer_3);\n                    marker.on('click', onClickCity);\n                } else {\n                    var html = '<div class=\"jewmap__pin\"><div class=\"jewmap__pin-icon\"></div><span class=\"jewmap__pin-label\">' + markerElem.name + '</span></div>';\n                    var marker = L.marker(markerElem.point, {\n                        icon: L.divIcon({\n                            html: html,\n                            className: 'city'\n                        }),\n                        zIndexOffset: 10\n                    }).addTo(layer_3);\n                    marker.on('click', onClickCity);\n                }\n            }\n\n            Array.prototype.forEach.call(markerElem.childs, function (childs) { \n\n                if (childs.childsItems.length > 1) {\n                    \n                        var marker = L.marker(childs.coords, {\n                            icon: L.divIcon({\n                                html: '<div class=\"jewmap__pin_orgs\"><div class=\"jewmap__pin-icon\"></div><div class=\"jewmap__pin-quantity\"><strong>' + childs.childsItems.length + '<strong></div></div>',\n                                className: 'orgs'\n                            }),\n                            // icon: L.icon({\n                            //     iconUrl: PIN,\n                            //     iconSize: [33, 48],\n                            //     iconAnchor: [16, 48],\n                            //     popupAnchor: [38, 0]\n                            // }),\n                            zIndexOffset: 50\n                        }).addTo(layerWithOrgs);\n\n                        marker.on('click', function () {\n                            onClickPlaces(childs.childsItems)\n                        });\n                } else {\n                    var place = childs.childsItems[0];\n                    if (place.point[0] !== '' || place.point[1] !== '') {\n                    \n                        var marker = L.marker(place.point, {\n                            // icon: L.divIcon({\n                            //     html: '<div class=\"jewmap__pin\"><div class=\"jewmap__pin-icon\"></div></div>',\n                            //     className: 'org'\n                            // }),\n                            icon: L.icon({\n                                iconUrl: BUILDING,\n                                iconSize: [25, 25],\n                                iconAnchor: [12, 25],\n                                popupAnchor: [25, 25]\n                            }),\n                            id: place.id,\n                            name: place.name,\n                            address: place.address,\n                            phone: place.phone,\n                            email: place.email,\n                            site: place.site\n                        }).addTo(layerWithOrgs);\n\n                        marker.on('click', onClickPlace);\n                    }\n                }\n            });\n        })\n\n        // show layers\n        map.addLayer(layer_1)\n        map.addLayer(layer_0)\n        // map.addLayer(layerWithOrgs)\n\n        // function to show label of marker\n        var showLabel = function (elem) {\n            $(elem + ' .jewmap__pin-label').css('opacity', '1');\n            $(elem + ' .jewmap__pin-label').css('pointer-events', 'auto');\n        }\n\n        // function to hide label of marker\n        var hideLabel = function (elem) {\n            $(elem + ' .jewmap__pin-label').css('opacity', '0');\n            $(elem + ' .jewmap__pin-label').css('pointer-events', 'none');\n        }\n\n        // show/hide layer on zoom value\n        var setLayer = function (zoom) {\n            if ($(window).width() < 575) {\n                if ( zoom > 2 && zoom < 3) {\n                    map.addLayer(layer_2)\n                    hideLabel('.region');\n                    map.removeLayer(layer_3);\n                    map.closePopup();\n                    map.removeLayer(layerWithOrgs);\n                } else if (zoom >= 3 && zoom < 4) {\n                    map.addLayer(layer_2)\n                    showLabel('.region');\n                    map.removeLayer(layer_3);\n                    map.closePopup();\n                    map.removeLayer(layerWithOrgs);\n                } else if ( zoom >= 4 && zoom < 5) {\n                    map.addLayer(layer_2)\n                    showLabel('.region');\n                    map.addLayer(layer_3);\n                    hideLabel('.city');\n                    map.closePopup();\n                    map.removeLayer(layerWithOrgs);\n                } else if ( zoom >= 5 && zoom < 13) {\n                    map.addLayer(layer_0);\n                    map.addLayer(layer_1);\n                    map.addLayer(layer_2)\n                    showLabel('.region');\n                    map.addLayer(layer_3);\n                    showLabel('.city');\n                    map.closePopup();\n                    map.removeLayer(layerWithOrgs);\n                } else if ( zoom <= 2) {\n                    map.addLayer(layer_0);\n                    map.addLayer(layer_1);\n                    map.removeLayer(layer_2);\n                    map.removeLayer(layer_3);\n                    map.closePopup();\n                    map.removeLayer(layerWithOrgs);\n                } else if ( zoom >= 13) {\n                    map.addLayer(layerWithOrgs);\n                    map.removeLayer(layer_0);\n                    map.removeLayer(layer_1);\n                    map.removeLayer(layer_2);\n                    map.removeLayer(layer_3);\n                }\n            } else {\n                if ( zoom > 4 && zoom < 5) {\n                    map.addLayer(layer_2)\n                    hideLabel('.region');\n                    map.removeLayer(layer_3);\n                    map.closePopup();\n                    map.removeLayer(layerWithOrgs);\n                } else if (zoom >= 5 && zoom < 6) {\n                    map.addLayer(layer_2)\n                    showLabel('.region');\n                    map.removeLayer(layer_3);\n                    map.closePopup();\n                    map.removeLayer(layerWithOrgs);\n                } else if ( zoom >= 6 && zoom < 7) {\n                    map.addLayer(layer_2)\n                    showLabel('.region');\n                    map.addLayer(layer_3);\n                    hideLabel('.city');\n                    map.closePopup();\n                    map.removeLayer(layerWithOrgs);\n                } else if ( zoom >= 7 && zoom < 13) {\n                    map.addLayer(layer_0);\n                    map.addLayer(layer_1);\n                    map.addLayer(layer_2)\n                    showLabel('.region');\n                    map.addLayer(layer_3);\n                    showLabel('.city');\n                    map.closePopup();\n                    map.removeLayer(layerWithOrgs);\n                } else if ( zoom <= 4) {\n                    map.addLayer(layer_0);\n                    map.addLayer(layer_1);\n                    map.removeLayer(layer_2);\n                    map.removeLayer(layer_3);\n                    map.closePopup();\n                    map.removeLayer(layerWithOrgs);\n                } else if ( zoom >= 13) {\n                    map.addLayer(layerWithOrgs);\n                    map.removeLayer(layer_0);\n                    map.removeLayer(layer_1);\n                    map.removeLayer(layer_2);\n                    map.removeLayer(layer_3);\n                }\n            }\n        }\n\n        setLayer(ZOOM)\n        \n        // handle zoomend event\n        map.on('zoomend', function(e) {\n            var zoom = e.target._zoom;\n            setLayer(zoom)\n        });\n    }\n});\n    ","$(function () {\n    var MOBILE_WIDTH = 600;\n\n    // function for hiding nav list and toggle hamburger class\n    var hideNavList = function () {\n        $('#js-navHamburger').removeClass('active');\n        $('#js-navListWrapper').slideUp();\n    }\n\n    // show active nav item\n    $('#js-navListWrapper ul>li>a').on('click', function () {\n        $('#js-navListWrapper ul>li>a').removeClass('active');\n        $(this).addClass('active');\n        if ($(window).width() <= MOBILE_WIDTH) {\n            hideNavList();\n        }\n    });\n\n    // show/hide nav on hamburger click\n    $('#js-navHamburger').on('click', function () {\n        $('#js-navHamburger').toggleClass('active');\n        $('#js-navListWrapper').slideToggle();\n    });\n\n    // hide nav on outside click\n    $(document).click(function(e) {\n        if ($(window).width() <= MOBILE_WIDTH) {\n            if ($(e.target).closest('#js-navListWrapper').length) return;\n            if ($(e.target).closest('#js-navHamburger').length) return;\n            hideNavList();\n            event.stopPropagation();\n        }\n    });\n\n    // show/hide nav on resize\n    $(window).on('resize', function () {\n        if ($(window).width() > MOBILE_WIDTH) {\n            $('#js-navListWrapper').show();\n            $('#js-navHamburger').removeClass('active');\n        } else {\n            hideNavList();\n        }\n    })\n\n});","$(window).on('load', function () {\n\n    var MOBILE_WIDTH = 600;\n\n    // show info popup\n    $('#js-overlay').fadeIn();\n\n    // hide controls and lang\n    if ($(window).width() <= MOBILE_WIDTH) {\n        $('.leaflet-control-container').addClass('hide');\n        $('#js-infoButton').addClass('hide');\n    }\n\n    // hide info popup on close click\n    $('#js-overlay .overlay__close').on('click', function () {\n        $('#js-overlay').fadeOut();\n        if ($(window).width() <= MOBILE_WIDTH) {\n            $('.leaflet-control-container').removeClass('hide');\n            $('#js-infoButton').removeClass('hide');\n        }\n    })\n\n    // hide info popup on outside click\n    $(document).click(function(e) {\n        if ($(e.target).closest('#js-overlay').length) return;\n        $('#js-overlay').fadeOut();\n        event.stopPropagation();\n        if ($(window).width() <= MOBILE_WIDTH) {\n            $('.leaflet-control-container').removeClass('hide');\n            $('#js-infoButton').removeClass('hide');\n        }\n    });\n});\n","$(function () {\n\n    // init scrollbar\n    $(\".popup__main\").niceScroll({\n        horizrailenabled: false\n    });\n\n    // show popup on nav click\n    $('#js-navListWrapper ul>li>a').on('click', function () {\n        var popup = $(this).attr('data-popup');\n        if ($('#js-' + popup).hasClass('open')) return;\n        // $('#js-jewmapHamburger').removeClass('move');\n        $('#js-jewmapHamburger').addClass('move');\n        $('#js-jewmapSearch').addClass('move');\n        $('.popup').removeClass('open');\n        $('#js-' + popup).addClass('open');\n    });\n\n    // hide popup on close click\n    $('.popup__close').on('click', function () {\n        $('.popup').removeClass('open');\n        $('#js-jewmapHamburger').removeClass('move');\n        $('#js-jewmapSearch').removeClass('move');\n        $('#js-navListWrapper ul>li>a').removeClass('active');\n    });\n\n    // hide popup on outside click\n    // $(document).click(function(e) {\n    //     if ($(e.target).closest('#js-nav').length) return;\n    //     if ($(e.target).closest('.popup').length) return;\n    //     $('.popup').removeClass('open');\n    //     $('#js-jewmapHamburger').removeClass('move');\n    //     $('#js-jewmapSearch').removeClass('move');\n    //     $('#js-navListWrapper ul>li>a').removeClass('active');\n    //     event.stopPropagation();\n    // });\n\n});","/**\n * jQiery scrollBar Plugin\n * @author Falk Müller (www-falk-m.de)\n * Thankts to https://codepen.io/IliaSky/pen/obowmv\n */\n;( function( $, window, document ) {\n\n\t\"use strict\";\n\n\t\tvar pluginName = \"scrollBox\",\n\t\t\tdefaults = {\n\t\t\t\tcontainerClass: \"sb-container\",\n                                containerNoScrollClass: \"sb-container-noscroll\",\n                                contentClass: \"sb-content\",\n                                scrollbarContainerClass: \"sb-scrollbar-container\",\n                                scrollBarClass: \"sb-scrollbar\"\n                                \n\t\t\t};\n\n\t\t// plugin constructor\n\t\tfunction Plugin ( element, options ) {\n\t\t\tthis.element = element;\n\n\t\t\tthis.settings = $.extend( {}, defaults, options );\n\t\t\tthis._defaults = defaults;\n\t\t\tthis._name = pluginName;\n\t\t\tthis.init();\n                        \n\t\t}\n\n\t\t// Avoid Plugin.prototype conflicts\n\t\t$.extend( Plugin.prototype, {\n\t\t\tinit: function() {\n\n\t\t\t\tthis.addScrollbar();\n                                this.addEvents();\n                                this.onResize();\n\t\t\t},\n\t\t\taddScrollbar: function() {\n                                $( this.element ).addClass(this.settings.containerClass);\n                                this.wrapper = $(\"<div class='\" + this.settings.contentClass + \"' />\");\n                                this.wrapper.append($( this.element ).contents());\n                                $( this.element ).append( this.wrapper );\n                                \n                                this.scollbarContainer = $(\"<div class='\" + this.settings.scrollbarContainerClass + \"' />\");\n                                this.scrollBar = $(\"<div class='\" + this.settings.scrollBarClass + \"' />\");\n                                this.scollbarContainer.append(this.scrollBar);\n                                $( this.element ).prepend(this.scollbarContainer);\n\t\t\t},\n                        addEvents: function(){\n                            \n                            this.wrapper.on(\"scroll.\" + pluginName, $.proxy(this.onScroll, this) )\n                            $(window).on(\"resize.\" + pluginName, $.proxy(this.onResize, this) )\n                            \n                            this.scrollBar.on('mousedown.' + pluginName, $.proxy(this.onMousedown, this));\n                            this.scrollBar.on('touchstart.' + pluginName, $.proxy(this.onTouchstart, this));\n                        },\n                        \n                        onTouchstart: function(ev){\n                            var me = this;\n                            \n                            ev.preventDefault();\n                            var y = me.scrollBar[0].offsetTop;\n\n                            var onMove = function(end){\n                                   var delta = end.touches[0].pageY - ev.touches[0].pageY;\n                                   me.scrollBar[0].style.top = Math.min(me.scollbarContainer[0].clientHeight - me.scrollBar[0].clientHeight, Math.max(0, y + delta)) + 'px';\n                                   me.wrapper[0].scrollTop = (me.wrapper[0].scrollHeight * me.scrollBar[0].offsetTop / me.scollbarContainer[0].clientHeight);\n                            };\n\n                           $(document).on(\"touchmove.\" + pluginName, onMove);\n                           $(document).on(\"touchend.\" + pluginName, function(){\n                               $(document).off(\"touchmove.\" + pluginName);\n                               $(document).off(\"touchend.\" + pluginName);\n                           });\n                        },\n                        \n                        onMousedown: function(ev){\n                            var me = this;\n                            \n                            ev.preventDefault();\n                            var y = me.scrollBar[0].offsetTop;\n\n                            var onMove = function(end){\n                                   var delta = end.pageY - ev.pageY;\n                                   me.scrollBar[0].style.top = Math.min(me.scollbarContainer[0].clientHeight - me.scrollBar[0].clientHeight, Math.max(0, y + delta)) + 'px';\n                                   me.wrapper[0].scrollTop = (me.wrapper[0].scrollHeight * me.scrollBar[0].offsetTop / me.scollbarContainer[0].clientHeight);\n                            };\n\n                           $(document).on(\"mousemove.\" + pluginName, onMove);\n                           $(document).on(\"mouseup.\" + pluginName, function(){\n                               $(document).off(\"mousemove.\" + pluginName);\n                               $(document).off(\"mouseup.\" + pluginName);\n                           });\n                        },\n                        \n                        onResize: function(){\n                            \n                            this.wrapper.css(\"max-height\", $(this.element).height());\n                            \n                            var wrapper_client_height = this.wrapper[0].clientHeight;\n                            \n                            this.scrollBar.css(\"height\", this.scollbarContainer[0].clientHeight * wrapper_client_height / this.wrapper[0].scrollHeight + \"px\");\n                             if(this.scollbarContainer[0].clientHeight <= this.scrollBar[0].clientHeight){\n                                 $( this.element ).addClass(this.settings.containerNoScrollClass);\n                             } else {\n                                 $( this.element ).removeClass(this.settings.containerNoScrollClass);\n                             }\n                             \n                             this.onScroll();\n                        },\n                        \n                        onScroll: function(){\n                            \n                            this.scrollBar.css(\"top\", Math.min(this.scollbarContainer[0].clientHeight - this.scrollBar[0].clientHeight, this.scollbarContainer[0].clientHeight * this.wrapper[0].scrollTop / this.wrapper[0].scrollHeight) + \"px\");\n                            \n                        }\n\t\t} );\n\n\t\t// A really lightweight plugin wrapper around the constructor,\n\t\t// preventing against multiple instantiations\n\t\t$.fn[pluginName] = function( options ) {\n\t\t\treturn this.each( function() {\n\t\t\t\tif ( !$.data( this, \"plugin_\" + pluginName ) ) {\n\t\t\t\t\t$.data( this, \"plugin_\" +\n\t\t\t\t\t\tpluginName, new Plugin( this, options ) );\n\t\t\t\t}\n\t\t\t} );\n\t\t};\n\n} )( jQuery, window, document );","$(function () {\n\n    var flyTo = function (map, point, zoom) {\n        if (zoom === undefined) {\n            zoom = map.getZoom();\n            zoom = zoom <= 13 ? 13 : zoom;\n        }\n        map.flyTo([point[0], point[1]], zoom, {duration: 1.1, easeLinearity: 0.45})\n    };\n\n    var addPopup = function (map, popup, object, type) {\n\n        $('.jewmap-popup').html('');\n\n        type === 1 ? '' : type = 0;\n        \n        var org = '';\n        var html = '';\n\n        if (type) {\n            html += '<div class=\"jewmap-popup jewmap-popup_list\"><ul class=\"jewmap-popup__list\">';\n            Array.prototype.forEach.call(object, function (objectItem, objectItemIndex) { \n\n                html +=  '<li class=\"jewmap-popup__list-item\"><a id=\"' + objectItemIndex \n                + '\" class=\"jewmap-popup__list-link\"><strong>' + objectItem.name + '</strong></a></li>';\n            })\n            html += '</ul>';\n            org = object[0]\n        } else {\n            html += '<div class=\"jewmap-popup jewmap-popup_no-list\">';\n            org = object;\n        }\n\n        html += '<div class=\"jewmap-popup__content\">';\n\n        var getContent = function (object) {\n            var html = '';\n            var yandexLink = 'https://yandex.by/maps/?ll=' + object.point[1] + ',' + object.point[0] + '&z=16&text=' + object.name.split(' ').join('%20');\n\n            html += '<p class=\"jewmap-popup__name\"><strong>' + object.name + '</strong></p>';\n            object.address !== '' ? html += '<a href=\"' + yandexLink + '\" class=\"jewmap-popup__text jewmap-popup__address\">' + object.address + '</a>' : '';\n\n            var phones = getPhonesWithLinks(object.phone.split(';'));\n\n            if (phones.length !== 0) {\n                html += '<div class=\"jewmap-popup__phone-wrapper\">';\n                Array.prototype.forEach.call(phones, function (elem, i) { \n                    html += '<a href=\"tel:' + elem.phoneLink + '\" class=\"jewmap-popup__text jewmap-popup__phone\">' + elem.phone + '</a>';\n                    i < phones.length - 1 ? html += ', ' : '';\n                }); \n                html += '</div>';\n            }\n            object.email !== '' ? html += '<a href=\"mailto:' + object.email + '\" class=\"jewmap-popup__text jewmap-popup__email\">' + object.email + '</a>' : '';\n            object.site !== '' ? html += '<a href=\"' + object.site + '\" class=\"jewmap-popup__text jewmap-popup__site\">' + object.site + '</a>' : '';\n            return html;\n        }\n        html += getContent(org);\n        html += '</div>';\n        html += '</div>';\n\n        \n        popup.setLatLng(org.point)\n            .setContent(html)\n            .openOn(map);\n\n        $('.jewmap-popup__list').niceScroll();\n        map.on('popupclose', function(ev) {\n            $('.jewmap-popup__list').getNiceScroll().remove();\n        });\n    \n        $('.jewmap-popup__list-link').on('click', function (e) {\n            var id = $(this).attr('id');\n            $('.jewmap-popup__content').html('');\n            $('.jewmap-popup__content').append(getContent(object[id]));\n        })\n    };\n\n    var getPhonesWithLinks = function (phones) {\n        var phoneArray = [];\n        Array.prototype.forEach.call(phones, function (phone) { \n            var phoneLink = phone.split(' ').join('').split('(').join('').split(')').join('').split('-').join('').split('?').join('');\n\n            phoneArray.push({\n                'phone': phone,\n                'phoneLink': phoneLink\n            });\n        });\n        return phoneArray;\n    }\n\n    window.util = {\n        flyTo: function (map, point, zoom) {\n            flyTo(map, point, zoom);\n        },\n        addPopup: function (map, popup, object, type) {\n            addPopup(map, popup, object, type);\n        },\n        getPhonesWithLinks: function (phones) {\n            getPhonesWithLinks(phones);\n        }\n    }\n});"]}