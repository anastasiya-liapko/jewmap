{"version":3,"sources":["classifier.js","geo.js","lang.js","main.js","nav.js","overlay.js","popup.js","scroll-bar.js","util.js"],"names":["$","hideClassifier","removeClass","window","width","on","click","e","preventDefault","cityToFind","this","val","toUpperCase","cityToFindLength","length","find","each","cityWrapper","closest","city","text","substring","hide","show","classifier","addClassifier","map","array","orgs","sortedArray","sort","a","b","name","forEach","elem","splice","indexOf","unshift","halfLength","Math","ceil","half","interimArray","i","undefined","push","sortArray","Array","prototype","call","fragmentMenuItem","document","createDocumentFragment","templateElement","querySelector","content","cloneNode","setAttribute","id","textContent","status","point","appendChild","append","scrollBox","attr","split","util","flyTo","parseFloat","toggleClass","hasClass","addGeo","popup","handleDistrictClick","localStorage","getItem","ajax","method","url","data","request","done","msg","obj","jQuery","parseJSON","setItem","JSON","stringify","addDistricts","parse","handleCityClick","district","addCities","addOrgs","district_id","html","parent","parent_i","childs","child","child_i","yandexLink","join","phones","phoneArray","phone","phoneLink","getPhonesWithLinks","addClass","lat","lng","address","email","site","addPopup","slice","item","orgsArray","types","type","type_i","id_type","name_type","obj_item","obj_i","rabbi","value","item_i","orgsArrayClone","coords","zoom","COORDS_CZENTRALNYJ","COORDS_SIBIRSKIJ","COORDS_URALSKIJ","COORDS_SEVERO_ZAPADNYJ","COORDS_PRIVOLZHSKIJ","COORDS_YUZHNYJ","COORDS_SEVERO_KAVKAZKIJ","COORDS_DALNEVOSTOCHNYJ","geo","BOUNDS_RUSSIA","L","LatLngBounds","mapbox","accessToken","doubleClickZoom","zoomControl","zoomDelta","zoomSnap","minZoom","setView","addLayer","styleLayer","fitBounds","padding","southWest","latLng","northEast","bounds","latLngBounds","setMaxBounds","panInsideBounds","animate","closeButton","closeOnClick","keepInView","console","log","getMarkersWithChildren","addCitiesOnMap","orgs2","arrayItem","arrayItemIndex","childsItems","itemIndex","childValue","itemChild","itemChildIndex","layer_0","featureLayer","layer_1","layer_2","layer_3","layerWithOrgs","onClickCity","target","_latlng","onClickPlace","_icon","classList","add","options","ev","remove","markerElem","marker","icon","divIcon","className","zIndexOffset","addTo","object","onClickPlaces","place","iconUrl","iconSize","iconAnchor","popupAnchor","showLabel","css","hideLabel","setLayer","removeLayer","closePopup","_zoom","hideNavList","slideUp","slideToggle","event","stopPropagation","fadeIn","fadeOut","niceScroll","pluginName","defaults","containerClass","containerNoScrollClass","contentClass","scrollbarContainerClass","scrollBarClass","Plugin","element","settings","extend","_defaults","_name","init","addScrollbar","addEvents","onResize","wrapper","contents","scollbarContainer","scrollBar","prepend","proxy","onScroll","onMousedown","onTouchstart","me","y","offsetTop","end","delta","touches","pageY","style","top","min","clientHeight","max","scrollTop","scrollHeight","off","height","wrapper_client_height","fn","getZoom","duration","easeLinearity","org","objectItem","objectItemIndex","getContent","setLatLng","setContent","openOn","getNiceScroll"],"mappings":"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","file":"main.min.js","sourcesContent":["$(function () {\n    var MOBILE_WIDTH = 600;\n\n    var hideClassifier = function () {\n        $('#js-jewmapHamburger').removeClass('active');\n        $('#js-classifier').removeClass('open');\n        if ($(window).width() <= MOBILE_WIDTH) {\n            $('.leaflet-control-container').removeClass('hide');\n            $('#js-lang').removeClass('hide');\n        }\n    }\n\n    // hide classifier on nav click\n    $(window).on('resize', function () {\n        hideClassifier();\n    });\n\n    // hide classifier on resize\n    $('#js-navListWrapper ul>li>a').on('click', function () {\n        hideClassifier();\n    });\n\n    // remove submit button default behavior\n    $('#js-classifier button[type=\"submit\"]').click(function(e) {\n        e.preventDefault();\n    });\n\n    // show classifier items equal to entered by user\n    $('#js-classifier input[type=\"text\"]').on('change keydown keyup', function() {\n        var input = $(this);\n        var cityToFind = input.val().toUpperCase();\n        var cityToFindLength = cityToFind.length;\n        \n        var block = $('#js-classifier ul')\n\n        block.find('a').each(function() {\n            var cityWrapper = $(this).closest('li');\n            var city = $(this).text().toUpperCase();\n            city = city.substring(0, cityToFindLength);\n    \n            if (city !== cityToFind) {\n                cityWrapper.hide();\n            } else {\n                cityWrapper.show();\n            }\n        })\n    });\n    \n    // var citiesArray = [];\n\n    var cities = \n    [\n        'Москва',\n        'Санкт-Петербург',\n        'Новосибирск',\n        'Екатеринбург',\n        'Казань',\n        'Челябинск',\n        'Омск',\n        'Самара',\n        'Ростов-на-Дон',\n        'Уфа',\n        'Красноярск',\n        'Воронеж',\n        'Пермь',\n        'Волгоград',\n        'Краснодар',\n        'Саратов',\n        'Тюмень',\n        'Тольятти',\n        'Ижевск',\n        'Воронеж',\n        'Пермь',\n        'Волгоград',\n        'Краснодар',\n        'Саратов',\n        'Тюмень',\n        'Тольятти',\n        'Ижевск',\n        'Москва',\n        'Санкт-Петербург',\n        'Новосибирск',\n        'Екатеринбург',\n        'Казань',\n        'Челябинск',\n        'Омск',\n        'Самара',\n        'Ростов-на-Дон',\n        'Уфа',\n        'Красноярск',\n        'Воронеж',\n        'Пермь',\n        'Волгоград',\n        'Краснодар',\n        'Саратов',\n        'Тюмень',\n        'Тольятти',\n        'Ижевск',\n        'Воронеж',\n        'Пермь',\n        'Волгоград',\n        'Краснодар',\n        'Саратов',\n        'Тюмень',\n        'Тольятти',\n        'Ижевск'\n    ]\n\n    var addClassifier = function (map, orgs) {\n\n        // sort array\n        var sortArray = function (array) {\n\n            // sort by alphabet\n            array.sort(function(a, b){\n                if(a.name < b.name) { return -1; }\n                if(a.name > b.name) { return 1; }\n                return 0;\n            });\n\n            // spb to top\n            array.forEach(function (elem) {\n                if (elem.name === 'Санкт-Петербург') {\n                    array.splice(array.indexOf(elem), 1)\n                    array.unshift(elem);\n                    return false;\n                }\n            });\n\n            // moscow to top\n            array.forEach(function (elem) {\n                if (elem.name === 'Москва') {\n                    array.splice(array.indexOf(elem), 1)\n                    array.unshift(elem);\n                    return false;\n                }\n            });\n\n            // get index of center elem\n            var halfLength = Math.ceil(array.length / 2);\n\n            // cut array on two halves (half - first half, array - second half)\n            var half = array.splice(0, halfLength);\n\n            // add one elem from each half at a time\n            var interimArray = [];\n            \n            for (var i = 0; i < halfLength; i++) {\n                half[i] !== undefined ? interimArray.push(half[i]) : '';\n                array[i] !== undefined ? interimArray.push(array[i]) : '';\n            };\n\n            return array = interimArray;\n        }\n\n        sortedArray = sortArray(orgs);\n\n        // create classifier from template and array\n        var addPopup = function (array) {\n            // var fragmentMenu = document.createDocumentFragment();\n            // var template = document.querySelector('#js-templateClassifier').content.querySelector('.classifier');\n            // var templateElement = template.cloneNode(true);\n            // fragmentMenu.appendChild(templateElement);\n            // $('#js-jewmap').append(fragmentMenu);\n\n            Array.prototype.forEach.call(array, function (elem) {\n                var fragmentMenuItem = document.createDocumentFragment();\n                var template = document.querySelector('#js-templateClassifierItem').content.querySelector('.classifier__list-item');\n                var templateElement = template.cloneNode(true);\n                templateElement.querySelector('.classifier__list-link').setAttribute('data-id', elem.id);\n                templateElement.querySelector('.classifier__list-link').textContent = elem.name;\n                // templateElement.querySelector('.classifier__list-link').setAttribute('data-address', elem.address);\n                // templateElement.querySelector('.classifier__list-link').setAttribute('data-person', elem.person);\n                // templateElement.querySelector('.classifier__list-link').setAttribute('data-phone', elem.phone);\n                templateElement.querySelector('.classifier__list-link').setAttribute('data-status', elem.status);\n                templateElement.querySelector('.classifier__list-link').setAttribute('data-point', elem.point);\n                fragmentMenuItem.appendChild(templateElement);\n                document.querySelector('.classifier__list').append(fragmentMenuItem);\n            });\n\n            $('#js-classifierScrollbar').scrollBox();\n\n            $('.classifier__list-link').on('click', function () {\n                var point = $(this).attr('data-point').split(',');\n                window.util.flyTo(map, [ parseFloat(point[0]), parseFloat(point[1]) ]);\n                hideClassifier();\n            })\n\n            // show/hide classifier on jewmap hamburger click\n            $('.jewmap__hamburger').on('click', function () {\n                $('#js-jewmapHamburger').toggleClass('active');\n                $('#js-classifier').toggleClass('open');\n                if ($(window).width() <= MOBILE_WIDTH) {\n                    $('.leaflet-control-container').toggleClass('hide');\n                    $('#js-lang').toggleClass('hide');\n                }\n                if ($('.popup').hasClass('open')) {\n                    $('.popup').removeClass('open');\n                    $('#js-navListWrapper ul>li>a').removeClass('active');\n                }\n            });\n        }\n\n        addPopup(sortedArray);\n    }\n    \n    window.classifier = {\n        addClassifier: function (map, array) {\n            addClassifier(map, array);\n        }\n    }\n});","$(function () {\n\n    // var BOUNDS_DALNEVOSTOCHNYJ = new L.LatLngBounds([65.0, 70.0], [62.0, 210.0]);\n    // var BOUNDS_PRIVOLZHSKIJ = new L.LatLngBounds([45.0, 51.0], [64.0, 54.0]);\n    // var BOUNDS_SEVERO_ZAPADNYJ = new L.LatLngBounds([50.0, 51.0], [74.0, 34.0]);\n    // var BOUNDS_SEVERO_KAVKAZKIJ = new L.LatLngBounds([45.0, 57.0], [43.0, 30.0]);\n    // var BOUNDS_SIBIRSKIJ = new L.LatLngBounds([40.0, 55.0], [78.0, 148.0]);\n    // var BOUNDS_URALSKIJ = new L.LatLngBounds([49.0, 55.0], [75.0, 87.0]);\n    // var BOUNDS_CZENTRALNYJ = new L.LatLngBounds([47.0, 41.0], [60.0, 34.0]);\n    // var BOUNDS_YUZHNYJ = new L.LatLngBounds([53.0, 44.0], [42.0, 45.0]);\n    var COORDS_DALNEVOSTOCHNYJ = [64.825365, 144.878838];\n    var COORDS_PRIVOLZHSKIJ = [56.189357,51.733371];\n    var COORDS_SEVERO_ZAPADNYJ = [70.600608, 44.406038];\n    var COORDS_SEVERO_KAVKAZKIJ = [43.765150,44.735885];\n    var COORDS_SIBIRSKIJ = [70.886952,94.748395];\n    var COORDS_URALSKIJ = [64.871851,71.569335];\n    var COORDS_CZENTRALNYJ = [54.905772,39.195997];\n    var COORDS_YUZHNYJ = [47.401426,41.055524];\n\n    var sortArray = function (array) {\n\n        // sort by alphabet\n        array.sort(function(a, b){\n            if(a.name < b.name) { return -1; }\n            if(a.name > b.name) { return 1; }\n            return 0;\n        });\n\n        // get index of center elem\n        var halfLength = Math.ceil(array.length / 2);\n\n        // cut array on two halves (half - first half, array - second half)\n        var half = array.splice(0, halfLength);\n\n        // add one elem from each half at a time\n        var interimArray = [];\n        \n        for (var i = 0; i < halfLength; i++) {\n            half[i] !== undefined ? interimArray.push(half[i]) : '';\n            array[i] !== undefined ? interimArray.push(array[i]) : '';\n        };\n\n        return array = interimArray;\n    }\n\n    var getPhonesWithLinks = function (phones) {\n        var phoneArray = [];\n        Array.prototype.forEach.call(phones, function (phone) { \n            var phoneLink = phone.split(' ').join('').split('(').join('').split(')').join('').split('-').join('').split('?').join('');\n\n            phoneArray.push({\n                'phone': phone,\n                'phoneLink': phoneLink\n            });\n        });\n        return phoneArray;\n    }\n\n\n    var addGeo = function (map, popup) {\n\n        var handleDistrictClick = function () {\n            if (localStorage.getItem('districts') === null) {\n                $.ajax({\n                    method: \"GET\",\n                    url: \"post.php\",\n                    data: {\n                        request: 2\n                    }\n                })\n                    .done(function( msg ) {\n                        var obj = jQuery.parseJSON(msg);\n                        // console.log(obj);\n                        localStorage.setItem('districts', JSON.stringify(obj));\n                        addDistricts(JSON.parse(localStorage.getItem('districts')));\n                    });\n            } else {\n                addDistricts(JSON.parse(localStorage.getItem('districts')));\n            }\n        }\n    \n        var handleCityClick = function (id, name) {\n            $.ajax({\n                method: \"GET\",\n                url: \"post.php\",\n                data: {\n                    request: 3,\n                    district: id\n                }\n            })\n                .done(function( msg ) {\n                    var obj = jQuery.parseJSON(msg);\n                    // console.log(obj);\n                    obj !== '' ? addCities(obj, name, id) : '';\n                });\n        }\n\n        var addOrgs = function (array, city, district, district_id) {\n\n            $('#js-geo .popup__main').html('');\n            var html = '';\n\n            html += '<span class=\"geo__district-title\">'\n                    //  + '<span class=\"geo__decor\">|</span>'\n                     + '<span class=\"geo__district-text\">' + district + '</span>'\n                     + '<span class=\"geo__district-item-descr\">федеральный округ</span>'\n                     + '</span>'\n                     + '<span id=\"' + district_id + '\" class=\"geo__city-title\">' + city + '</span>'\n\n            if (array.length !== 0) {\n                html += '<div class=\"geo__orgs-wrapper\">'\n                html += '<div class=\"geo__orgs\">'\n                \n                Array.prototype.forEach.call(array, function (parent, parent_i) {\n\n                    html += '<p class=\"geo__orgs-type\">'\n                        + '<span class=\"geo__decor\">|</span>'\n                        + '<span>' + parent['name_type'] + '</span>'\n                    + '</p>'\n\n                    Array.prototype.forEach.call(parent.childs, function (child, child_i) {\n                        html += '<div class=\"geo__org\">'\n                        if (child['lat'] !== '' || child['lng'] !== '') {\n                            html += '<a href=\"#\"'\n                                + ' data-lat=\"' + child['lat']\n                                + '\" data-lng=\"' + child['lng'] \n                                + '\" data-address=\"' + child['address']\n                                + '\" data-phone=\"' + child['phone']\n                                + '\" data-email=\"' + child['email']\n                                + '\" data-site=\"' + child['site']\n                                + '\" class=\"geo__org-name\">' + child['name'] + '</a>'\n                        } else {\n                            html += '<p class=\"geo__org-name\">' + child['name'] + '</p>'\n                        }\n\n                        if (child['rabbi'] !== '' && child['rabbi'] !== null) {\n                        html += '<p class=\"geo__org-rabbi\">'\n                                + '<span class=\"geo__org-icon icon-user\"></span>'\n                                + '<span class=\"geo__org-text\">' + child['rabbi'] + '</span>'\n                            + '</p>'\n                        }\n\n                        if (child['address'] !== '') {\n                            if (child['lat'] !== '' || child['lng'] !== '') {\n                                var yandexLink = 'https://yandex.by/maps/?ll=' + child['lng'] + ',' + child['lat'] + '&z=16&text=' + child['name'].split(' ').join('%20'); \n                                html += '<a href=\"' + yandexLink +'\" class=\"geo__org-address\">'\n                                        + '<span class=\"geo__org-icon icon-address\"></span>'\n                                        + '<span class=\"geo__org-text\">' + child['address'] + '</span>'\n                                    + '</a>'\n                            } else {\n                                html += '<p class=\"geo__org-address\">'\n                                        + '<span class=\"geo__org-icon icon-address\"></span>'\n                                        + '<span class=\"geo__org-text\">' + child['address'] + '</span>'\n                                    + '</p>'\n                            }\n                        }\n\n                        if (child['phone'] !== '') {\n                            \n                            var phones = child['phone'].split(';');\n                    \n                            if (phones.length !== 0) {\n                                var phoneArray = getPhonesWithLinks(phones);\n                                // console.log(phoneArray)\n\n                                html += '<div class=\"geo__org-phone\"><span class=\"geo__org-icon icon-phone\"></span><div class=\"geo__org-phone-content\">';\n\n                                Array.prototype.forEach.call(phoneArray, function (elem, i) { \n                                    html += '<a href=\"tel:' + elem.phoneLink + '\" class=\"geo__org-text\">' + elem.phone + '</a>';\n                                    // i < phoneArray.length - 1 ? html += ', ' : '';\n                                }); \n                                html += '</div></div>';\n                            }\n                        }\n                        html += '</div>';\n                    });\n                    \n                });\n                html += '</div>';\n                html += '</div>';\n    \n            } else {\n                html += '<div class=\"geo__orgs-wrapper\">'\n                html += '<div class=\"geo__orgs\"><p>Ничего не найдено.</p>'\n                html += '</div></div>'\n            }\n\n            // $('#js-geo .geo__district-title .geo__district-text').text(district);\n            // $('#js-geo .geo__city-title').text(city);\n            // $('#js-geo .geo__city-title').attr('id', district_id);\n            $('#js-geo .popup__main').append(html);\n            $('.popup').removeClass('open');\n            $('#js-geo').addClass('open');\n\n            $('#js-geo .geo__district-title').on('click', function () {\n                handleDistrictClick();\n            });\n\n            $('#js-geo .geo__city-title').on('click', function (e) {\n                var id = $(this).attr('id');\n                var name = $(this).text();\n                handleCityClick(id, name);\n            })\n\n            $('#js-geo a.geo__org-name').on('click', function (e) {\n                var lat = parseFloat($(this).attr('data-lat'));\n                var lng = parseFloat($(this).attr('data-lng'));\n                var name = $(this).text();\n                var address = $(this).attr('data-address');\n                var phone = $(this).attr('data-phone');\n                var email = $(this).attr('data-email');\n                var site = $(this).attr('data-site');\n\n                $('.popup').removeClass('open');\n                $('#js-jewmapHamburger').removeClass('move');\n                $('#js-jewmapSearch').removeClass('move');\n                $('#js-navListWrapper ul>li>a').removeClass('active');\n        \n                window.util.flyTo(map, [lat, lng], 12);\n                window.util.addPopup(map, popup, {\n                    'name': name,\n                    'lng': lng,\n                    'lat': lat,\n                    'address': address,\n                    'phone': phone,\n                    'email': email,\n                    'site': site\n                });\n            })\n        }\n\n        var addCities = function (array, district, district_id) {\n            $('#js-geoCities .popup__main').html('');\n\n            var html = '';\n\n            var cities = array.slice(0);\n            var sortedArray = sortArray(array);\n\n            if (array.length !== 0) {\n                html += '<span class=\"geo__district-title\">'\n                    //  + '<span class=\"geo__decor\">|</span>'\n                     + '<span class=\"geo__district-text\">' + district + '</span>'\n                     + '<span class=\"geo__district-item-descr\">федеральный округ</span>'\n                     + '</span>'\n                html += '<ul class=\"geo__city-list\">'\n\n                Array.prototype.forEach.call(sortedArray, function (item, i) {\n                    html += '<li class=\"geo__city-wrapper\">'\n                        + '<a id=\"' + item['term_city_id'] + '\" class=\"geo__city-item\" data-lat=\"' + item['latitude_city'] + '\" data-lng=\"' + item['longitude_city'] + '\">' + item['name_city'] + '</a>'\n                        + '</li>'\n                });\n                html += '</ul>'\n            }\n\n            // $('#js-geoCities .geo__district-title .geo__district-text').text(district);\n            $('#js-geoCities .popup__main').append(html);\n            $('.popup').removeClass('open');\n            $('#js-geoCities').addClass('open');\n\n            $('#js-geoCities .geo__district-title').on('click', function () {\n                handleDistrictClick();\n            });\n\n            $('#js-geoCities .geo__city-item').on('click', function (e) {\n                var id = $(this).attr('id');\n                var name = $(this).text();\n                var lat = parseFloat($(this).attr('data-lat'));\n                var lng = parseFloat($(this).attr('data-lng'));\n                var orgsArray = [];\n\n                $.ajax({\n                    method: \"GET\",\n                    url: \"post.php\",\n                    data: {\n                        request: 5\n                    }\n                })\n                    .done(function( msg ) {\n                        var types = jQuery.parseJSON(msg);\n                        // console.log(types);\n                    \n                        $.ajax({\n                            method: \"GET\",\n                            url: \"post.php\",\n                            data: {\n                                request: 4,\n                                city: id\n                            }\n                        })\n                            .done(function( msg ) {\n                                var obj = jQuery.parseJSON(msg);\n                                // console.log(obj);\n\n                                Array.prototype.forEach.call(types, function (type, type_i) {\n\n                                var parent = {\n                                    'id_type': type['term_type_id'],\n                                    'name_type': type['name_type'],\n                                    'childs': []\n                                };\n\n                                var child = '';\n                    \n                                Array.prototype.forEach.call(obj, function (obj_item, obj_i) {\n                                    if (obj_item['ID'] === type['ID']) {\n                                        child = {\n                                            'id': obj_item['ID'],\n                                            'name': obj_item['post_title'],\n                                            'lat': obj_item['latitude'],\n                                            'lng': obj_item['longitude'],\n                                            'address': obj_item['address'],\n                                            'phone': obj_item['phone'],\n                                            'rabbi': obj_item['rabbi'],\n                                            'email': obj_item['email'],\n                                            'site': obj_item['site']\n                                        };\n                                    }\n                                });\n                            \n                                if (orgsArray.length === 0){\n                                    orgsArray.push(parent);\n                                    child !== '' ? orgsArray[0].childs.push(child) : '';\n                                } else {\n                                    var value = false;\n                    \n                                    Array.prototype.forEach.call(orgsArray, function (item, item_i) {\n                                        \n                                        if (item['name_type'] === type['name_type']) {\n                                            value = true;\n                                            child !== '' ? item.childs.push(child) : '';\n                                        }\n                                    })\n                    \n                                    if (value === false) {\n                                        orgsArray.push(parent);\n                                        child !== '' ? orgsArray[orgsArray.length - 1].childs.push(child) : '';\n                                    }\n                                }\n                            })\n\n                            var orgsArrayClone = [];\n                            Array.prototype.forEach.call(orgsArray, function (item, item_i) {\n                                if (item.childs.length !== 0) {\n                                    orgsArrayClone.push(item)\n                                }\n                            })\n                            \n                            // obj.length !== 0 ? addOrgs(obj, name, district, district_id) : '';\n                            addOrgs(orgsArrayClone, name, district, district_id);\n                        });\n                    })\n\n                window.util.flyTo(map, [lat, lng], 9);\n            })\n        }\n\n        var addDistricts = function (array) {\n            $('#js-geoDistricts .popup__main').html('');\n\n            var html = '';\n\n            if (array.length !== 0) {\n                html += '<ul class=\"geo__district-list\">'\n\n                Array.prototype.forEach.call(array, function (item, i) {\n                    html += '<li class=\"geo__district-wrapper\">'\n                        + '<a id=\"' + item['term_district_id'] + '\" class=\"geo__district-item\">' + item['name_district'] + '</a>'\n                        + '<span class=\"geo__district-item-descr\">федеральный округ</span>'\n                        + '</li>'\n                });\n                html += '</ul>'\n            }\n\n            $('#js-geoDistricts .popup__main').append(html);\n            $('#js-jewmapHamburger').addClass('move');\n            $('#js-jewmapSearch').addClass('move');\n            $('.popup').removeClass('open');\n            $('#js-geoDistricts').addClass('open');\n\n            $('#js-geoDistricts .geo__district-item').on('click', function (e) {\n                var id = $(this).attr('id');\n                var name = $(this).text();\n                handleCityClick(id, name);\n                var coords = '';\n                var zoom = '';\n                switch(id) {\n                    case '31':\n                        coords = COORDS_CZENTRALNYJ\n                        zoom = 5\n                        break\n                    case '32':\n                        coords = COORDS_SIBIRSKIJ\n                        zoom = 4;\n                        break\n                    case '33':\n                        coords = COORDS_URALSKIJ\n                        zoom = 4.5\n                        break\n                    case '34':\n                        coords = COORDS_SEVERO_ZAPADNYJ\n                        zoom = 4\n                        break\n                    case '35':\n                        coords = COORDS_PRIVOLZHSKIJ\n                        zoom = 5\n                        break\n                    case '36':\n                        coords = COORDS_YUZHNYJ\n                        zoom = 5.5\n                        break\n                    case '37':\n                        coords = COORDS_SEVERO_KAVKAZKIJ\n                        zoom = 5.5\n                        break\n                    case '38':\n                        coords = COORDS_DALNEVOSTOCHNYJ\n                        zoom= 4\n                        break\n                  }\n                window.util.flyTo(map, coords, zoom);\n            })\n        }\n\n        $('#js-nav a[data-popup=\"geoDistricts\"]').on('click', function () {\n            handleDistrictClick();\n        });\n    };\n\n    window.geo = {\n        addGeo: function (map, popup) {\n            addGeo(map, popup);\n        }\n    }\n});","$(function () {\n    $('#js-lang a').on('click', function () {\n        $(this).removeClass('active');\n        var elem = $(this)\n        $('#js-lang a').each(function () {\n            if ($(elem).text() !== $(this).text()) {\n                $(this).addClass('active')\n            }\n        })\n    })\n});","$(function () {\n    \n    var orgs = [];\n    \n    var PIN = 'public/img/pin.png';\n    var BUILDING = 'public/img/building.png';\n    var ZOOM = 4;\n    var BOUNDS_RUSSIA = new L.LatLngBounds([60.0, 21], [69.0, 167.0]);\n    if ($(window).width() <= 600) {\n        BOUNDS_RUSSIA = new L.LatLngBounds([40.0, 25.0], [55.0, 180.0]);\n    }\n\n    L.mapbox.accessToken = 'pk.eyJ1IjoiYWxpYXBrbyIsImEiOiJjangyenVmeGMwcTFjM3lvNGhsdmUzejRoIn0.zdJYMN5sxS2SJXZV2Lb3aA';\n\n    var map = L.map('map', {\n        doubleClickZoom: false,\n        zoomControl: true,\n        zoomDelta: 0.25,\n        zoomSnap: 0,\n        // maxZoom: 10,\n        minZoom: 2,\n        // maxBounds: new L.LatLngBounds([10.0, 15.0],[25.0, 188.0]),\n        // zoomSnap: 0,\n        // maxBoundsViscosity: 1\n    })\n        .setView([63.674041, 99.742382], ZOOM)\n        .addLayer(L.mapbox.styleLayer('mapbox://styles/aliapko/ck0066wpr2azz1cpl59flq3df'));\n\n    map.fitBounds(BOUNDS_RUSSIA, { padding: [20, 20] });\n\n    var southWest = L.latLng(-89.98155760646617, -180),\n    northEast = L.latLng(89.99346179538875, 230);\n    var bounds = L.latLngBounds(southWest, northEast);\n\n    map.setMaxBounds(bounds);\n    map.on('drag', function() {\n        map.panInsideBounds(bounds, { animate: false });\n    });\n\n    // create popup\n    // var markerHeight = 20, markerRadius = 10, linearOffset = 25;\n    // var popupOffsets = {\n    //  'top': [0, 20],\n    //  'top-left': [0,0],\n    //  'top-right': [0,0],\n    //  'bottom': [0, -markerHeight],\n    //  'bottom-left': [linearOffset, (markerHeight - markerRadius + linearOffset) * -1],\n    //  'bottom-right': [-linearOffset, (markerHeight - markerRadius + linearOffset) * -1],\n    //  'left': [markerRadius, (markerHeight - markerRadius) * -1],\n    //  'right': [-markerRadius, (markerHeight - markerRadius) * -1]\n    //  };\n\n    var popup = new L.popup({\n        // offset: popupOffsets,\n        closeButton: true,\n        closeOnClick: true,\n        keepInView: true\n    });\n\n    window.geo.addGeo(map, popup)\n\n    $.ajax({\n        method: \"GET\",\n        url: \"post.php\",\n        data: {\n            request: 1\n        }\n      })\n        .done(function( msg ) {\n          var obj = jQuery.parseJSON(msg);\n          console.log(obj);\n          getMarkersWithChildren(obj);\n          console.log(orgs);\n          addCitiesOnMap(orgs);\n          var orgs2 = orgs.slice(0);\n          window.classifier.addClassifier(map, orgs2);\n        //   window.geo.addGeo(map, orgs);\n        });\n\n    // transform list of orgs into array of cities with children\n    var getMarkersWithChildren = function (array) {\n    \n        Array.prototype.forEach.call(array, function (arrayItem, arrayItemIndex) {\n\n            var parent = {\n                'id': arrayItemIndex,\n                'name': arrayItem['name_city'],\n                'point': [\n                    arrayItem['latitude_city'] === '' || arrayItem['latitude_city'] === null ? '' : parseFloat(arrayItem['latitude_city']),\n                    arrayItem['longitude_city'] === '' || arrayItem['longitude_city'] === null ? '' : parseFloat(arrayItem['longitude_city'])\n                ],\n                'status': arrayItem['status_city'],\n                'childs': []\n            };\n\n            var child = {\n                'name': arrayItem['post_title'],\n                'address': arrayItem['address'],\n                'point': [\n                    arrayItem['latitude'] === '' || arrayItem['latitude'] === null ? '' : parseFloat(arrayItem['latitude']),\n                    arrayItem['longitude'] === '' || arrayItem['longitude'] === null ? '' : parseFloat(arrayItem['longitude'])\n                ],\n                'phone': arrayItem['phone'],\n                'email': arrayItem['email'],\n                'site': arrayItem['site']\n            };\n        \n            if (orgs.length === 0){\n                orgs.push(parent);\n                // orgs[0].childs.push(child);\n\n                orgs[0].childs.push({\n                    coords: child.point,\n                    childsItems: []\n                });\n                orgs[0].childs[0].childsItems.push(child);\n            } else {\n                var value = false;\n\n                Array.prototype.forEach.call(orgs, function (item, itemIndex) {\n                    \n                    if (item['name'] === arrayItem['name_city']) {\n                        value = true;\n                        // item.childs.push(child);\n\n                        var childValue = false;\n                        Array.prototype.forEach.call(item.childs, function (itemChild, itemChildIndex) {\n\n                            if (itemChild['coords'][0] === child['point'][0]\n                            && itemChild['coords'][1] === child['point'][1]) {\n                                childValue = true;\n                                itemChild.childsItems.push(child);\n                            }\n                        });\n\n                        if (childValue === false) {\n                            item.childs.push({\n                                coords: child.point,\n                                childsItems: []\n                            });\n                            item.childs[item.childs.length - 1].childsItems.push(child);\n                        }\n                        \n                    }\n                })\n\n                if (value === false) {\n                    orgs.push(parent);\n                    // orgs[orgs.length - 1].childs.push(child);\n\n                    orgs[orgs.length - 1].childs.push({\n                        coords: child.point,\n                        childsItems: []\n                    });\n                    orgs[orgs.length - 1].childs[0].childsItems.push(child);\n                }\n            }\n        });\n    };\n\n    var addCitiesOnMap = function (array) {\n\n        // create layers with cities\n        var layer_0 = L.mapbox.featureLayer();\n        var layer_1 = L.mapbox.featureLayer();\n        var layer_2 = L.mapbox.featureLayer();\n        var layer_3 = L.mapbox.featureLayer();\n        var layerWithOrgs = L.mapbox.featureLayer();\n\n        // handle click event\n        function onClickCity(e) {\n            var point = e.target._latlng;\n            window.util.flyTo(map, [point.lat, point.lng]);\n        }\n\n        function onClickPlace(e) {\n            e.target._icon.classList.add('icon-hidden')\n            var point = e.target._latlng;\n            var name = e.target.options.name;\n            var address = e.target.options.address;\n            var phone = e.target.options.phone;\n            var email = e.target.options.email;\n            var site = e.target.options.site;\n            window.util.flyTo(map, [point.lat, point.lng]);\n            window.util.addPopup(map, popup, {\n                'name': name,\n                'point': [parseFloat(point.lat),parseFloat(point.lng)],\n                'address': address,\n                'phone': phone,\n                'email': email,\n                'site': site\n            });\n            map.on('popupclose', function(ev) {\n                e.target._icon !== null ? e.target._icon.classList.remove('icon-hidden') : '';\n            });\n        }\n\n        function onClickPlaces(object) {\n            window.util.flyTo(map, object[0].point);\n            window.util.addPopup(map, popup, object, 1);\n        }\n\n        // add markers on layers\n        Array.prototype.forEach.call(array, function (markerElem) { \n\n            if (markerElem.point[0] !== '' || markerElem.point[1] !== '') {\n\n                if (markerElem['status'] === '1') {\n\n                    if (markerElem['name'] === 'Москва') {\n                        var html = '<div class=\"jewmap__pin\"><div class=\"jewmap__pin-icon\"></div><span class=\"jewmap__pin-label\">' + markerElem.name + '</span></div>';\n                        var marker = L.marker(markerElem.point, {\n                            icon: L.divIcon({\n                                html: html,\n                                className: 'capital'\n                            }),\n                            zIndexOffset: 40\n                        }).addTo(layer_0);\n                        marker.on('click', onClickCity);\n\n                    } else {\n                        var html = '<div class=\"jewmap__pin\"><div class=\"jewmap__pin-icon\"></div><span class=\"jewmap__pin-label\">' + markerElem.name + '</span></div>';\n                        var marker = L.marker(markerElem.point, {\n                            icon: L.divIcon({\n                                html: html,\n                                className: 'district'\n                            }),\n                            zIndexOffset: 30\n                        }).addTo(layer_1);\n                        marker.on('click', onClickCity);\n                    }\n                    \n                } else if (markerElem['status'] === '2') {\n                    var html = '<div class=\"jewmap__pin\"><div class=\"jewmap__pin-icon\"></div><span class=\"jewmap__pin-label\">' + markerElem.name + '</span></div>';\n                    var marker = L.marker(markerElem.point, {\n                        icon: L.divIcon({\n                            html: html,\n                            className: 'region'\n                        }),\n                        zIndexOffset: 20\n                    }).addTo(layer_2);\n                    marker.on('click', onClickCity);\n\n                } else if (markerElem['status'] === '3' || markerElem['status'] === null) {\n                    var html = '<div class=\"jewmap__pin\"><div class=\"jewmap__pin-icon\"></div><span class=\"jewmap__pin-label\">' + markerElem.name + '</span></div>';\n                    var marker = L.marker(markerElem.point, {\n                        icon: L.divIcon({\n                            html: html,\n                            className: 'city'\n                        }),\n                        zIndexOffset: 10\n                    }).addTo(layer_3);\n                    marker.on('click', onClickCity);\n                } else {\n                    var html = '<div class=\"jewmap__pin\"><div class=\"jewmap__pin-icon\"></div><span class=\"jewmap__pin-label\">' + markerElem.name + '</span></div>';\n                    var marker = L.marker(markerElem.point, {\n                        icon: L.divIcon({\n                            html: html,\n                            className: 'city'\n                        }),\n                        zIndexOffset: 10\n                    }).addTo(layer_3);\n                    marker.on('click', onClickCity);\n                }\n            }\n\n            Array.prototype.forEach.call(markerElem.childs, function (childs) { \n\n                if (childs.childsItems.length > 1) {\n                    \n                        var marker = L.marker(childs.coords, {\n                            icon: L.divIcon({\n                                html: '<div class=\"jewmap__pin_orgs\"><div class=\"jewmap__pin-icon\"></div><div class=\"jewmap__pin-quantity\"><strong>' + childs.childsItems.length + '<strong></div></div>',\n                                className: 'orgs'\n                            }),\n                            // icon: L.icon({\n                            //     iconUrl: PIN,\n                            //     iconSize: [33, 48],\n                            //     iconAnchor: [16, 48],\n                            //     popupAnchor: [38, 0]\n                            // }),\n                            zIndexOffset: 50\n                        }).addTo(layerWithOrgs);\n\n                        marker.on('click', function () {\n                            onClickPlaces(childs.childsItems)\n                        });\n                } else {\n                    var place = childs.childsItems[0];\n                    if (place.point[0] !== '' || place.point[1] !== '') {\n                    \n                        var marker = L.marker(place.point, {\n                            // icon: L.divIcon({\n                            //     html: '<div class=\"jewmap__pin\"><div class=\"jewmap__pin-icon\"></div></div>',\n                            //     className: 'org'\n                            // }),\n                            icon: L.icon({\n                                iconUrl: BUILDING,\n                                iconSize: [25, 25],\n                                iconAnchor: [12, 25],\n                                popupAnchor: [25, 25]\n                            }),\n                            id: place.id,\n                            name: place.name,\n                            address: place.address,\n                            phone: place.phone,\n                            email: place.email,\n                            site: place.site\n                        }).addTo(layerWithOrgs);\n\n                        marker.on('click', onClickPlace);\n                    }\n                }\n            });\n        })\n\n        // show layers\n        map.addLayer(layer_1)\n        map.addLayer(layer_0)\n        // map.addLayer(layerWithOrgs)\n\n        // function to show label of marker\n        var showLabel = function (elem) {\n            $(elem + ' .jewmap__pin-label').css('opacity', '1');\n            $(elem + ' .jewmap__pin-label').css('pointer-events', 'auto');\n        }\n\n        // function to hide label of marker\n        var hideLabel = function (elem) {\n            $(elem + ' .jewmap__pin-label').css('opacity', '0');\n            $(elem + ' .jewmap__pin-label').css('pointer-events', 'none');\n        }\n\n        // show/hide layer on zoom value\n        var setLayer = function (zoom) {\n            if ($(window).width() < 575) {\n                if ( zoom > 2 && zoom < 3) {\n                    map.addLayer(layer_2)\n                    hideLabel('.region');\n                    map.removeLayer(layer_3);\n                } else if (zoom > 3 && zoom < 4) {\n                    map.addLayer(layer_2)\n                    showLabel('.region');\n                    map.removeLayer(layer_3);\n                } else if ( zoom > 4 && zoom < 5) {\n                    map.addLayer(layer_2)\n                    showLabel('.region');\n                    map.addLayer(layer_3);\n                    hideLabel('.city');\n                } else if ( zoom > 5 && zoom < 10) {\n                    map.removeLayer(layerWithOrgs);\n                    map.addLayer(layer_0);\n                    map.addLayer(layer_1);\n                    map.addLayer(layer_2)\n                    showLabel('.region');\n                    map.addLayer(layer_3);\n                    showLabel('.city');\n                    map.closePopup();\n                } else if ( zoom < 2) {\n                    map.addLayer(layer_0);\n                    map.addLayer(layer_1);\n                    map.removeLayer(layer_2);\n                    map.removeLayer(layer_3);\n                } else if ( zoom >= 10) {\n                    map.addLayer(layerWithOrgs);\n                    map.removeLayer(layer_0);\n                    map.removeLayer(layer_1);\n                    map.removeLayer(layer_2);\n                    map.removeLayer(layer_3);\n                }\n            } else {\n                if ( zoom > 4 && zoom < 5) {\n                    map.addLayer(layer_2)\n                    hideLabel('.region');\n                    map.removeLayer(layer_3);\n                } else if (zoom > 5 && zoom < 6) {\n                    map.addLayer(layer_2)\n                    showLabel('.region');\n                    map.removeLayer(layer_3);\n                } else if ( zoom > 6 && zoom < 7) {\n                    map.addLayer(layer_2)\n                    showLabel('.region');\n                    map.addLayer(layer_3);\n                    hideLabel('.city');\n                } else if ( zoom > 7 && zoom < 10) {\n                    map.removeLayer(layerWithOrgs);\n                    map.addLayer(layer_0);\n                    map.addLayer(layer_1);\n                    map.addLayer(layer_2)\n                    showLabel('.region');\n                    map.addLayer(layer_3);\n                    showLabel('.city');\n                    map.closePopup();\n                } else if ( zoom < 4) {\n                    map.addLayer(layer_0);\n                    map.addLayer(layer_1);\n                    map.removeLayer(layer_2);\n                    map.removeLayer(layer_3);\n                } else if ( zoom >= 10) {\n                    map.addLayer(layerWithOrgs);\n                    map.removeLayer(layer_0);\n                    map.removeLayer(layer_1);\n                    map.removeLayer(layer_2);\n                    map.removeLayer(layer_3);\n                }\n            }\n        }\n\n        setLayer(ZOOM)\n        \n        // handle zoomend event\n        map.on('moveend, zoomend, zoomlevelschange', function(e) {\n            var zoom = e.target._zoom;\n            setLayer(zoom)\n        });\n    }\n});\n    ","$(function () {\n    var MOBILE_WIDTH = 600;\n\n    // function for hiding nav list and toggle hamburger class\n    var hideNavList = function () {\n        $('#js-navHamburger').removeClass('active');\n        $('#js-navListWrapper').slideUp();\n    }\n\n    // show active nav item\n    $('#js-navListWrapper ul>li>a').on('click', function () {\n        $('#js-navListWrapper ul>li>a').removeClass('active');\n        $(this).addClass('active');\n        if ($(window).width() <= MOBILE_WIDTH) {\n            hideNavList();\n        }\n    });\n\n    // show/hide nav on hamburger click\n    $('#js-navHamburger').on('click', function () {\n        $('#js-navHamburger').toggleClass('active');\n        $('#js-navListWrapper').slideToggle();\n    });\n\n    // hide nav on outside click\n    $(document).click(function(e) {\n        if ($(window).width() <= MOBILE_WIDTH) {\n            if ($(e.target).closest('#js-navListWrapper').length) return;\n            if ($(e.target).closest('#js-navHamburger').length) return;\n            hideNavList();\n            event.stopPropagation();\n        }\n    });\n\n    // show/hide nav on resize\n    $(window).on('resize', function () {\n        if ($(window).width() > MOBILE_WIDTH) {\n            $('#js-navListWrapper').show();\n            $('#js-navHamburger').removeClass('active');\n        } else {\n            hideNavList();\n        }\n    })\n\n});","$(window).on('load', function () {\n\n    var MOBILE_WIDTH = 600;\n\n    // show info popup\n    $('#js-overlay').fadeIn();\n\n    // hide controls and lang\n    if ($(window).width() <= MOBILE_WIDTH) {\n        $('.leaflet-control-container').addClass('hide');\n        $('#js-infoButton').addClass('hide');\n    }\n\n    // hide info popup on close click\n    $('#js-overlay .overlay__close').on('click', function () {\n        $('#js-overlay').fadeOut();\n        if ($(window).width() <= MOBILE_WIDTH) {\n            $('.leaflet-control-container').removeClass('hide');\n            $('#js-infoButton').removeClass('hide');\n        }\n    })\n\n    // hide info popup on outside click\n    $(document).click(function(e) {\n        if ($(e.target).closest('#js-overlay').length) return;\n        $('#js-overlay').fadeOut();\n        event.stopPropagation();\n        if ($(window).width() <= MOBILE_WIDTH) {\n            $('.leaflet-control-container').removeClass('hide');\n            $('#js-infoButton').removeClass('hide');\n        }\n    });\n});\n","$(function () {\n\n    // init scrollbar\n    $(\".popup__main\").niceScroll();\n\n    // show popup on nav click\n    $('#js-navListWrapper ul>li>a').on('click', function () {\n        var popup = $(this).attr('data-popup');\n        if ($('#js-' + popup).hasClass('open')) return;\n        // $('#js-jewmapHamburger').removeClass('move');\n        $('#js-jewmapHamburger').addClass('move');\n        $('#js-jewmapSearch').addClass('move');\n        $('.popup').removeClass('open');\n        $('#js-' + popup).addClass('open');\n    });\n\n    // hide popup on close click\n    $('.popup__close').on('click', function () {\n        $('.popup').removeClass('open');\n        $('#js-jewmapHamburger').removeClass('move');\n        $('#js-jewmapSearch').removeClass('move');\n        $('#js-navListWrapper ul>li>a').removeClass('active');\n    });\n\n    // hide popup on outside click\n    // $(document).click(function(e) {\n    //     if ($(e.target).closest('#js-nav').length) return;\n    //     if ($(e.target).closest('.popup').length) return;\n    //     $('.popup').removeClass('open');\n    //     $('#js-jewmapHamburger').removeClass('move');\n    //     $('#js-jewmapSearch').removeClass('move');\n    //     $('#js-navListWrapper ul>li>a').removeClass('active');\n    //     event.stopPropagation();\n    // });\n\n});","/**\n * jQiery scrollBar Plugin\n * @author Falk Müller (www-falk-m.de)\n * Thankts to https://codepen.io/IliaSky/pen/obowmv\n */\n;( function( $, window, document ) {\n\n\t\"use strict\";\n\n\t\tvar pluginName = \"scrollBox\",\n\t\t\tdefaults = {\n\t\t\t\tcontainerClass: \"sb-container\",\n                                containerNoScrollClass: \"sb-container-noscroll\",\n                                contentClass: \"sb-content\",\n                                scrollbarContainerClass: \"sb-scrollbar-container\",\n                                scrollBarClass: \"sb-scrollbar\"\n                                \n\t\t\t};\n\n\t\t// plugin constructor\n\t\tfunction Plugin ( element, options ) {\n\t\t\tthis.element = element;\n\n\t\t\tthis.settings = $.extend( {}, defaults, options );\n\t\t\tthis._defaults = defaults;\n\t\t\tthis._name = pluginName;\n\t\t\tthis.init();\n                        \n\t\t}\n\n\t\t// Avoid Plugin.prototype conflicts\n\t\t$.extend( Plugin.prototype, {\n\t\t\tinit: function() {\n\n\t\t\t\tthis.addScrollbar();\n                                this.addEvents();\n                                this.onResize();\n\t\t\t},\n\t\t\taddScrollbar: function() {\n                                $( this.element ).addClass(this.settings.containerClass);\n                                this.wrapper = $(\"<div class='\" + this.settings.contentClass + \"' />\");\n                                this.wrapper.append($( this.element ).contents());\n                                $( this.element ).append( this.wrapper );\n                                \n                                this.scollbarContainer = $(\"<div class='\" + this.settings.scrollbarContainerClass + \"' />\");\n                                this.scrollBar = $(\"<div class='\" + this.settings.scrollBarClass + \"' />\");\n                                this.scollbarContainer.append(this.scrollBar);\n                                $( this.element ).prepend(this.scollbarContainer);\n\t\t\t},\n                        addEvents: function(){\n                            \n                            this.wrapper.on(\"scroll.\" + pluginName, $.proxy(this.onScroll, this) )\n                            $(window).on(\"resize.\" + pluginName, $.proxy(this.onResize, this) )\n                            \n                            this.scrollBar.on('mousedown.' + pluginName, $.proxy(this.onMousedown, this));\n                            this.scrollBar.on('touchstart.' + pluginName, $.proxy(this.onTouchstart, this));\n                        },\n                        \n                        onTouchstart: function(ev){\n                            var me = this;\n                            \n                            ev.preventDefault();\n                            var y = me.scrollBar[0].offsetTop;\n\n                            var onMove = function(end){\n                                   var delta = end.touches[0].pageY - ev.touches[0].pageY;\n                                   me.scrollBar[0].style.top = Math.min(me.scollbarContainer[0].clientHeight - me.scrollBar[0].clientHeight, Math.max(0, y + delta)) + 'px';\n                                   me.wrapper[0].scrollTop = (me.wrapper[0].scrollHeight * me.scrollBar[0].offsetTop / me.scollbarContainer[0].clientHeight);\n                            };\n\n                           $(document).on(\"touchmove.\" + pluginName, onMove);\n                           $(document).on(\"touchend.\" + pluginName, function(){\n                               $(document).off(\"touchmove.\" + pluginName);\n                               $(document).off(\"touchend.\" + pluginName);\n                           });\n                        },\n                        \n                        onMousedown: function(ev){\n                            var me = this;\n                            \n                            ev.preventDefault();\n                            var y = me.scrollBar[0].offsetTop;\n\n                            var onMove = function(end){\n                                   var delta = end.pageY - ev.pageY;\n                                   me.scrollBar[0].style.top = Math.min(me.scollbarContainer[0].clientHeight - me.scrollBar[0].clientHeight, Math.max(0, y + delta)) + 'px';\n                                   me.wrapper[0].scrollTop = (me.wrapper[0].scrollHeight * me.scrollBar[0].offsetTop / me.scollbarContainer[0].clientHeight);\n                            };\n\n                           $(document).on(\"mousemove.\" + pluginName, onMove);\n                           $(document).on(\"mouseup.\" + pluginName, function(){\n                               $(document).off(\"mousemove.\" + pluginName);\n                               $(document).off(\"mouseup.\" + pluginName);\n                           });\n                        },\n                        \n                        onResize: function(){\n                            \n                            this.wrapper.css(\"max-height\", $(this.element).height());\n                            \n                            var wrapper_client_height = this.wrapper[0].clientHeight;\n                            \n                            this.scrollBar.css(\"height\", this.scollbarContainer[0].clientHeight * wrapper_client_height / this.wrapper[0].scrollHeight + \"px\");\n                             if(this.scollbarContainer[0].clientHeight <= this.scrollBar[0].clientHeight){\n                                 $( this.element ).addClass(this.settings.containerNoScrollClass);\n                             } else {\n                                 $( this.element ).removeClass(this.settings.containerNoScrollClass);\n                             }\n                             \n                             this.onScroll();\n                        },\n                        \n                        onScroll: function(){\n                            \n                            this.scrollBar.css(\"top\", Math.min(this.scollbarContainer[0].clientHeight - this.scrollBar[0].clientHeight, this.scollbarContainer[0].clientHeight * this.wrapper[0].scrollTop / this.wrapper[0].scrollHeight) + \"px\");\n                            \n                        }\n\t\t} );\n\n\t\t// A really lightweight plugin wrapper around the constructor,\n\t\t// preventing against multiple instantiations\n\t\t$.fn[pluginName] = function( options ) {\n\t\t\treturn this.each( function() {\n\t\t\t\tif ( !$.data( this, \"plugin_\" + pluginName ) ) {\n\t\t\t\t\t$.data( this, \"plugin_\" +\n\t\t\t\t\t\tpluginName, new Plugin( this, options ) );\n\t\t\t\t}\n\t\t\t} );\n\t\t};\n\n} )( jQuery, window, document );","$(function () {\n\n    var flyTo = function (map, point, zoom) {\n        if (zoom === undefined) {\n            zoom = map.getZoom();\n            zoom = zoom <= 10 ? 10 : zoom;\n        }\n        map.flyTo([point[0], point[1]], zoom, {duration: 1.1, easeLinearity: 0.45})\n    };\n\n    var addPopup = function (map, popup, object, type) {\n        console.log(object)\n\n        $('.jewmap-popup').html('');\n\n        type === 1 ? '' : type = 0;\n        \n        var org = '';\n        var html = '';\n\n        if (type) {\n            html += '<div class=\"jewmap-popup jewmap-popup_list\"><ul class=\"jewmap-popup__list\">';\n            Array.prototype.forEach.call(object, function (objectItem, objectItemIndex) { \n\n                html +=  '<li class=\"jewmap-popup__list-item\"><a id=\"' + objectItemIndex \n                + '\" class=\"jewmap-popup__list-link\"><strong>' + objectItem.name + '</strong></a></li>';\n            })\n            html += '</ul>';\n            org = object[0]\n        } else {\n            html += '<div class=\"jewmap-popup jewmap-popup_no-list\">';\n            org = object;\n        }\n\n        html += '<div class=\"jewmap-popup__content\">';\n\n        var getContent = function (object) {\n            var html = '';\n            var yandexLink = 'https://yandex.by/maps/?ll=' + object.point[1] + ',' + object.point[0] + '&z=16&text=' + object.name.split(' ').join('%20');\n\n            html += '<p class=\"jewmap-popup__name\"><strong>' + object.name + '</strong></p>';\n            object.address !== '' ? html += '<a href=\"' + yandexLink + '\" class=\"jewmap-popup__text jewmap-popup__address\">' + object.address + '</a>' : '';\n\n            var phones = getPhonesWithLinks(object.phone.split(';'));\n\n            if (phones.length !== 0) {\n                html += '<div class=\"jewmap-popup__phone-wrapper\">';\n                Array.prototype.forEach.call(phones, function (elem, i) { \n                    html += '<a href=\"tel:' + elem.phoneLink + '\" class=\"jewmap-popup__text jewmap-popup__phone\">' + elem.phone + '</a>';\n                    i < phones.length - 1 ? html += ', ' : '';\n                }); \n                html += '</div>';\n            }\n            object.email !== '' ? html += '<a href=\"mailto:' + object.email + '\" class=\"jewmap-popup__text jewmap-popup__email\">' + object.email + '</a>' : '';\n            object.site !== '' ? html += '<a href=\"' + object.site + '\" class=\"jewmap-popup__text jewmap-popup__site\">' + object.site + '</a>' : '';\n            return html;\n        }\n        html += getContent(org);\n        html += '</div>';\n        html += '</div>';\n\n        \n        popup.setLatLng(org.point)\n            .setContent(html)\n            .openOn(map);\n\n        $('.jewmap-popup__list').niceScroll();\n        map.on('popupclose', function(ev) {\n            console.log($('.jewmap-popup__list').getNiceScroll().remove());\n        });\n    \n        $('.jewmap-popup__list-link').on('click', function (e) {\n            var id = $(this).attr('id');\n            $('.jewmap-popup__content').html('');\n            $('.jewmap-popup__content').append(getContent(object[id]));\n        })\n    };\n\n    var getPhonesWithLinks = function (phones) {\n        var phoneArray = [];\n        Array.prototype.forEach.call(phones, function (phone) { \n            var phoneLink = phone.split(' ').join('').split('(').join('').split(')').join('').split('-').join('').split('?').join('');\n\n            phoneArray.push({\n                'phone': phone,\n                'phoneLink': phoneLink\n            });\n        });\n        return phoneArray;\n    }\n\n    window.util = {\n        flyTo: function (map, point, zoom) {\n            flyTo(map, point, zoom);\n        },\n        addPopup: function (map, popup, object, type) {\n            addPopup(map, popup, object, type);\n        },\n        getPhonesWithLinks: function (phones) {\n            getPhonesWithLinks(phones);\n        }\n    }\n});"]}