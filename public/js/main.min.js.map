{"version":3,"sources":["main.js","nav.js"],"names":["$","BOUNDS_RUSSIA","L","LatLngBounds","window","width","mapbox","accessToken","map","doubleClickZoom","zoomControl","zoomDelta","zoomSnap","maxZoom","minZoom","setView","addLayer","styleLayer","fitBounds","padding","on","removeClass","this","addClass","toggleClass","slideToggle","document","click","e","target","closest","length","slideUp","event","stopPropagation","show"],"mappings":"AAAAA,EAAA,WAYA,IACAC,EAAA,IAAAC,EAAAC,aAAA,CAAA,GAAA,IAAA,CAAA,GAAA,MACAH,EAAAI,QAAAC,QAAA,MACAJ,EAAA,IAAAC,EAAAC,aAAA,CAAA,GAAA,IAAA,CAAA,GAAA,OAIAD,EAAAI,OAAAC,YAAA,4FAGAL,EAAAM,IAAA,MAAA,CACAC,iBAAA,EACAC,aAAA,EACAC,UAAA,IACAC,SAAA,EACAC,QAAA,GACAC,QAAA,IAKAC,QAAA,CAAA,UAAA,WArBA,GAsBAC,SAAAd,EAAAI,OAAAW,WAAA,sDAEAC,UAAAjB,EAAA,CAAAkB,QAAA,CAAA,GAAA,QCpCAnB,EAAA,WAIAA,EAAA,8BAAAoB,GAAA,QAAA,WACApB,EAAA,8BAAAqB,YAAA,UACArB,EAAAsB,MAAAC,SAAA,YAIAvB,EAAA,oBAAAoB,GAAA,QAAA,WACApB,EAAA,oBAAAwB,YAAA,UACAxB,EAAA,sBAAAyB,gBAKAzB,EAAA0B,UAAAC,MAAA,SAAAC,GACA,GAAA5B,EAAAI,QAAAC,SAjBA,IAiBA,CACA,GAAAL,EAAA4B,EAAAC,QAAAC,QAAA,sBAAAC,OAAA,OACA,GAAA/B,EAAA4B,EAAAC,QAAAC,QAAA,oBAAAC,OAAA,OACA/B,EAAA,sBAAAgC,UACAhC,EAAA,oBAAAqB,YAAA,UACAY,MAAAC,qBAKAlC,EAAAI,QAAAgB,GAAA,SAAA,WA3BA,IA4BApB,EAAAI,QAAAC,QACAL,EAAA,sBAAAmC,OAGAnC,EAAA,sBAAAgC,UAFAhC,EAAA,oBAAAqB,YAAA","file":"main.min.js","sourcesContent":["$(function () {\n\n    // var cities = {\n    //     0: {\n    //         id: \"1\",\n    //         name: \"Москва\",\n    //         point: (2) [55.755826, 37.6172999],\n    //         show: true,\n    //         slug: \"moskva\"\n    //     }\n    // }\n\n    var ZOOM = 4;\n    var BOUNDS_RUSSIA = new L.LatLngBounds([30.0, 15.0], [78.0, 188.0]);\n    if ($(window).width() < 575) {\n        BOUNDS_RUSSIA = new L.LatLngBounds([40.0, 25.0], [35.0, 180.0]);\n    }\n\n\n    L.mapbox.accessToken = 'pk.eyJ1IjoiYWxpYXBrbyIsImEiOiJjangyenVmeGMwcTFjM3lvNGhsdmUzejRoIn0.zdJYMN5sxS2SJXZV2Lb3aA';\n\n    \n    var map = L.map('map', {\n        doubleClickZoom: false,\n        zoomControl: true,\n        zoomDelta: 0.25,\n        zoomSnap: 0,\n        maxZoom: 10,\n        minZoom: 2,\n        // maxBounds: new L.LatLngBounds([10.0, 15.0],[25.0, 188.0]),\n        // zoomSnap: 0,\n        // maxBoundsViscosity: 1\n    })\n        .setView([63.674041, 99.742382], ZOOM)\n        .addLayer(L.mapbox.styleLayer('mapbox://styles/aliapko/cjzle879c057t1cn6tnldfw7p'));\n\n        map.fitBounds(BOUNDS_RUSSIA, { padding: [20, 20] });\n        \n\n    // sort cities list in menu\n    // cities.sort(function(a, b){\n    //     if(a.name < b.name) { return -1; }\n    //     if(a.name > b.name) { return 1; }\n    //     return 0;\n    // })\n\n    // cities.forEach(function (elem) {\n    //     if (elem.name === 'Санкт-Петербург') {\n    //         cities.splice(cities.indexOf(elem), 1)\n    //         cities.unshift(elem);\n    //         return false;\n    //     }\n    // })\n\n    // cities.forEach(function (elem) {\n    //     if (elem.name === 'Москва') {\n    //         cities.splice(cities.indexOf(elem), 1)\n    //         cities.unshift(elem);\n    //         return false;\n    //     }\n    // })\n\n\n    // // add menu on map\n    // window.map_menu.addMenu(map, cities);\n\n\n    // // cities without clusters\n    // var layerWithCities = L.mapbox.featureLayer();\n    // var layerWithSmallCities = L.mapbox.featureLayer();\n\n    // function onClickCity(e) {\n    //     var point = e.target._latlng\n    //     var slug = e.target.options.slug\n    //     window.map_util.flyTo(map, [point.lat, point.lng])\n    //     // window.map_util.flyTo(map, point)\n    //     $(e.target).on('click', function () {\n    //         window.location.href = \"https://\" + DOMEN + \"/administrative-units/\" + slug;\n    //     })\n    // }\n\n    // // added markers to clasters layers\n    // Array.prototype.forEach.call(cities, function (markerElem) { \n\n    //     if (markerElem['show'] === true) {\n    //         var html = '<div class=\"map-page__cluster-cities d-flex flex-column\"><div class=\"map-page__cluster-cities-icon\"></div><span class=\"map-page__cluster-cities-label\">' + markerElem.name + '</span></div>';\n    //         var marker = L.marker(markerElem.point, {\n    //             icon: L.divIcon({\n    //                 html: html,\n    //                 className: 'myclustercity'\n    //             }),\n    //             slug: markerElem.slug,\n    //         }).addTo(layerWithCities);\n    //         marker.on('click', onClickCity);\n    //     } else {\n    //         var html = '<div class=\"map-page__cluster-cities d-flex flex-column\"><div class=\"map-page__cluster-cities-icon\"></div><span class=\"map-page__cluster-cities-label\">' + markerElem.name + '</span></div>';\n    //         var marker = L.marker(markerElem.point, {\n    //             icon: L.divIcon({\n    //                 html: html,\n    //                 className: 'myclustercity'\n    //             }),\n    //             slug: markerElem.slug,\n    //         }).addTo(layerWithSmallCities);\n    //         marker.on('click', onClickCity);\n    //     }\n    // })\n\n\n\n    // // show layers\n    // map.addLayer(layerWithCities)\n\n    // var setLayer = function (zoom) {\n    //     if (zoom > 5) {\n    //         map.addLayer(layerWithSmallCities)\n    //     } else {\n    //         map.removeLayer(layerWithSmallCities)\n    //     }\n    // }\n    // setLayer(ZOOM)\n    \n    // map.on('zoomend', function(e) {\n    //     var zoom = e.target._zoom;\n    //     setLayer(zoom)\n    // });\n    \n});\n    ","$(function () {\n    var MOBILE_WIDTH = 575;\n\n    // show active nav item\n    $('#js-navListWrapper>ul>li>a').on('click', function () {\n        $('#js-navListWrapper>ul>li>a').removeClass('active');\n        $(this).addClass('active');\n    });\n\n    // show/hide nav on hamburger click\n    $('#js-navHamburger').on('click', function () {\n        $('#js-navHamburger').toggleClass('active');\n        $('#js-navListWrapper').slideToggle();\n        \n    });\n\n    // hide nav on click outside nav\n    $(document).click(function(e) {\n        if ($(window).width() <= MOBILE_WIDTH) {\n            if ($(e.target).closest('#js-navListWrapper').length) return;\n            if ($(e.target).closest('#js-navHamburger').length) return;\n            $('#js-navListWrapper').slideUp();\n            $('#js-navHamburger').removeClass('active');\n            event.stopPropagation();\n        }\n    });\n\n    // show/hide nav on resize\n    $(window).on('resize', function () {\n        if ($(window).width() > MOBILE_WIDTH) {\n            $('#js-navListWrapper').show();\n            $('#js-navHamburger').removeClass('active');\n        } else {\n            $('#js-navListWrapper').slideUp();\n            $('#js-navHamburger').removeClass('active');\n        }\n    })\n\n});"]}