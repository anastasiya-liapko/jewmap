{"version":3,"sources":["about.js","classifier.js","geo.js","lang.js","main.js","nav.js","overlay.js","popup.js","scroll-bar.js","util.js"],"names":["$","on","e","preventDefault","popup","this","attr","hasClass","removeClass","addClass","hideClassifier","window","width","click","cityToFind","val","toUpperCase","cityToFindLength","length","find","each","cityWrapper","closest","city","text","substring","hide","show","classifier","addClassifier","map","array","orgs","sortedArray","sort","a","b","name","forEach","elem","splice","indexOf","unshift","halfLength","Math","ceil","half","interimArray","i","undefined","push","sortArray","Array","prototype","call","fragmentMenuItem","document","createDocumentFragment","templateElement","querySelector","content","cloneNode","setAttribute","id","textContent","status","point","appendChild","append","scrollBox","split","util","flyTo","parseFloat","toggleClass","addGeo","handleDistrictClick","localStorage","getItem","ajax","method","url","data","request","done","msg","obj","jQuery","parseJSON","setItem","JSON","stringify","addDistricts","parse","handleCityClick","district","citiesArray","objItem","objItem_i","term_city_id","name_city","latitude_city","longitude_city","value","item","item_i","addCities","addOrgs","district_id","html","parent","parent_i","childs","child","child_i","yandexLink","join","phones","phoneArray","phone","phoneLink","getPhonesWithLinks","lat","lng","address","email","site","addPopup","cities","slice","orgsArray","religOrg","relig","console","log","empty","key","types","type","type_i","id_type","name_type","citiesItem","citiesItem_i","obj_item","obj_i","rabbi","orgsArrayClone","order","coords","zoom","COORDS_CZENTRALNYJ","COORDS_SIBIRSKIJ","COORDS_URALSKIJ","COORDS_SEVERO_ZAPADNYJ","COORDS_PRIVOLZHSKIJ","COORDS_YUZHNYJ","COORDS_SEVERO_KAVKAZKIJ","COORDS_DALNEVOSTOCHNYJ","geo","BOUNDS_RUSSIA","L","LatLngBounds","mapbox","accessToken","doubleClickZoom","zoomControl","zoomDelta","zoomSnap","minZoom","setView","addLayer","styleLayer","fitBounds","padding","southWest","latLng","northEast","bounds","latLngBounds","setMaxBounds","panInsideBounds","animate","closeButton","closeOnClick","keepInView","getMarkersWithChildren","addCitiesOnMap","orgs2","arrayItem","arrayItemIndex","childsItems","itemIndex","childValue","itemChild","itemChildIndex","layer_0","featureLayer","layer_1","layer_2","layer_3","layerWithOrgs","onClickCity","target","_latlng","onClickPlace","_icon","classList","add","options","ev","remove","markerElem","marker","icon","divIcon","className","zIndexOffset","addTo","object","onClickPlaces","place","iconUrl","iconSize","iconAnchor","popupAnchor","showLabel","css","hideLabel","setLayer","removeLayer","closePopup","_zoom","hideNavList","slideUp","slideToggle","event","stopPropagation","fadeIn","fadeOut","niceScroll","horizrailenabled","pluginName","defaults","containerClass","containerNoScrollClass","contentClass","scrollbarContainerClass","scrollBarClass","Plugin","element","settings","extend","_defaults","_name","init","addScrollbar","addEvents","onResize","wrapper","contents","scollbarContainer","scrollBar","prepend","proxy","onScroll","onMousedown","onTouchstart","me","y","offsetTop","end","delta","touches","pageY","style","top","min","clientHeight","max","scrollTop","scrollHeight","off","height","wrapper_client_height","fn","getZoom","duration","easeLinearity","org","objectItem","objectItemIndex","getContent","setLatLng","setContent","openOn","getNiceScroll"],"mappings":"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","file":"main.min.js","sourcesContent":["$(function () {\n    \n    // show popup on link click\n    $('#js-about a.popup__title').on('click', function (e) {\n        e.preventDefault()\n        var popup = $(this).attr('data-popup');\n        if ($('#js-' + popup).hasClass('open')) return;\n        // $('#js-jewmapHamburger').removeClass('move');\n        // $('#js-jewmapHamburger').addClass('move');\n        // $('#js-jewmapSearch').addClass('move');\n        $('.popup').removeClass('open');\n        $('#js-' + popup).addClass('open');\n    });\n});","$(function () {\n    var MOBILE_WIDTH = 600;\n\n    var hideClassifier = function () {\n        $('#js-jewmapHamburger').removeClass('active');\n        $('#js-classifier').removeClass('open');\n        if ($(window).width() <= MOBILE_WIDTH) {\n            $('.leaflet-control-container').removeClass('hide');\n            $('#js-lang').removeClass('hide');\n        }\n    }\n\n    // hide classifier on nav click\n    $(window).on('resize', function () {\n        hideClassifier();\n    });\n\n    // hide classifier on resize\n    $('#js-navListWrapper ul>li>a').on('click', function () {\n        hideClassifier();\n    });\n\n    // remove submit button default behavior\n    $('#js-classifier button[type=\"submit\"]').click(function(e) {\n        e.preventDefault();\n    });\n\n    // show classifier items equal to entered by user\n    $('#js-classifier input[type=\"text\"]').on('change keydown keyup', function() {\n        var input = $(this);\n        var cityToFind = input.val().toUpperCase();\n        var cityToFindLength = cityToFind.length;\n        \n        var block = $('#js-classifier ul')\n\n        block.find('a').each(function() {\n            var cityWrapper = $(this).closest('li');\n            var city = $(this).text().toUpperCase();\n            city = city.substring(0, cityToFindLength);\n    \n            if (city !== cityToFind) {\n                cityWrapper.hide();\n            } else {\n                cityWrapper.show();\n            }\n        })\n    });\n    \n    // var citiesArray = [];\n\n    var cities = \n    [\n        'Москва',\n        'Санкт-Петербург',\n        'Новосибирск',\n        'Екатеринбург',\n        'Казань',\n        'Челябинск',\n        'Омск',\n        'Самара',\n        'Ростов-на-Дон',\n        'Уфа',\n        'Красноярск',\n        'Воронеж',\n        'Пермь',\n        'Волгоград',\n        'Краснодар',\n        'Саратов',\n        'Тюмень',\n        'Тольятти',\n        'Ижевск',\n        'Воронеж',\n        'Пермь',\n        'Волгоград',\n        'Краснодар',\n        'Саратов',\n        'Тюмень',\n        'Тольятти',\n        'Ижевск',\n        'Москва',\n        'Санкт-Петербург',\n        'Новосибирск',\n        'Екатеринбург',\n        'Казань',\n        'Челябинск',\n        'Омск',\n        'Самара',\n        'Ростов-на-Дон',\n        'Уфа',\n        'Красноярск',\n        'Воронеж',\n        'Пермь',\n        'Волгоград',\n        'Краснодар',\n        'Саратов',\n        'Тюмень',\n        'Тольятти',\n        'Ижевск',\n        'Воронеж',\n        'Пермь',\n        'Волгоград',\n        'Краснодар',\n        'Саратов',\n        'Тюмень',\n        'Тольятти',\n        'Ижевск'\n    ]\n\n    var addClassifier = function (map, orgs) {\n\n        // sort array\n        var sortArray = function (array) {\n\n            // sort by alphabet\n            array.sort(function(a, b){\n                if(a.name < b.name) { return -1; }\n                if(a.name > b.name) { return 1; }\n                return 0;\n            });\n\n            // spb to top\n            array.forEach(function (elem) {\n                if (elem.name === 'Санкт-Петербург') {\n                    array.splice(array.indexOf(elem), 1)\n                    array.unshift(elem);\n                    return false;\n                }\n            });\n\n            // moscow to top\n            array.forEach(function (elem) {\n                if (elem.name === 'Москва') {\n                    array.splice(array.indexOf(elem), 1)\n                    array.unshift(elem);\n                    return false;\n                }\n            });\n\n            // get index of center elem\n            var halfLength = Math.ceil(array.length / 2);\n\n            // cut array on two halves (half - first half, array - second half)\n            var half = array.splice(0, halfLength);\n\n            // add one elem from each half at a time\n            var interimArray = [];\n            \n            for (var i = 0; i < halfLength; i++) {\n                half[i] !== undefined ? interimArray.push(half[i]) : '';\n                array[i] !== undefined ? interimArray.push(array[i]) : '';\n            };\n\n            return array = interimArray;\n        }\n\n        sortedArray = sortArray(orgs);\n\n        // create classifier from template and array\n        var addPopup = function (array) {\n            // var fragmentMenu = document.createDocumentFragment();\n            // var template = document.querySelector('#js-templateClassifier').content.querySelector('.classifier');\n            // var templateElement = template.cloneNode(true);\n            // fragmentMenu.appendChild(templateElement);\n            // $('#js-jewmap').append(fragmentMenu);\n\n            Array.prototype.forEach.call(array, function (elem) {\n                var fragmentMenuItem = document.createDocumentFragment();\n                var template = document.querySelector('#js-templateClassifierItem').content.querySelector('.classifier__list-item');\n                var templateElement = template.cloneNode(true);\n                templateElement.querySelector('.classifier__list-link').setAttribute('data-id', elem.id);\n                templateElement.querySelector('.classifier__list-link').textContent = elem.name;\n                // templateElement.querySelector('.classifier__list-link').setAttribute('data-address', elem.address);\n                // templateElement.querySelector('.classifier__list-link').setAttribute('data-person', elem.person);\n                // templateElement.querySelector('.classifier__list-link').setAttribute('data-phone', elem.phone);\n                templateElement.querySelector('.classifier__list-link').setAttribute('data-status', elem.status);\n                templateElement.querySelector('.classifier__list-link').setAttribute('data-point', elem.point);\n                fragmentMenuItem.appendChild(templateElement);\n                document.querySelector('.classifier__list').append(fragmentMenuItem);\n            });\n\n            $('#js-classifierScrollbar').scrollBox();\n\n            $('.classifier__list-link').on('click', function () {\n                var point = $(this).attr('data-point').split(',');\n                window.util.flyTo(map, [ parseFloat(point[0]), parseFloat(point[1]) ]);\n                hideClassifier();\n            })\n\n            // show/hide classifier on jewmap hamburger click\n            $('.jewmap__hamburger').on('click', function () {\n                $('#js-jewmapHamburger').toggleClass('active');\n                $('#js-classifier').toggleClass('open');\n                if ($(window).width() <= MOBILE_WIDTH) {\n                    $('.leaflet-control-container').toggleClass('hide');\n                    $('#js-lang').toggleClass('hide');\n                }\n                if ($('.popup').hasClass('open')) {\n                    $('.popup').removeClass('open');\n                    $('#js-navListWrapper ul>li>a').removeClass('active');\n                }\n            });\n        }\n\n        addPopup(sortedArray);\n    }\n    \n    window.classifier = {\n        addClassifier: function (map, array) {\n            addClassifier(map, array);\n        }\n    }\n});","$(function () {\n\n    // var BOUNDS_DALNEVOSTOCHNYJ = new L.LatLngBounds([65.0, 70.0], [62.0, 210.0]);\n    // var BOUNDS_PRIVOLZHSKIJ = new L.LatLngBounds([45.0, 51.0], [64.0, 54.0]);\n    // var BOUNDS_SEVERO_ZAPADNYJ = new L.LatLngBounds([50.0, 51.0], [74.0, 34.0]);\n    // var BOUNDS_SEVERO_KAVKAZKIJ = new L.LatLngBounds([45.0, 57.0], [43.0, 30.0]);\n    // var BOUNDS_SIBIRSKIJ = new L.LatLngBounds([40.0, 55.0], [78.0, 148.0]);\n    // var BOUNDS_URALSKIJ = new L.LatLngBounds([49.0, 55.0], [75.0, 87.0]);\n    // var BOUNDS_CZENTRALNYJ = new L.LatLngBounds([47.0, 41.0], [60.0, 34.0]);\n    // var BOUNDS_YUZHNYJ = new L.LatLngBounds([53.0, 44.0], [42.0, 45.0]);\n    var COORDS_DALNEVOSTOCHNYJ = [64.825365, 144.878838];\n    var COORDS_PRIVOLZHSKIJ = [56.189357,51.733371];\n    var COORDS_SEVERO_ZAPADNYJ = [70.600608, 44.406038];\n    var COORDS_SEVERO_KAVKAZKIJ = [43.765150,44.735885];\n    var COORDS_SIBIRSKIJ = [70.886952,94.748395];\n    var COORDS_URALSKIJ = [64.871851,71.569335];\n    var COORDS_CZENTRALNYJ = [54.905772,39.195997];\n    var COORDS_YUZHNYJ = [47.401426,41.055524];\n\n    var sortArray = function (array) {\n\n        // sort by alphabet\n        array.sort(function(a, b){\n            if(a.name < b.name) { return -1; }\n            if(a.name > b.name) { return 1; }\n            return 0;\n        });\n\n        // get index of center elem\n        var halfLength = Math.ceil(array.length / 2);\n\n        // cut array on two halves (half - first half, array - second half)\n        var half = array.splice(0, halfLength);\n\n        // add one elem from each half at a time\n        var interimArray = [];\n        \n        for (var i = 0; i < halfLength; i++) {\n            half[i] !== undefined ? interimArray.push(half[i]) : '';\n            array[i] !== undefined ? interimArray.push(array[i]) : '';\n        };\n\n        return array = interimArray;\n    }\n\n    var getPhonesWithLinks = function (phones) {\n        var phoneArray = [];\n        Array.prototype.forEach.call(phones, function (phone) { \n            var phoneLink = phone.split(' ').join('').split('(').join('').split(')').join('').split('-').join('').split('?').join('');\n\n            phoneArray.push({\n                'phone': phone,\n                'phoneLink': phoneLink\n            });\n        });\n        return phoneArray;\n    }\n\n\n    var addGeo = function (map, popup) {\n\n        var handleDistrictClick = function () {\n            if (localStorage.getItem('districts') === null) {\n                $.ajax({\n                    method: \"GET\",\n                    url: \"post.php\",\n                    data: {\n                        request: 2\n                    }\n                })\n                    .done(function( msg ) {\n                        var obj = jQuery.parseJSON(msg);\n                        // console.log(obj);\n                        localStorage.setItem('districts', JSON.stringify(obj));\n                        addDistricts(JSON.parse(localStorage.getItem('districts')));\n                    });\n            } else {\n                addDistricts(JSON.parse(localStorage.getItem('districts')));\n            }\n        }\n    \n        var handleCityClick = function (id, name) {\n\n            $.ajax({\n                method: \"GET\",\n                url: \"post.php\",\n                data: {\n                    request: 3,\n                    district: id\n                }\n            })\n                .done(function( msg ) {\n                    var obj = jQuery.parseJSON(msg);\n\n                    var citiesArray = [];\n\n                    Array.prototype.forEach.call(obj, function (objItem, objItem_i) {\n\n                        if (citiesArray.length === 0){\n                            citiesArray.push({\n                                'term_city_id': objItem['term_city_id'],\n                                'name_city': objItem['name_city'],\n                                'latitude_city': objItem['latitude_city'],\n                                'longitude_city': objItem['longitude_city'],\n                                'orgs': []\n                            });\n                            citiesArray[0].orgs.push(objItem);\n                        } else {\n                            var value = false;\n            \n                            Array.prototype.forEach.call(citiesArray, function (item, item_i) {\n                                \n                                if (item['term_city_id'] === objItem['term_city_id']) {\n                                    value = true;\n                                    item.orgs.push(objItem)\n                                }\n                            })\n            \n                            if (value === false) {\n                                citiesArray.push({\n                                    'term_city_id': objItem['term_city_id'],\n                                    'name_city': objItem['name_city'],\n                                    'latitude_city': objItem['latitude_city'],\n                                    'longitude_city': objItem['longitude_city'],\n                                    'orgs': []\n                                });\n                            }\n                        }\n                    });\n                    addCities(citiesArray, name, id);\n                });\n        }\n\n        var addOrgs = function (array, city, district, district_id) {\n\n            $('#js-geo .popup__main').html('');\n            var html = '';\n\n            html += '<span class=\"geo__district-title\">'\n                    //  + '<span class=\"geo__decor\">|</span>'\n                     + '<span class=\"geo__district-text\">' + district + '</span>'\n                     + '<span class=\"geo__district-item-descr\">федеральный округ</span>'\n                     + '</span>'\n                     + '<span id=\"' + district_id + '\" class=\"geo__city-title\">' + city + '</span>'\n\n            if (array.length !== 0) {\n                html += '<div class=\"geo__orgs-wrapper\">'\n                html += '<div class=\"geo__orgs\">'\n                \n                Array.prototype.forEach.call(array, function (parent, parent_i) {\n\n                    html += '<p class=\"geo__orgs-type\">'\n                        // + '<span class=\"geo__decor\">|</span>'\n                        + '<span id=\"' + parent['id_type'] + '\">' + parent['name_type'] + '</span>'\n                    + '</p>'\n\n                    Array.prototype.forEach.call(parent.childs, function (child, child_i) {\n                        html += '<div class=\"geo__org\">'\n                        if (child['lat'] !== '' || child['lng'] !== '') {\n                            html += '<a href=\"#\"'\n                                + ' data-lat=\"' + child['lat']\n                                + '\" data-lng=\"' + child['lng'] \n                                + '\" data-address=\"' + child['address']\n                                + '\" data-phone=\"' + child['phone']\n                                + '\" data-email=\"' + child['email']\n                                + '\" data-site=\"' + child['site']\n                                + '\" class=\"geo__org-name\">' + child['name'] + '</a>'\n                        } else {\n                            html += '<p class=\"geo__org-name\">' + child['name'] + '</p>'\n                        }\n\n                        if (child['rabbi'] !== '' && child['rabbi'] !== null) {\n                        html += '<p class=\"geo__org-rabbi\">'\n                                + '<span class=\"geo__org-icon icon-user\"></span>'\n                                + '<span class=\"geo__org-text\">' + child['rabbi'] + '</span>'\n                            + '</p>'\n                        }\n\n                        if (child['address'] !== '') {\n                            if (child['lat'] !== '' || child['lng'] !== '') {\n                                var yandexLink = 'https://yandex.by/maps/?ll=' + child['lng'] + ',' + child['lat'] + '&z=16&text=' + child['name'].split(' ').join('%20'); \n                                html += '<a href=\"' + yandexLink +'\" class=\"geo__org-address\">'\n                                        + '<span class=\"geo__org-icon icon-address\"></span>'\n                                        + '<span class=\"geo__org-text\">' + child['address'] + '</span>'\n                                    + '</a>'\n                            } else {\n                                html += '<p class=\"geo__org-address\">'\n                                        + '<span class=\"geo__org-icon icon-address\"></span>'\n                                        + '<span class=\"geo__org-text\">' + child['address'] + '</span>'\n                                    + '</p>'\n                            }\n                        }\n\n                        if (child['phone'] !== '') {\n                            \n                            var phones = child['phone'].split(';');\n                    \n                            if (phones.length !== 0) {\n                                var phoneArray = getPhonesWithLinks(phones);\n\n                                html += '<div class=\"geo__org-phone\"><span class=\"geo__org-icon icon-phone\"></span><div class=\"geo__org-phone-content\">';\n\n                                Array.prototype.forEach.call(phoneArray, function (elem, i) { \n                                    html += '<a href=\"tel:' + elem.phoneLink + '\" class=\"geo__org-text\">' + elem.phone + '</a>';\n                                    // i < phoneArray.length - 1 ? html += ', ' : '';\n                                }); \n                                html += '</div></div>';\n                            }\n                        }\n                        html += '</div>';\n                    });\n                    \n                });\n                html += '</div>';\n                html += '</div>';\n    \n            } else {\n                html += '<div class=\"geo__orgs-wrapper\">'\n                html += '<div class=\"geo__orgs\"><p>Ничего не найдено.</p>'\n                html += '</div></div>'\n            }\n\n            // $('#js-geo .geo__district-title .geo__district-text').text(district);\n            // $('#js-geo .geo__city-title').text(city);\n            // $('#js-geo .geo__city-title').attr('id', district_id);\n            $('#js-geo .popup__main').append(html);\n            $('.popup').removeClass('open');\n            $('#js-geo').addClass('open');\n\n            $('#js-geo .geo__district-title').on('click', function () {\n                handleDistrictClick();\n            });\n\n            $('#js-geo .geo__city-title').on('click', function (e) {\n                handleCityClick(district_id, district);\n            })\n\n            $('#js-geo a.geo__org-name').on('click', function (e) {\n                var lat = parseFloat($(this).attr('data-lat'));\n                var lng = parseFloat($(this).attr('data-lng'));\n                var name = $(this).text();\n                var address = $(this).attr('data-address');\n                var phone = $(this).attr('data-phone');\n                var email = $(this).attr('data-email');\n                var site = $(this).attr('data-site');\n\n                $('.popup').removeClass('open');\n                $('#js-jewmapHamburger').removeClass('move');\n                $('#js-jewmapSearch').removeClass('move');\n                $('#js-navListWrapper ul>li>a').removeClass('active');\n        \n                window.util.flyTo(map, [lat, lng], 13);\n                window.util.addPopup(map, popup, {\n                    'name': name,\n                    'point': [lat,lng],\n                    'address': address,\n                    'phone': phone,\n                    'email': email,\n                    'site': site\n                });\n            })\n        }\n\n        var addCities = function (array, district, district_id) {\n            $('#js-geoCities .popup__main').html('');\n\n            var html = '';\n\n            var cities = array.slice(0);\n            var sortedArray = sortArray(array);\n\n\n            if (array.length !== 0) {\n                html += '<span class=\"geo__district-title\">'\n                    //  + '<span class=\"geo__decor\">|</span>'\n                     + '<span class=\"geo__district-text\">' + district + '</span>'\n                     + '<span class=\"geo__district-item-descr\">федеральный округ</span>'\n                     + '</span>'\n                html += '<ul class=\"geo__city-list\">'\n\n                Array.prototype.forEach.call(sortedArray, function (item, i) {\n                    html += '<li class=\"geo__city-wrapper\">'\n                        + '<a id=\"' + item['term_city_id'] + '\" class=\"geo__city-item\" data-lat=\"' + item['latitude_city'] + '\" data-lng=\"' + item['longitude_city'] + '\">' + item['name_city'] + '</a>'\n                        + '</li>'\n                });\n                html += '</ul>'\n            }\n\n            // $('#js-geoCities .geo__district-title .geo__district-text').text(district);\n            $('#js-geoCities .popup__main').append(html);\n            $('.popup').removeClass('open');\n            $('#js-geoCities').addClass('open');\n\n            $('#js-geoCities .geo__district-title').on('click', function () {\n                handleDistrictClick();\n            });\n\n            $('#js-geoCities .geo__city-item').on('click', function (e) {\n                var id = $(this).attr('id');\n                var name = $(this).text();\n                var lat = parseFloat($(this).attr('data-lat'));\n                var lng = parseFloat($(this).attr('data-lng'));\n\n                var orgsArray = [];\n                var religOrg = '';\n\n                $.ajax({\n                    method: \"GET\",\n                    url: \"post.php\",\n                    data: {\n                        request: 6,\n                        city: id\n                    }\n                })\n                    .done(function( msg ) {\n                        var relig = jQuery.parseJSON(msg);\n                        console.log('relig', relig)\n                        var empty = 1;\n                        $.each( relig, function( key, value ) {\n                            if (value !== '') {\n                                return empty = 0;\n                            }\n                        });\n\n                        if (empty === 0) {\n                            religOrg = relig;\n                            religOrg['lat'] = '';\n                            religOrg['lng'] = '';\n                            religOrg['site'] = '';\n                        }\n                        \n                    });\n\n                $.ajax({\n                    method: \"GET\",\n                    url: \"post.php\",\n                    data: {\n                        request: 5\n                    }\n                })\n                    .done(function( msg ) {\n                        var types = jQuery.parseJSON(msg);\n\n                        Array.prototype.forEach.call(types, function (type, type_i) {\n\n                            var parent = {\n                                'id_type': type['term_type_id'],\n                                'name_type': type['name_type'],\n                                'childs': []\n                            };\n\n                            var child = '';\n                            var city = '';\n\n                            Array.prototype.forEach.call(cities, function (citiesItem, citiesItem_i) {\n                                if (citiesItem['term_city_id'] === id) {\n                                    city = citiesItem;\n                                    return false;\n                                }\n                            });\n\n\n                            Array.prototype.forEach.call(city.orgs, function (obj_item, obj_i) {\n                                if (obj_item['ID'] === type['ID']) {\n                                    child = {\n                                        'id': obj_item['ID'],\n                                        'name': obj_item['post_title'],\n                                        'lat': obj_item['latitude'],\n                                        'lng': obj_item['longitude'],\n                                        'address': obj_item['address'],\n                                        'phone': obj_item['phone'],\n                                        'rabbi': obj_item['rabbi'],\n                                        'email': obj_item['email'],\n                                        'site': obj_item['site']\n                                    };\n                                }\n                            });\n                    \n                            if (orgsArray.length === 0){\n                                orgsArray.push(parent);\n                                child !== '' ? orgsArray[0].childs.push(child) : '';\n                            } else {\n                                var value = false;\n                \n                                Array.prototype.forEach.call(orgsArray, function (item, item_i) {\n                                    \n                                    if (item['name_type'] === type['name_type']) {\n                                        value = true;\n                                        child !== '' ? item.childs.push(child) : '';\n                                    }\n                                })\n                \n                                if (value === false) {\n                                    orgsArray.push(parent);\n                                    child !== '' ? orgsArray[orgsArray.length - 1].childs.push(child) : '';\n                                }\n                            }\n                        })\n\n                        var orgsArrayClone = [];\n\n                        if (religOrg !== '') {\n                            Array.prototype.forEach.call(orgsArray, function (item, item_i) {\n        \n                                if (item['id_type'] === '190') {\n                                    item.childs.unshift(religOrg);\n                                    return false;\n                                }\n                            });\n                        }\n                        \n                        Array.prototype.forEach.call(orgsArray, function (item, item_i) {\n                            if (item.childs.length !== 0) {\n                                \n                                if (item['id_type'] === '190') {\n                                    item['order'] = 1;\n                                    item['name_type'] = 'Религиозные организации';\n                                } else if (item['id_type'] === '5') {\n                                    item['order'] = 2;\n                                } else if (item['id_type'] === '6') {\n                                    item['order'] = 3;\n                                } else if (item['id_type'] === '8') {\n                                    item['order'] = 4;\n                                } else if (item['id_type'] === '9') {\n                                    item['order'] = 5;\n                                } else if (item['id_type'] === '10') {\n                                    item['order'] = 6;\n                                } else if (item['id_type'] === '13') {\n                                    item['order'] = 7;\n                                } else if (item['id_type'] === '14') {\n                                    item['order'] = 8;\n                                } else if (item['id_type'] === '15') {\n                                    item['order'] = 9;\n                                } else if (item['id_type'] === '17') {\n                                    item['order'] = 10;\n                                } else if (item['id_type'] === '18') {\n                                    item['order'] = 11;\n                                } else if (item['id_type'] === '189') {\n                                    item['order'] = 12;\n                                } else {\n                                    item['order'] = 13;\n                                }\n                                orgsArrayClone.push(item)\n                            }\n                        })\n\n                        orgsArrayClone.sort(function(a, b){\n                            if(a.order < b.order) { return -1; }\n                            if(a.order > b.order) { return 1; }\n                            return 0;\n                        });\n\n                        addOrgs(orgsArrayClone, name, district, district_id);\n                    })\n\n                    window.util.flyTo(map, [lat, lng], 13);\n            })\n        }\n\n        var addDistricts = function (array) {\n            $('#js-geoDistricts .popup__main').html('');\n\n            var html = '';\n\n            if (array.length !== 0) {\n                html += '<ul class=\"geo__district-list\">'\n\n                Array.prototype.forEach.call(array, function (item, i) {\n                    html += '<li class=\"geo__district-wrapper\">'\n                        + '<a id=\"' + item['term_district_id'] + '\" class=\"geo__district-item\">' + item['name_district'] + '</a>'\n                        + '<span class=\"geo__district-item-descr\">федеральный округ</span>'\n                        + '</li>'\n                });\n                html += '</ul>'\n            }\n\n            $('#js-geoDistricts .popup__main').append(html);\n            $('#js-jewmapHamburger').addClass('move');\n            $('#js-jewmapSearch').addClass('move');\n            $('.popup').removeClass('open');\n            $('#js-geoDistricts').addClass('open');\n\n            $('#js-geoDistricts .geo__district-item').on('click', function (e) {\n                var id = $(this).attr('id');\n                var name = $(this).text();\n                handleCityClick(id, name);\n                var coords = '';\n                var zoom = '';\n                switch(id) {\n                    case '31':\n                        coords = COORDS_CZENTRALNYJ\n                        zoom = 5\n                        break\n                    case '32':\n                        coords = COORDS_SIBIRSKIJ\n                        zoom = 4;\n                        break\n                    case '33':\n                        coords = COORDS_URALSKIJ\n                        zoom = 4.5\n                        break\n                    case '34':\n                        coords = COORDS_SEVERO_ZAPADNYJ\n                        zoom = 4\n                        break\n                    case '35':\n                        coords = COORDS_PRIVOLZHSKIJ\n                        zoom = 5\n                        break\n                    case '36':\n                        coords = COORDS_YUZHNYJ\n                        zoom = 5.5\n                        break\n                    case '37':\n                        coords = COORDS_SEVERO_KAVKAZKIJ\n                        zoom = 5.5\n                        break\n                    case '38':\n                        coords = COORDS_DALNEVOSTOCHNYJ\n                        zoom= 4\n                        break\n                  }\n                window.util.flyTo(map, coords, zoom);\n            })\n        }\n\n        $('#js-nav a[data-popup=\"geoDistricts\"]').on('click', function () {\n            handleDistrictClick();\n        });\n    };\n\n    window.geo = {\n        addGeo: function (map, popup) {\n            addGeo(map, popup);\n        }\n    }\n});","$(function () {\n    $('#js-lang a').on('click', function () {\n        $(this).removeClass('active');\n        var elem = $(this)\n        $('#js-lang a').each(function () {\n            if ($(elem).text() !== $(this).text()) {\n                $(this).addClass('active')\n            }\n        })\n    })\n});","$(function () {\n    \n    var orgs = [];\n    \n    var PIN = 'public/img/pin.png';\n    var BUILDING = 'public/img/building-blue.png';\n    var ZOOM = 4;\n    var BOUNDS_RUSSIA = new L.LatLngBounds([60.0, 21], [69.0, 167.0]);\n    if ($(window).width() <= 600) {\n        BOUNDS_RUSSIA = new L.LatLngBounds([40.0, 25.0], [55.0, 180.0]);\n    }\n\n    L.mapbox.accessToken = 'pk.eyJ1IjoiYWxpYXBrbyIsImEiOiJjangyenVmeGMwcTFjM3lvNGhsdmUzejRoIn0.zdJYMN5sxS2SJXZV2Lb3aA';\n\n    var map = L.map('map', {\n        doubleClickZoom: false,\n        zoomControl: true,\n        zoomDelta: 0.25,\n        zoomSnap: 0,\n        // maxZoom: 10,\n        minZoom: 2,\n        // maxBounds: new L.LatLngBounds([10.0, 15.0],[25.0, 188.0]),\n        // zoomSnap: 0,\n        // maxBoundsViscosity: 1\n    })\n        .setView([63.674041, 99.742382], ZOOM)\n        .addLayer(L.mapbox.styleLayer('mapbox://styles/aliapko/ck0066wpr2azz1cpl59flq3df'));\n\n    map.fitBounds(BOUNDS_RUSSIA, { padding: [20, 20] });\n\n    var southWest = L.latLng(-89.98155760646617, -180),\n    northEast = L.latLng(89.99346179538875, 230);\n    var bounds = L.latLngBounds(southWest, northEast);\n\n    map.setMaxBounds(bounds);\n    map.on('drag', function() {\n        map.panInsideBounds(bounds, { animate: false });\n    });\n\n    // create popup\n    // var markerHeight = 20, markerRadius = 10, linearOffset = 25;\n    // var popupOffsets = {\n    //  'top': [0, 20],\n    //  'top-left': [0,0],\n    //  'top-right': [0,0],\n    //  'bottom': [0, -markerHeight],\n    //  'bottom-left': [linearOffset, (markerHeight - markerRadius + linearOffset) * -1],\n    //  'bottom-right': [-linearOffset, (markerHeight - markerRadius + linearOffset) * -1],\n    //  'left': [markerRadius, (markerHeight - markerRadius) * -1],\n    //  'right': [-markerRadius, (markerHeight - markerRadius) * -1]\n    //  };\n\n    var popup = new L.popup({\n        // offset: popupOffsets,\n        closeButton: true,\n        closeOnClick: true,\n        keepInView: true\n    });\n\n    window.geo.addGeo(map, popup)\n\n    $.ajax({\n        method: \"GET\",\n        url: \"post.php\",\n        data: {\n            request: 1\n        }\n      })\n        .done(function( msg ) {\n          var obj = jQuery.parseJSON(msg);\n          console.log(obj);\n          getMarkersWithChildren(obj);\n          console.log(orgs);\n          addCitiesOnMap(orgs);\n          var orgs2 = orgs.slice(0);\n          window.classifier.addClassifier(map, orgs2);\n        //   window.geo.addGeo(map, orgs);\n        });\n\n    // transform list of orgs into array of cities with children\n    var getMarkersWithChildren = function (array) {\n    \n        Array.prototype.forEach.call(array, function (arrayItem, arrayItemIndex) {\n\n            var parent = {\n                'id': arrayItemIndex,\n                'name': arrayItem['name_city'],\n                'point': [\n                    arrayItem['latitude_city'] === '' || arrayItem['latitude_city'] === null ? '' : parseFloat(arrayItem['latitude_city']),\n                    arrayItem['longitude_city'] === '' || arrayItem['longitude_city'] === null ? '' : parseFloat(arrayItem['longitude_city'])\n                ],\n                'status': arrayItem['status_city'],\n                'childs': []\n            };\n\n            var child = {\n                'name': arrayItem['post_title'],\n                'address': arrayItem['address'],\n                'point': [\n                    arrayItem['latitude'] === '' || arrayItem['latitude'] === null ? '' : parseFloat(arrayItem['latitude']),\n                    arrayItem['longitude'] === '' || arrayItem['longitude'] === null ? '' : parseFloat(arrayItem['longitude'])\n                ],\n                'phone': arrayItem['phone'],\n                'email': arrayItem['email'],\n                'site': arrayItem['site']\n            };\n        \n            if (orgs.length === 0){\n                orgs.push(parent);\n                // orgs[0].childs.push(child);\n\n                orgs[0].childs.push({\n                    coords: child.point,\n                    childsItems: []\n                });\n                orgs[0].childs[0].childsItems.push(child);\n            } else {\n                var value = false;\n\n                Array.prototype.forEach.call(orgs, function (item, itemIndex) {\n                    \n                    if (item['name'] === arrayItem['name_city']) {\n                        value = true;\n                        // item.childs.push(child);\n\n                        var childValue = false;\n                        Array.prototype.forEach.call(item.childs, function (itemChild, itemChildIndex) {\n\n                            if (itemChild['coords'][0] === child['point'][0]\n                            && itemChild['coords'][1] === child['point'][1]) {\n                                childValue = true;\n                                itemChild.childsItems.push(child);\n                            }\n                        });\n\n                        if (childValue === false) {\n                            item.childs.push({\n                                coords: child.point,\n                                childsItems: []\n                            });\n                            item.childs[item.childs.length - 1].childsItems.push(child);\n                        }\n                        \n                    }\n                })\n\n                if (value === false) {\n                    orgs.push(parent);\n                    // orgs[orgs.length - 1].childs.push(child);\n\n                    orgs[orgs.length - 1].childs.push({\n                        coords: child.point,\n                        childsItems: []\n                    });\n                    orgs[orgs.length - 1].childs[0].childsItems.push(child);\n                }\n            }\n        });\n    };\n\n    var addCitiesOnMap = function (array) {\n\n        // create layers with cities\n        var layer_0 = L.mapbox.featureLayer();\n        var layer_1 = L.mapbox.featureLayer();\n        var layer_2 = L.mapbox.featureLayer();\n        var layer_3 = L.mapbox.featureLayer();\n        var layerWithOrgs = L.mapbox.featureLayer();\n\n        // handle click event\n        function onClickCity(e) {\n            var point = e.target._latlng;\n            window.util.flyTo(map, [point.lat, point.lng]);\n        }\n\n        function onClickPlace(e) {\n            e.target._icon.classList.add('icon-hidden')\n            var point = e.target._latlng;\n            var name = e.target.options.name;\n            var address = e.target.options.address;\n            var phone = e.target.options.phone;\n            var email = e.target.options.email;\n            var site = e.target.options.site;\n            window.util.flyTo(map, [point.lat, point.lng]);\n            window.util.addPopup(map, popup, {\n                'name': name,\n                'point': [parseFloat(point.lat),parseFloat(point.lng)],\n                'address': address,\n                'phone': phone,\n                'email': email,\n                'site': site\n            });\n            map.on('popupclose', function(ev) {\n                e.target._icon !== null ? e.target._icon.classList.remove('icon-hidden') : '';\n            });\n        }\n\n        function onClickPlaces(object) {\n            window.util.flyTo(map, object[0].point);\n            window.util.addPopup(map, popup, object, 1);\n        }\n\n        // add markers on layers\n        Array.prototype.forEach.call(array, function (markerElem) { \n\n            if (markerElem.point[0] !== '' || markerElem.point[1] !== '') {\n\n                if (markerElem['status'] === '1') {\n\n                    if (markerElem['name'] === 'Москва') {\n                        var html = '<div class=\"jewmap__pin\"><div class=\"jewmap__pin-icon\"></div><span class=\"jewmap__pin-label\">' + markerElem.name + '</span></div>';\n                        var marker = L.marker(markerElem.point, {\n                            icon: L.divIcon({\n                                html: html,\n                                className: 'capital'\n                            }),\n                            zIndexOffset: 40\n                        }).addTo(layer_0);\n                        marker.on('click', onClickCity);\n\n                    } else {\n                        var html = '<div class=\"jewmap__pin\"><div class=\"jewmap__pin-icon\"></div><span class=\"jewmap__pin-label\">' + markerElem.name + '</span></div>';\n                        var marker = L.marker(markerElem.point, {\n                            icon: L.divIcon({\n                                html: html,\n                                className: 'district'\n                            }),\n                            zIndexOffset: 30\n                        }).addTo(layer_1);\n                        marker.on('click', onClickCity);\n                    }\n                    \n                } else if (markerElem['status'] === '2') {\n                    var html = '<div class=\"jewmap__pin\"><div class=\"jewmap__pin-icon\"></div><span class=\"jewmap__pin-label\">' + markerElem.name + '</span></div>';\n                    var marker = L.marker(markerElem.point, {\n                        icon: L.divIcon({\n                            html: html,\n                            className: 'region'\n                        }),\n                        zIndexOffset: 20\n                    }).addTo(layer_2);\n                    marker.on('click', onClickCity);\n\n                } else if (markerElem['status'] === '3' || markerElem['status'] === null) {\n                    var html = '<div class=\"jewmap__pin\"><div class=\"jewmap__pin-icon\"></div><span class=\"jewmap__pin-label\">' + markerElem.name + '</span></div>';\n                    var marker = L.marker(markerElem.point, {\n                        icon: L.divIcon({\n                            html: html,\n                            className: 'city'\n                        }),\n                        zIndexOffset: 10\n                    }).addTo(layer_3);\n                    marker.on('click', onClickCity);\n                } else {\n                    var html = '<div class=\"jewmap__pin\"><div class=\"jewmap__pin-icon\"></div><span class=\"jewmap__pin-label\">' + markerElem.name + '</span></div>';\n                    var marker = L.marker(markerElem.point, {\n                        icon: L.divIcon({\n                            html: html,\n                            className: 'city'\n                        }),\n                        zIndexOffset: 10\n                    }).addTo(layer_3);\n                    marker.on('click', onClickCity);\n                }\n            }\n\n            Array.prototype.forEach.call(markerElem.childs, function (childs) { \n\n                if (childs.childsItems.length > 1) {\n                    \n                        var marker = L.marker(childs.coords, {\n                            icon: L.divIcon({\n                                html: '<div class=\"jewmap__pin_orgs\"><div class=\"jewmap__pin-icon\"></div><div class=\"jewmap__pin-quantity\"><strong>' + childs.childsItems.length + '<strong></div></div>',\n                                className: 'orgs'\n                            }),\n                            // icon: L.icon({\n                            //     iconUrl: PIN,\n                            //     iconSize: [33, 48],\n                            //     iconAnchor: [16, 48],\n                            //     popupAnchor: [38, 0]\n                            // }),\n                            zIndexOffset: 50\n                        }).addTo(layerWithOrgs);\n\n                        marker.on('click', function () {\n                            onClickPlaces(childs.childsItems)\n                        });\n                } else {\n                    var place = childs.childsItems[0];\n                    if (place.point[0] !== '' || place.point[1] !== '') {\n                    \n                        var marker = L.marker(place.point, {\n                            // icon: L.divIcon({\n                            //     html: '<div class=\"jewmap__pin\"><div class=\"jewmap__pin-icon\"></div></div>',\n                            //     className: 'org'\n                            // }),\n                            icon: L.icon({\n                                iconUrl: BUILDING,\n                                iconSize: [25, 25],\n                                iconAnchor: [12, 25],\n                                popupAnchor: [25, 25]\n                            }),\n                            id: place.id,\n                            name: place.name,\n                            address: place.address,\n                            phone: place.phone,\n                            email: place.email,\n                            site: place.site\n                        }).addTo(layerWithOrgs);\n\n                        marker.on('click', onClickPlace);\n                    }\n                }\n            });\n        })\n\n        // show layers\n        map.addLayer(layer_1)\n        map.addLayer(layer_0)\n        // map.addLayer(layerWithOrgs)\n\n        // function to show label of marker\n        var showLabel = function (elem) {\n            $(elem + ' .jewmap__pin-label').css('opacity', '1');\n            $(elem + ' .jewmap__pin-label').css('pointer-events', 'auto');\n        }\n\n        // function to hide label of marker\n        var hideLabel = function (elem) {\n            $(elem + ' .jewmap__pin-label').css('opacity', '0');\n            $(elem + ' .jewmap__pin-label').css('pointer-events', 'none');\n        }\n\n        // show/hide layer on zoom value\n        var setLayer = function (zoom) {\n            if ($(window).width() < 575) {\n                if ( zoom > 2 && zoom < 3) {\n                    map.addLayer(layer_2)\n                    hideLabel('.region');\n                    map.removeLayer(layer_3);\n                    map.closePopup();\n                    map.removeLayer(layerWithOrgs);\n                } else if (zoom >= 3 && zoom < 4) {\n                    map.addLayer(layer_2)\n                    showLabel('.region');\n                    map.removeLayer(layer_3);\n                    map.closePopup();\n                    map.removeLayer(layerWithOrgs);\n                } else if ( zoom >= 4 && zoom < 5) {\n                    map.addLayer(layer_2)\n                    showLabel('.region');\n                    map.addLayer(layer_3);\n                    hideLabel('.city');\n                    map.closePopup();\n                    map.removeLayer(layerWithOrgs);\n                } else if ( zoom >= 5 && zoom < 13) {\n                    map.addLayer(layer_0);\n                    map.addLayer(layer_1);\n                    map.addLayer(layer_2)\n                    showLabel('.region');\n                    map.addLayer(layer_3);\n                    showLabel('.city');\n                    map.closePopup();\n                    map.removeLayer(layerWithOrgs);\n                } else if ( zoom <= 2) {\n                    map.addLayer(layer_0);\n                    map.addLayer(layer_1);\n                    map.removeLayer(layer_2);\n                    map.removeLayer(layer_3);\n                    map.closePopup();\n                    map.removeLayer(layerWithOrgs);\n                } else if ( zoom >= 13) {\n                    map.addLayer(layerWithOrgs);\n                    map.removeLayer(layer_0);\n                    map.removeLayer(layer_1);\n                    map.removeLayer(layer_2);\n                    map.removeLayer(layer_3);\n                }\n            } else {\n                if ( zoom > 4 && zoom < 5) {\n                    map.addLayer(layer_2)\n                    hideLabel('.region');\n                    map.removeLayer(layer_3);\n                    map.closePopup();\n                    map.removeLayer(layerWithOrgs);\n                } else if (zoom >= 5 && zoom < 6) {\n                    map.addLayer(layer_2)\n                    showLabel('.region');\n                    map.removeLayer(layer_3);\n                    map.closePopup();\n                    map.removeLayer(layerWithOrgs);\n                } else if ( zoom >= 6 && zoom < 7) {\n                    map.addLayer(layer_2)\n                    showLabel('.region');\n                    map.addLayer(layer_3);\n                    hideLabel('.city');\n                    map.closePopup();\n                    map.removeLayer(layerWithOrgs);\n                } else if ( zoom >= 7 && zoom < 13) {\n                    map.addLayer(layer_0);\n                    map.addLayer(layer_1);\n                    map.addLayer(layer_2)\n                    showLabel('.region');\n                    map.addLayer(layer_3);\n                    showLabel('.city');\n                    map.closePopup();\n                    map.removeLayer(layerWithOrgs);\n                } else if ( zoom <= 4) {\n                    map.addLayer(layer_0);\n                    map.addLayer(layer_1);\n                    map.removeLayer(layer_2);\n                    map.removeLayer(layer_3);\n                    map.closePopup();\n                    map.removeLayer(layerWithOrgs);\n                } else if ( zoom >= 13) {\n                    map.addLayer(layerWithOrgs);\n                    map.removeLayer(layer_0);\n                    map.removeLayer(layer_1);\n                    map.removeLayer(layer_2);\n                    map.removeLayer(layer_3);\n                }\n            }\n        }\n\n        setLayer(ZOOM)\n        \n        // handle zoomend event\n        map.on('zoomend', function(e) {\n            var zoom = e.target._zoom;\n            setLayer(zoom)\n        });\n    }\n});\n    ","$(function () {\n    var MOBILE_WIDTH = 600;\n\n    // function for hiding nav list and toggle hamburger class\n    var hideNavList = function () {\n        $('#js-navHamburger').removeClass('active');\n        $('#js-navListWrapper').slideUp();\n    }\n\n    // show active nav item\n    $('#js-navListWrapper ul>li>a').on('click', function () {\n        $('#js-navListWrapper ul>li>a').removeClass('active');\n        $(this).addClass('active');\n        if ($(window).width() <= MOBILE_WIDTH) {\n            hideNavList();\n        }\n    });\n\n    // show/hide nav on hamburger click\n    $('#js-navHamburger').on('click', function () {\n        $('#js-navHamburger').toggleClass('active');\n        $('#js-navListWrapper').slideToggle();\n    });\n\n    // hide nav on outside click\n    $(document).click(function(e) {\n        if ($(window).width() <= MOBILE_WIDTH) {\n            if ($(e.target).closest('#js-navListWrapper').length) return;\n            if ($(e.target).closest('#js-navHamburger').length) return;\n            hideNavList();\n            event.stopPropagation();\n        }\n    });\n\n    // show/hide nav on resize\n    $(window).on('resize', function () {\n        if ($(window).width() > MOBILE_WIDTH) {\n            $('#js-navListWrapper').show();\n            $('#js-navHamburger').removeClass('active');\n        } else {\n            hideNavList();\n        }\n    })\n\n});","$(window).on('load', function () {\n\n    var MOBILE_WIDTH = 600;\n\n    // show info popup\n    $('#js-overlay').fadeIn();\n\n    // hide controls and lang\n    if ($(window).width() <= MOBILE_WIDTH) {\n        $('.leaflet-control-container').addClass('hide');\n        $('#js-infoButton').addClass('hide');\n    }\n\n    // hide info popup on close click\n    $('#js-overlay .overlay__close').on('click', function () {\n        $('#js-overlay').fadeOut();\n        if ($(window).width() <= MOBILE_WIDTH) {\n            $('.leaflet-control-container').removeClass('hide');\n            $('#js-infoButton').removeClass('hide');\n        }\n    })\n\n    // hide info popup on outside click\n    $(document).click(function(e) {\n        if ($(e.target).closest('#js-overlay').length) return;\n        $('#js-overlay').fadeOut();\n        event.stopPropagation();\n        if ($(window).width() <= MOBILE_WIDTH) {\n            $('.leaflet-control-container').removeClass('hide');\n            $('#js-infoButton').removeClass('hide');\n        }\n    });\n});\n","$(function () {\n\n    // init scrollbar\n    $(\".popup__main\").niceScroll({\n        horizrailenabled: false\n    });\n\n    // show popup on nav click\n    $('#js-navListWrapper ul>li>a').on('click', function () {\n        var popup = $(this).attr('data-popup');\n        if ($('#js-' + popup).hasClass('open')) return;\n        // $('#js-jewmapHamburger').removeClass('move');\n        $('#js-jewmapHamburger').addClass('move');\n        $('#js-jewmapSearch').addClass('move');\n        $('.popup').removeClass('open');\n        $('#js-' + popup).addClass('open');\n    });\n\n    // hide popup on close click\n    $('.popup__close').on('click', function () {\n        $('.popup').removeClass('open');\n        $('#js-jewmapHamburger').removeClass('move');\n        $('#js-jewmapSearch').removeClass('move');\n        $('#js-navListWrapper ul>li>a').removeClass('active');\n    });\n\n    // hide popup on outside click\n    // $(document).click(function(e) {\n    //     if ($(e.target).closest('#js-nav').length) return;\n    //     if ($(e.target).closest('.popup').length) return;\n    //     $('.popup').removeClass('open');\n    //     $('#js-jewmapHamburger').removeClass('move');\n    //     $('#js-jewmapSearch').removeClass('move');\n    //     $('#js-navListWrapper ul>li>a').removeClass('active');\n    //     event.stopPropagation();\n    // });\n\n});","/**\n * jQiery scrollBar Plugin\n * @author Falk Müller (www-falk-m.de)\n * Thankts to https://codepen.io/IliaSky/pen/obowmv\n */\n;( function( $, window, document ) {\n\n\t\"use strict\";\n\n\t\tvar pluginName = \"scrollBox\",\n\t\t\tdefaults = {\n\t\t\t\tcontainerClass: \"sb-container\",\n                                containerNoScrollClass: \"sb-container-noscroll\",\n                                contentClass: \"sb-content\",\n                                scrollbarContainerClass: \"sb-scrollbar-container\",\n                                scrollBarClass: \"sb-scrollbar\"\n                                \n\t\t\t};\n\n\t\t// plugin constructor\n\t\tfunction Plugin ( element, options ) {\n\t\t\tthis.element = element;\n\n\t\t\tthis.settings = $.extend( {}, defaults, options );\n\t\t\tthis._defaults = defaults;\n\t\t\tthis._name = pluginName;\n\t\t\tthis.init();\n                        \n\t\t}\n\n\t\t// Avoid Plugin.prototype conflicts\n\t\t$.extend( Plugin.prototype, {\n\t\t\tinit: function() {\n\n\t\t\t\tthis.addScrollbar();\n                                this.addEvents();\n                                this.onResize();\n\t\t\t},\n\t\t\taddScrollbar: function() {\n                                $( this.element ).addClass(this.settings.containerClass);\n                                this.wrapper = $(\"<div class='\" + this.settings.contentClass + \"' />\");\n                                this.wrapper.append($( this.element ).contents());\n                                $( this.element ).append( this.wrapper );\n                                \n                                this.scollbarContainer = $(\"<div class='\" + this.settings.scrollbarContainerClass + \"' />\");\n                                this.scrollBar = $(\"<div class='\" + this.settings.scrollBarClass + \"' />\");\n                                this.scollbarContainer.append(this.scrollBar);\n                                $( this.element ).prepend(this.scollbarContainer);\n\t\t\t},\n                        addEvents: function(){\n                            \n                            this.wrapper.on(\"scroll.\" + pluginName, $.proxy(this.onScroll, this) )\n                            $(window).on(\"resize.\" + pluginName, $.proxy(this.onResize, this) )\n                            \n                            this.scrollBar.on('mousedown.' + pluginName, $.proxy(this.onMousedown, this));\n                            this.scrollBar.on('touchstart.' + pluginName, $.proxy(this.onTouchstart, this));\n                        },\n                        \n                        onTouchstart: function(ev){\n                            var me = this;\n                            \n                            ev.preventDefault();\n                            var y = me.scrollBar[0].offsetTop;\n\n                            var onMove = function(end){\n                                   var delta = end.touches[0].pageY - ev.touches[0].pageY;\n                                   me.scrollBar[0].style.top = Math.min(me.scollbarContainer[0].clientHeight - me.scrollBar[0].clientHeight, Math.max(0, y + delta)) + 'px';\n                                   me.wrapper[0].scrollTop = (me.wrapper[0].scrollHeight * me.scrollBar[0].offsetTop / me.scollbarContainer[0].clientHeight);\n                            };\n\n                           $(document).on(\"touchmove.\" + pluginName, onMove);\n                           $(document).on(\"touchend.\" + pluginName, function(){\n                               $(document).off(\"touchmove.\" + pluginName);\n                               $(document).off(\"touchend.\" + pluginName);\n                           });\n                        },\n                        \n                        onMousedown: function(ev){\n                            var me = this;\n                            \n                            ev.preventDefault();\n                            var y = me.scrollBar[0].offsetTop;\n\n                            var onMove = function(end){\n                                   var delta = end.pageY - ev.pageY;\n                                   me.scrollBar[0].style.top = Math.min(me.scollbarContainer[0].clientHeight - me.scrollBar[0].clientHeight, Math.max(0, y + delta)) + 'px';\n                                   me.wrapper[0].scrollTop = (me.wrapper[0].scrollHeight * me.scrollBar[0].offsetTop / me.scollbarContainer[0].clientHeight);\n                            };\n\n                           $(document).on(\"mousemove.\" + pluginName, onMove);\n                           $(document).on(\"mouseup.\" + pluginName, function(){\n                               $(document).off(\"mousemove.\" + pluginName);\n                               $(document).off(\"mouseup.\" + pluginName);\n                           });\n                        },\n                        \n                        onResize: function(){\n                            \n                            this.wrapper.css(\"max-height\", $(this.element).height());\n                            \n                            var wrapper_client_height = this.wrapper[0].clientHeight;\n                            \n                            this.scrollBar.css(\"height\", this.scollbarContainer[0].clientHeight * wrapper_client_height / this.wrapper[0].scrollHeight + \"px\");\n                             if(this.scollbarContainer[0].clientHeight <= this.scrollBar[0].clientHeight){\n                                 $( this.element ).addClass(this.settings.containerNoScrollClass);\n                             } else {\n                                 $( this.element ).removeClass(this.settings.containerNoScrollClass);\n                             }\n                             \n                             this.onScroll();\n                        },\n                        \n                        onScroll: function(){\n                            \n                            this.scrollBar.css(\"top\", Math.min(this.scollbarContainer[0].clientHeight - this.scrollBar[0].clientHeight, this.scollbarContainer[0].clientHeight * this.wrapper[0].scrollTop / this.wrapper[0].scrollHeight) + \"px\");\n                            \n                        }\n\t\t} );\n\n\t\t// A really lightweight plugin wrapper around the constructor,\n\t\t// preventing against multiple instantiations\n\t\t$.fn[pluginName] = function( options ) {\n\t\t\treturn this.each( function() {\n\t\t\t\tif ( !$.data( this, \"plugin_\" + pluginName ) ) {\n\t\t\t\t\t$.data( this, \"plugin_\" +\n\t\t\t\t\t\tpluginName, new Plugin( this, options ) );\n\t\t\t\t}\n\t\t\t} );\n\t\t};\n\n} )( jQuery, window, document );","$(function () {\n\n    var flyTo = function (map, point, zoom) {\n        if (zoom === undefined) {\n            zoom = map.getZoom();\n            zoom = zoom <= 13 ? 13 : zoom;\n        }\n        map.flyTo([point[0], point[1]], zoom, {duration: 1.1, easeLinearity: 0.45})\n    };\n\n    var addPopup = function (map, popup, object, type) {\n\n        $('.jewmap-popup').html('');\n\n        type === 1 ? '' : type = 0;\n        \n        var org = '';\n        var html = '';\n\n        if (type) {\n            html += '<div class=\"jewmap-popup jewmap-popup_list\"><ul class=\"jewmap-popup__list\">';\n            Array.prototype.forEach.call(object, function (objectItem, objectItemIndex) { \n\n                html +=  '<li class=\"jewmap-popup__list-item\"><a id=\"' + objectItemIndex \n                + '\" class=\"jewmap-popup__list-link\"><strong>' + objectItem.name + '</strong></a></li>';\n            })\n            html += '</ul>';\n            org = object[0]\n        } else {\n            html += '<div class=\"jewmap-popup jewmap-popup_no-list\">';\n            org = object;\n        }\n\n        html += '<div class=\"jewmap-popup__content\">';\n\n        var getContent = function (object) {\n            var html = '';\n            var yandexLink = 'https://yandex.by/maps/?ll=' + object.point[1] + ',' + object.point[0] + '&z=16&text=' + object.name.split(' ').join('%20');\n\n            html += '<p class=\"jewmap-popup__name\"><strong>' + object.name + '</strong></p>';\n            object.address !== '' ? html += '<a href=\"' + yandexLink + '\" class=\"jewmap-popup__text jewmap-popup__address\">' + object.address + '</a>' : '';\n\n            var phones = getPhonesWithLinks(object.phone.split(';'));\n\n            if (phones.length !== 0) {\n                html += '<div class=\"jewmap-popup__phone-wrapper\">';\n                Array.prototype.forEach.call(phones, function (elem, i) { \n                    html += '<a href=\"tel:' + elem.phoneLink + '\" class=\"jewmap-popup__text jewmap-popup__phone\">' + elem.phone + '</a>';\n                    i < phones.length - 1 ? html += ', ' : '';\n                }); \n                html += '</div>';\n            }\n            object.email !== '' ? html += '<a href=\"mailto:' + object.email + '\" class=\"jewmap-popup__text jewmap-popup__email\">' + object.email + '</a>' : '';\n            object.site !== '' ? html += '<a href=\"' + object.site + '\" class=\"jewmap-popup__text jewmap-popup__site\">' + object.site + '</a>' : '';\n            return html;\n        }\n        html += getContent(org);\n        html += '</div>';\n        html += '</div>';\n\n        \n        popup.setLatLng(org.point)\n            .setContent(html)\n            .openOn(map);\n\n        $('.jewmap-popup__list').niceScroll();\n        map.on('popupclose', function(ev) {\n            $('.jewmap-popup__list').getNiceScroll().remove();\n        });\n    \n        $('.jewmap-popup__list-link').on('click', function (e) {\n            var id = $(this).attr('id');\n            $('.jewmap-popup__content').html('');\n            $('.jewmap-popup__content').append(getContent(object[id]));\n        })\n    };\n\n    var getPhonesWithLinks = function (phones) {\n        var phoneArray = [];\n        Array.prototype.forEach.call(phones, function (phone) { \n            var phoneLink = phone.split(' ').join('').split('(').join('').split(')').join('').split('-').join('').split('?').join('');\n\n            phoneArray.push({\n                'phone': phone,\n                'phoneLink': phoneLink\n            });\n        });\n        return phoneArray;\n    }\n\n    window.util = {\n        flyTo: function (map, point, zoom) {\n            flyTo(map, point, zoom);\n        },\n        addPopup: function (map, popup, object, type) {\n            addPopup(map, popup, object, type);\n        },\n        getPhonesWithLinks: function (phones) {\n            getPhonesWithLinks(phones);\n        }\n    }\n});"]}