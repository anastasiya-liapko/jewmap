{"version":3,"sources":["classifier.js","geo.js","lang.js","main.js","nav.js","overlay.js","popup.js","scroll-bar.js","util.js"],"names":["$","hideClassifier","removeClass","window","width","on","click","e","preventDefault","cityToFind","this","val","toUpperCase","cityToFindLength","length","find","each","cityWrapper","closest","city","text","substring","hide","show","classifier","addClassifier","map","array","orgs","sortedArray","sort","a","b","name","forEach","elem","splice","indexOf","unshift","halfLength","Math","ceil","half","interimArray","i","undefined","push","sortArray","Array","prototype","call","fragmentMenuItem","document","createDocumentFragment","templateElement","querySelector","content","cloneNode","setAttribute","id","textContent","status","point","appendChild","append","scrollBox","attr","split","util","flyTo","parseFloat","toggleClass","hasClass","addGeo","popup","addOrgs","district","district_id","console","log","html","parent","parent_i","childs","child","child_i","yandexLink","join","phones","phoneArray","phone","phoneLink","getPhonesWithLinks","addClass","lat","lng","address","email","site","addPopup","addDistricts","item","ajax","method","url","data","request","done","msg","obj","jQuery","parseJSON","orgsArray","types","type","type_i","id_type","name_type","obj_item","obj_i","rabbi","value","item_i","orgsArrayClone","addCities","localStorage","getItem","setItem","JSON","stringify","parse","geo","BOUNDS_RUSSIA","L","LatLngBounds","mapbox","accessToken","doubleClickZoom","zoomControl","zoomDelta","zoomSnap","minZoom","setView","addLayer","styleLayer","fitBounds","padding","southWest","latLng","northEast","bounds","latLngBounds","setMaxBounds","panInsideBounds","animate","closeButton","closeOnClick","keepInView","getMarkersWithChildren","addCitiesOnMap","orgs2","slice","arrayItem","arrayItemIndex","itemIndex","layer_0","featureLayer","layer_1","layer_2","layer_3","layerWithOrgs","onClickCity","target","_latlng","onClickPlace","options","markerElem","marker","icon","divIcon","className","zIndexOffset","addTo","place","iconUrl","iconSize","iconAnchor","popupAnchor","showLabel","css","hideLabel","setLayer","zoom","removeLayer","closePopup","_zoom","hideNavList","slideUp","slideToggle","event","stopPropagation","fadeIn","fadeOut","niceScroll","pluginName","defaults","containerClass","containerNoScrollClass","contentClass","scrollbarContainerClass","scrollBarClass","Plugin","element","settings","extend","_defaults","_name","init","addScrollbar","addEvents","onResize","wrapper","contents","scollbarContainer","scrollBar","prepend","proxy","onScroll","onMousedown","onTouchstart","ev","me","y","offsetTop","end","delta","touches","pageY","style","top","min","clientHeight","max","scrollTop","scrollHeight","off","height","wrapper_client_height","fn","getZoom","duration","easeLinearity","object","setLatLng","setContent","openOn"],"mappings":"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","file":"main.min.js","sourcesContent":["$(function () {\n    var MOBILE_WIDTH = 600;\n\n    var hideClassifier = function () {\n        $('#js-jewmapHamburger').removeClass('active');\n        $('#js-classifier').removeClass('open');\n        if ($(window).width() <= MOBILE_WIDTH) {\n            $('.leaflet-control-container').removeClass('hide');\n            $('#js-lang').removeClass('hide');\n        }\n    }\n\n    // hide classifier on nav click\n    $(window).on('resize', function () {\n        hideClassifier();\n    });\n\n    // hide classifier on resize\n    $('#js-navListWrapper ul>li>a').on('click', function () {\n        hideClassifier();\n    });\n\n    // remove submit button default behavior\n    $('#js-classifier button[type=\"submit\"]').click(function(e) {\n        e.preventDefault();\n    });\n\n    // show classifier items equal to entered by user\n    $('#js-classifier input[type=\"text\"]').on('change keydown keyup', function() {\n        var input = $(this);\n        var cityToFind = input.val().toUpperCase();\n        var cityToFindLength = cityToFind.length;\n        \n        var block = $('#js-classifier ul')\n\n        block.find('a').each(function() {\n            var cityWrapper = $(this).closest('li');\n            var city = $(this).text().toUpperCase();\n            city = city.substring(0, cityToFindLength);\n    \n            if (city !== cityToFind) {\n                cityWrapper.hide();\n            } else {\n                cityWrapper.show();\n            }\n        })\n    });\n    \n    // var citiesArray = [];\n\n    var cities = \n    [\n        'Москва',\n        'Санкт-Петербург',\n        'Новосибирск',\n        'Екатеринбург',\n        'Казань',\n        'Челябинск',\n        'Омск',\n        'Самара',\n        'Ростов-на-Дон',\n        'Уфа',\n        'Красноярск',\n        'Воронеж',\n        'Пермь',\n        'Волгоград',\n        'Краснодар',\n        'Саратов',\n        'Тюмень',\n        'Тольятти',\n        'Ижевск',\n        'Воронеж',\n        'Пермь',\n        'Волгоград',\n        'Краснодар',\n        'Саратов',\n        'Тюмень',\n        'Тольятти',\n        'Ижевск',\n        'Москва',\n        'Санкт-Петербург',\n        'Новосибирск',\n        'Екатеринбург',\n        'Казань',\n        'Челябинск',\n        'Омск',\n        'Самара',\n        'Ростов-на-Дон',\n        'Уфа',\n        'Красноярск',\n        'Воронеж',\n        'Пермь',\n        'Волгоград',\n        'Краснодар',\n        'Саратов',\n        'Тюмень',\n        'Тольятти',\n        'Ижевск',\n        'Воронеж',\n        'Пермь',\n        'Волгоград',\n        'Краснодар',\n        'Саратов',\n        'Тюмень',\n        'Тольятти',\n        'Ижевск'\n    ]\n\n    var addClassifier = function (map, orgs) {\n\n        // sort array\n        var sortArray = function (array) {\n\n            // sort by alphabet\n            array.sort(function(a, b){\n                if(a.name < b.name) { return -1; }\n                if(a.name > b.name) { return 1; }\n                return 0;\n            });\n\n            // spb to top\n            array.forEach(function (elem) {\n                if (elem.name === 'Санкт-Петербург') {\n                    array.splice(array.indexOf(elem), 1)\n                    array.unshift(elem);\n                    return false;\n                }\n            });\n\n            // moscow to top\n            array.forEach(function (elem) {\n                if (elem.name === 'Москва') {\n                    array.splice(array.indexOf(elem), 1)\n                    array.unshift(elem);\n                    return false;\n                }\n            });\n\n            // get index of center elem\n            var halfLength = Math.ceil(array.length / 2);\n\n            // cut array on two halves (half - first half, array - second half)\n            var half = array.splice(0, halfLength);\n\n            // add one elem from each half at a time\n            var interimArray = [];\n            \n            for (var i = 0; i < halfLength; i++) {\n                half[i] !== undefined ? interimArray.push(half[i]) : '';\n                array[i] !== undefined ? interimArray.push(array[i]) : '';\n            };\n\n            return array = interimArray;\n        }\n\n        sortedArray = sortArray(orgs);\n\n        // create classifier from template and array\n        var addPopup = function (array) {\n            // var fragmentMenu = document.createDocumentFragment();\n            // var template = document.querySelector('#js-templateClassifier').content.querySelector('.classifier');\n            // var templateElement = template.cloneNode(true);\n            // fragmentMenu.appendChild(templateElement);\n            // $('#js-jewmap').append(fragmentMenu);\n\n            Array.prototype.forEach.call(array, function (elem) {\n                var fragmentMenuItem = document.createDocumentFragment();\n                var template = document.querySelector('#js-templateClassifierItem').content.querySelector('.classifier__list-item');\n                var templateElement = template.cloneNode(true);\n                templateElement.querySelector('.classifier__list-link').setAttribute('data-id', elem.id);\n                templateElement.querySelector('.classifier__list-link').textContent = elem.name;\n                // templateElement.querySelector('.classifier__list-link').setAttribute('data-address', elem.address);\n                // templateElement.querySelector('.classifier__list-link').setAttribute('data-person', elem.person);\n                // templateElement.querySelector('.classifier__list-link').setAttribute('data-phone', elem.phone);\n                templateElement.querySelector('.classifier__list-link').setAttribute('data-status', elem.status);\n                templateElement.querySelector('.classifier__list-link').setAttribute('data-point', elem.point);\n                fragmentMenuItem.appendChild(templateElement);\n                document.querySelector('.classifier__list').append(fragmentMenuItem);\n            });\n\n            $('#js-classifierScrollbar').scrollBox();\n\n            $('.classifier__list-link').on('click', function () {\n                var point = $(this).attr('data-point').split(',');\n                window.util.flyTo(map, [ parseFloat(point[0]), parseFloat(point[1]) ]);\n                hideClassifier();\n            })\n\n            // show/hide classifier on jewmap hamburger click\n            $('.jewmap__hamburger').on('click', function () {\n                $('#js-jewmapHamburger').toggleClass('active');\n                $('#js-classifier').toggleClass('open');\n                if ($(window).width() <= MOBILE_WIDTH) {\n                    $('.leaflet-control-container').toggleClass('hide');\n                    $('#js-lang').toggleClass('hide');\n                }\n                if ($('.popup').hasClass('open')) {\n                    $('.popup').removeClass('open');\n                    $('#js-navListWrapper ul>li>a').removeClass('active');\n                }\n            });\n        }\n\n        addPopup(sortedArray);\n    }\n    \n    window.classifier = {\n        addClassifier: function (map, array) {\n            addClassifier(map, array);\n        }\n    }\n});","$(function () {\n\n    var addGeo = function (map, popup) {\n\n        var getPhonesWithLinks = function (phones) {\n            var phoneArray = [];\n            Array.prototype.forEach.call(phones, function (phone) { \n                var phoneLink = phone.split(' ').join('').split('(').join('').split(')').join('').split('-').join('').split('?').join('');\n\n                phoneArray.push({\n                    'phone': phone,\n                    'phoneLink': phoneLink\n                });\n            });\n            return phoneArray;\n        }\n\n        var addOrgs = function (array, city, district, district_id) {\n            console.log(array);\n            $('#js-geo .popup__main').html('');\n            var html = '';\n\n            if (array.length !== 0) {\n                html += '<div class=\"geo__orgs-wrapper\">'\n                html += '<div class=\"geo__orgs\">'\n                \n                Array.prototype.forEach.call(array, function (parent, parent_i) {\n\n                    html += '<p class=\"geo__orgs-type\">'\n                        + '<span class=\"geo__decor\">|</span>'\n                        + '<span>' + parent['name_type'] + '</span>'\n                    + '</p>'\n\n                    Array.prototype.forEach.call(parent.childs, function (child, child_i) {\n                        html += '<div class=\"geo__org\">'\n                        if (child['lat'] !== '' || child['lng'] !== '') {\n                            html += '<a href=\"#\"'\n                                + ' data-lat=\"' + child['lat']\n                                + '\" data-lng=\"' + child['lng'] \n                                + '\" data-address=\"' + child['address']\n                                + '\" data-phone=\"' + child['phone']\n                                + '\" data-email=\"' + child['email']\n                                + '\" data-site=\"' + child['site']\n                                + '\" class=\"geo__org-name\">' + child['name'] + '</a>'\n                        } else {\n                            html += '<p class=\"geo__org-name\">' + child['name'] + '</p>'\n                        }\n\n                        if (child['rabbi'] !== '' && child['rabbi'] !== null) {\n                        html += '<p class=\"geo__org-rabbi\">'\n                                + '<span class=\"geo__org-icon icon-user\"></span>'\n                                + '<span class=\"geo__org-text\">' + child['rabbi'] + '</span>'\n                            + '</p>'\n                        }\n\n                        if (child['address'] !== '') {\n                            if (child['lat'] !== '' || child['lng'] !== '') {\n                                var yandexLink = 'https://yandex.by/maps/?ll=' + child['lng'] + ',' + child['lat'] + '&z=16&text=' + child['name'].split(' ').join('%20'); \n                                html += '<a href=\"' + yandexLink +'\" class=\"geo__org-address\">'\n                                        + '<span class=\"geo__org-icon icon-address\"></span>'\n                                        + '<span class=\"geo__org-text\">' + child['address'] + '</span>'\n                                    + '</a>'\n                            } else {\n                                html += '<p class=\"geo__org-address\">'\n                                        + '<span class=\"geo__org-icon icon-address\"></span>'\n                                        + '<span class=\"geo__org-text\">' + child['address'] + '</span>'\n                                    + '</p>'\n                            }\n                        }\n\n                        if (child['phone'] !== '') {\n                            \n                            var phones = child['phone'].split(';');\n                    \n                            if (phones.length !== 0) {\n                                var phoneArray = getPhonesWithLinks(phones);\n                                // console.log(phoneArray)\n\n                                html += '<div class=\"geo__org-phone\"><span class=\"geo__org-icon icon-phone\"></span><div class=\"geo__org-phone-content\">';\n\n                                Array.prototype.forEach.call(phoneArray, function (elem, i) { \n                                    html += '<a href=\"tel:' + elem.phoneLink + '\" class=\"geo__org-text\">' + elem.phone + '</a>';\n                                    // i < phoneArray.length - 1 ? html += ', ' : '';\n                                }); \n                                html += '</div></div>';\n                            }\n                        }\n                        html += '</div>';\n                    });\n                    \n                });\n                html += '</div>';\n                html += '</div>';\n    \n            } else {\n                html += '<div class=\"geo__orgs-wrapper\">'\n                html += '<div class=\"geo__orgs\"><p>Ничего не найдено.</p>'\n                html += '</div></div>'\n            }\n\n            $('#js-geo .geo__district-title .geo__district-text').text(district);\n            $('#js-geo .geo__city-title').text(city);\n            $('#js-geo .geo__city-title').attr('id', district_id);\n            $('#js-geo .popup__main').append(html);\n            $('.popup').removeClass('open');\n            $('#js-geo').addClass('open');\n\n            $('#js-geo a.geo__org-name').on('click', function (e) {\n                var lat = parseFloat($(this).attr('data-lat'));\n                var lng = parseFloat($(this).attr('data-lng'));\n                var name = $(this).text();\n                var address = $(this).attr('data-address');\n                var phone = $(this).attr('data-phone');\n                var email = $(this).attr('data-email');\n                var site = $(this).attr('data-site');\n\n                $('.popup').removeClass('open');\n                $('#js-jewmapHamburger').removeClass('move');\n                $('#js-jewmapSearch').removeClass('move');\n        \n                window.util.flyTo(map, [lat, lng], 13);\n                window.util.addPopup(map, popup, {\n                    'name': name,\n                    'lng': lng,\n                    'lat': lat,\n                    'address': address,\n                    'phone': phone,\n                    'email': email,\n                    'site': site\n                });\n            })\n        }\n\n        var addCities = function (array, district, district_id) {\n            $('#js-geoCities .popup__main').html('');\n\n            var html = '';\n\n            if (array.length !== 0) {\n                html += '<ul class=\"geo__city-list\">'\n\n                Array.prototype.forEach.call(array, function (item, i) {\n                    html += '<li class=\"geo__city-wrapper\">'\n                        + '<a id=\"' + item['term_city_id'] + '\" class=\"geo__city-item\">' + item['name_city'] + '</a>'\n                        + '</li>'\n                });\n                html += '</ul>'\n            }\n\n            $('#js-geoCities .geo__district-title .geo__district-text').text(district);\n            $('#js-geoCities .popup__main').append(html);\n            $('.popup').removeClass('open');\n            $('#js-geoCities').addClass('open');\n\n            $('#js-geoCities .geo__city-item').on('click', function (e) {\n                var id = $(this).attr('id');\n                var name = $(this).text();\n                var orgsArray = [];\n\n                $.ajax({\n                    method: \"GET\",\n                    url: \"post.php\",\n                    data: {\n                        request: 5\n                    }\n                })\n                    .done(function( msg ) {\n                        var types = jQuery.parseJSON(msg);\n                        // console.log(types);\n                    \n                        $.ajax({\n                            method: \"GET\",\n                            url: \"post.php\",\n                            data: {\n                                request: 4,\n                                city: id\n                            }\n                        })\n                            .done(function( msg ) {\n                                var obj = jQuery.parseJSON(msg);\n                                // console.log(obj);\n\n                                Array.prototype.forEach.call(types, function (type, type_i) {\n\n                                var parent = {\n                                    'id_type': type['term_type_id'],\n                                    'name_type': type['name_type'],\n                                    'childs': []\n                                };\n\n                                var child = '';\n                    \n                                Array.prototype.forEach.call(obj, function (obj_item, obj_i) {\n                                    if (obj_item['ID'] === type['ID']) {\n                                        child = {\n                                            'id': obj_item['ID'],\n                                            'name': obj_item['post_title'],\n                                            'lat': obj_item['latitude'],\n                                            'lng': obj_item['longitude'],\n                                            'address': obj_item['address'],\n                                            'phone': obj_item['phone'],\n                                            'rabbi': obj_item['rabbi'],\n                                            'email': obj_item['email'],\n                                            'site': obj_item['site']\n                                        };\n                                    }\n                                });\n                            \n                                if (orgsArray.length === 0){\n                                    orgsArray.push(parent);\n                                    child !== '' ? orgsArray[0].childs.push(child) : '';\n                                } else {\n                                    var value = false;\n                    \n                                    Array.prototype.forEach.call(orgsArray, function (item, item_i) {\n                                        \n                                        if (item['name_type'] === type['name_type']) {\n                                            value = true;\n                                            child !== '' ? item.childs.push(child) : '';\n                                        }\n                                    })\n                    \n                                    if (value === false) {\n                                        orgsArray.push(parent);\n                                        child !== '' ? orgsArray[orgsArray.length - 1].childs.push(child) : '';\n                                    }\n                                }\n                            })\n\n                            var orgsArrayClone = [];\n                            Array.prototype.forEach.call(orgsArray, function (item, item_i) {\n                                if (item.childs.length !== 0) {\n                                    orgsArrayClone.push(item)\n                                }\n                            })\n                            \n                            // obj.length !== 0 ? addOrgs(obj, name, district, district_id) : '';\n                            addOrgs(orgsArrayClone, name, district, district_id);\n                        });\n                    })\n            })\n        }\n\n        var addDistricts = function (array) {\n            $('#js-geoDistricts .popup__main').html('');\n\n            var html = '';\n\n            if (array.length !== 0) {\n                html += '<ul class=\"geo__district-list\">'\n\n                Array.prototype.forEach.call(array, function (item, i) {\n                    html += '<li class=\"geo__district-wrapper\">'\n                        + '<a id=\"' + item['term_district_id'] + '\" class=\"geo__district-item\">' + item['name_district'] + '</a>'\n                        + '</li>'\n                });\n                html += '</ul>'\n            }\n\n            $('#js-geoDistricts .popup__main').append(html);\n            $('#js-jewmapHamburger').addClass('move');\n            $('#js-jewmapSearch').addClass('move');\n            $('.popup').removeClass('open');\n            $('#js-geoDistricts').addClass('open');\n\n            $('#js-geoDistricts .geo__district-item, #js-geo .geo__city-title').on('click', function (e) {\n                var id = $(this).attr('id');\n                var name = $(this).text();\n\n                $.ajax({\n                    method: \"GET\",\n                    url: \"post.php\",\n                    data: {\n                        request: 3,\n                        district: id\n                    }\n                })\n                    .done(function( msg ) {\n                        var obj = jQuery.parseJSON(msg);\n                        // console.log(obj);\n                        obj !== '' ? addCities(obj, name, id) : '';\n                    });\n            })\n        }\n\n\n        $('#js-nav a[data-popup=\"geoDistricts\"], #js-geoCities .geo__district-title, #js-geo .geo__district-title').on('click', function () {\n\n            if (localStorage.getItem('districts') === null) {\n                $.ajax({\n                    method: \"GET\",\n                    url: \"post.php\",\n                    data: {\n                        request: 2\n                    }\n                })\n                    .done(function( msg ) {\n                        var obj = jQuery.parseJSON(msg);\n                        // console.log(obj);\n                        localStorage.setItem('districts', JSON.stringify(obj));\n                        addDistricts(JSON.parse(localStorage.getItem('districts')));\n                    });\n            } else {\n                addDistricts(JSON.parse(localStorage.getItem('districts')));\n            }\n        });\n    };\n\n    window.geo = {\n        addGeo: function (map, popup) {\n            addGeo(map, popup);\n        }\n    }\n});","$(function () {\n    $('#js-lang a').on('click', function () {\n        $('#js-lang a').removeClass('active');\n        $(this).addClass('active');\n    })\n});","$(function () {\n    \n    var orgs = [];\n    \n    var PIN = 'public/img/pin.png';\n    var ZOOM = 4;\n    // var BOUNDS_RUSSIA = new L.LatLngBounds([27.0, 14.5], [77.65, 168.5]);\n    // if ($(window).width() <= 600) {\n    //     BOUNDS_RUSSIA = new L.LatLngBounds([40.0, 25.0], [55.0, 180.0]);\n    // }\n    var BOUNDS_RUSSIA = new L.LatLngBounds([60.0, 21], [69.0, 167.0]);\n    if ($(window).width() <= 600) {\n        BOUNDS_RUSSIA = new L.LatLngBounds([40.0, 25.0], [55.0, 180.0]);\n    }\n\n    L.mapbox.accessToken = 'pk.eyJ1IjoiYWxpYXBrbyIsImEiOiJjangyenVmeGMwcTFjM3lvNGhsdmUzejRoIn0.zdJYMN5sxS2SJXZV2Lb3aA';\n\n    var map = L.map('map', {\n        doubleClickZoom: false,\n        zoomControl: true,\n        zoomDelta: 0.25,\n        zoomSnap: 0,\n        // maxZoom: 10,\n        minZoom: 2,\n        // maxBounds: new L.LatLngBounds([10.0, 15.0],[25.0, 188.0]),\n        // zoomSnap: 0,\n        // maxBoundsViscosity: 1\n    })\n        .setView([63.674041, 99.742382], ZOOM)\n        .addLayer(L.mapbox.styleLayer('mapbox://styles/aliapko/ck0066wpr2azz1cpl59flq3df'));\n\n    map.fitBounds(BOUNDS_RUSSIA, { padding: [20, 20] });\n\n    var southWest = L.latLng(-89.98155760646617, -180),\n    northEast = L.latLng(89.99346179538875, 230);\n    var bounds = L.latLngBounds(southWest, northEast);\n\n    map.setMaxBounds(bounds);\n    map.on('drag', function() {\n        map.panInsideBounds(bounds, { animate: false });\n    });\n\n    // create popup\n    // var markerHeight = 20, markerRadius = 10, linearOffset = 25;\n    // var popupOffsets = {\n    //  'top': [0, 20],\n    //  'top-left': [0,0],\n    //  'top-right': [0,0],\n    //  'bottom': [0, -markerHeight],\n    //  'bottom-left': [linearOffset, (markerHeight - markerRadius + linearOffset) * -1],\n    //  'bottom-right': [-linearOffset, (markerHeight - markerRadius + linearOffset) * -1],\n    //  'left': [markerRadius, (markerHeight - markerRadius) * -1],\n    //  'right': [-markerRadius, (markerHeight - markerRadius) * -1]\n    //  };\n\n    var popup = new L.popup({\n        // offset: popupOffsets,\n        closeButton: true,\n        closeOnClick: true,\n        keepInView: true\n    });\n\n    window.geo.addGeo(map, popup)\n\n    $.ajax({\n        method: \"GET\",\n        url: \"post.php\",\n        data: {\n            request: 1\n        }\n      })\n        .done(function( msg ) {\n          var obj = jQuery.parseJSON(msg);\n          console.log(obj);\n          getMarkersWithChildren(obj);\n          addCitiesOnMap(orgs);\n          var orgs2 = orgs.slice(0);\n          window.classifier.addClassifier(map, orgs2);\n        //   window.geo.addGeo(map, orgs);\n        });\n\n    // transform list of orgs into array of cities with children\n    var getMarkersWithChildren = function (array) {\n    \n        Array.prototype.forEach.call(array, function (arrayItem, arrayItemIndex) {\n\n            var parent = {\n                'id': arrayItemIndex,\n                'name': arrayItem['name_city'],\n                'point': [\n                    arrayItem['latitude_city'] === '' || arrayItem['latitude_city'] === null ? '' : parseFloat(arrayItem['latitude_city']),\n                    arrayItem['longitude_city'] === '' || arrayItem['longitude_city'] === null ? '' : parseFloat(arrayItem['longitude_city'])\n                ],\n                'status': arrayItem['status_city'],\n                'childs': []\n            };\n\n            var child = {\n                'name': arrayItem['post_title'],\n                'address': arrayItem['address'],\n                'point': [\n                    arrayItem['latitude'] === '' || arrayItem['latitude'] === null ? '' : parseFloat(arrayItem['latitude']),\n                    arrayItem['longitude'] === '' || arrayItem['longitude'] === null ? '' : parseFloat(arrayItem['longitude'])\n                ],\n                'phone': arrayItem['phone'],\n                'email': arrayItem['email'],\n                'site': arrayItem['site']\n            };\n        \n            if (orgs.length === 0){\n                orgs.push(parent);\n                orgs[0].childs.push(child);\n            } else {\n                var value = false;\n\n                Array.prototype.forEach.call(orgs, function (item, itemIndex) {\n                    \n                    if (item['name'] === arrayItem['name_city']) {\n                        value = true;\n                        item.childs.push(child);\n                    }\n                })\n\n                if (value === false) {\n                    orgs.push(parent);\n                    orgs[orgs.length - 1].childs.push(child);\n                }\n            }\n        });\n    };\n\n    var addCitiesOnMap = function (array) {\n\n        // create lauers with cities\n        var layer_0 = L.mapbox.featureLayer();\n        var layer_1 = L.mapbox.featureLayer();\n        var layer_2 = L.mapbox.featureLayer();\n        var layer_3 = L.mapbox.featureLayer();\n        var layerWithOrgs = L.mapbox.featureLayer();\n\n        // handle click event\n        function onClickCity(e) {\n            var point = e.target._latlng;\n            window.util.flyTo(map, [point.lat, point.lng]);\n        }\n\n        function onClickPlace(e) {\n            var point = e.target._latlng;\n            var name = e.target.options.name;\n            var address = e.target.options.address;\n            var phone = JSON.parse(e.target.options.phone);\n            var email = e.target.options.email;\n            var site = e.target.options.site;\n            console.log(phone)\n            window.util.flyTo(map, [point.lat, point.lng]);\n            window.util.addPopup(map, popup, {\n                'name': name,\n                'lng': parseFloat(point.lng),\n                'lat': parseFloat(point.lat),\n                'address': address,\n                'phone': phone,\n                'email': email,\n                'site': site\n            });\n        }\n\n        // add markers on layers\n        Array.prototype.forEach.call(array, function (markerElem) { \n\n            if (markerElem.point[0] !== '' || markerElem.point[1] !== '') {\n\n                if (markerElem['status'] === '1') {\n\n                    if (markerElem['name'] === 'Москва') {\n                        var html = '<div class=\"jewmap__pin\"><div class=\"jewmap__pin-icon\"></div><span class=\"jewmap__pin-label\">' + markerElem.name + '</span></div>';\n                        var marker = L.marker(markerElem.point, {\n                            icon: L.divIcon({\n                                html: html,\n                                className: 'capital'\n                            }),\n                            zIndexOffset: 40\n                        }).addTo(layer_0);\n                        marker.on('click', onClickCity);\n\n                    } else {\n                        var html = '<div class=\"jewmap__pin\"><div class=\"jewmap__pin-icon\"></div><span class=\"jewmap__pin-label\">' + markerElem.name + '</span></div>';\n                        var marker = L.marker(markerElem.point, {\n                            icon: L.divIcon({\n                                html: html,\n                                className: 'district'\n                            }),\n                            zIndexOffset: 30\n                        }).addTo(layer_1);\n                        marker.on('click', onClickCity);\n                    }\n                    \n                } else if (markerElem['status'] === '2') {\n                    var html = '<div class=\"jewmap__pin\"><div class=\"jewmap__pin-icon\"></div><span class=\"jewmap__pin-label\">' + markerElem.name + '</span></div>';\n                    var marker = L.marker(markerElem.point, {\n                        icon: L.divIcon({\n                            html: html,\n                            className: 'region'\n                        }),\n                        zIndexOffset: 20\n                    }).addTo(layer_2);\n                    marker.on('click', onClickCity);\n\n                } else if (markerElem['status'] === '3' || markerElem['status'] === null) {\n                    var html = '<div class=\"jewmap__pin\"><div class=\"jewmap__pin-icon\"></div><span class=\"jewmap__pin-label\">' + markerElem.name + '</span></div>';\n                    var marker = L.marker(markerElem.point, {\n                        icon: L.divIcon({\n                            html: html,\n                            className: 'city'\n                        }),\n                        zIndexOffset: 10\n                    }).addTo(layer_3);\n                    marker.on('click', onClickCity);\n                }\n            }\n\n            Array.prototype.forEach.call(markerElem.childs, function (place) { \n\n                if (place.point[0] !== '' || place.point[1] !== '') {\n                    var phoneArray = [];\n\n                    if (place.phone !== undefined) {\n                        var phones = place.phone.split(';');\n\n                        if (phones.length !== 0) {\n\n                            Array.prototype.forEach.call(phones, function (phone) { \n                                var phoneLink = phone.split(' ').join('').split('(').join('').split(')').join('').split('-').join('').split('?').join('');\n        \n                                phoneArray.push({\n                                    'phone': phone,\n                                    'phoneLink': phoneLink\n                                });\n                            });\n                        }\n                    }\n                    \n                    var marker = L.marker(place.point, {\n                        // icon: L.divIcon({\n                        //     html: '<div class=\"jewmap__pin\"><div class=\"jewmap__pin-icon\"></div></div>',\n                        //     className: 'org'\n                        // }),\n                        icon: L.icon({\n                            iconUrl: PIN,\n                            iconSize: [33, 48],\n                            iconAnchor: [16, 48],\n                            popupAnchor: [38, 0]\n                        }),\n                        id: place.id,\n                        name: place.name,\n                        address: place.address,\n                        phone: JSON.stringify(phoneArray),\n                        email: place.email,\n                        site: place.site\n                    }).addTo(layerWithOrgs);\n\n                    marker.on('click', onClickPlace);\n                }\n            });\n        })\n\n        // show layers\n        map.addLayer(layer_1)\n        map.addLayer(layer_0)\n        // map.addLayer(layerWithOrgs)\n\n        // function to show label of marker\n        var showLabel = function (elem) {\n            $(elem + ' .jewmap__pin-label').css('opacity', '1');\n            $(elem + ' .jewmap__pin-label').css('pointer-events', 'auto');\n        }\n\n        // function to hide label of marker\n        var hideLabel = function (elem) {\n            $(elem + ' .jewmap__pin-label').css('opacity', '0');\n            $(elem + ' .jewmap__pin-label').css('pointer-events', 'none');\n        }\n\n        // show/hide layer on zoom value\n        var setLayer = function (zoom) {\n            if ($(window).width() < 575) {\n                if ( zoom > 2 && zoom < 3) {\n                    map.addLayer(layer_2)\n                    hideLabel('.region');\n                    map.removeLayer(layer_3);\n                } else if (zoom > 3 && zoom < 4) {\n                    map.addLayer(layer_2)\n                    showLabel('.region');\n                    map.removeLayer(layer_3);\n                } else if ( zoom > 4 && zoom < 5) {\n                    map.addLayer(layer_2)\n                    showLabel('.region');\n                    map.addLayer(layer_3);\n                    hideLabel('.city');\n                } else if ( zoom > 5 && zoom < 10) {\n                    map.removeLayer(layerWithOrgs);\n                    map.addLayer(layer_0);\n                    map.addLayer(layer_1);\n                    map.addLayer(layer_2)\n                    showLabel('.region');\n                    map.addLayer(layer_3);\n                    showLabel('.city');\n                    map.closePopup();\n                } else if ( zoom < 2) {\n                    map.addLayer(layer_0);\n                    map.addLayer(layer_1);\n                    map.removeLayer(layer_2);\n                    map.removeLayer(layer_3);\n                } else if ( zoom >= 10) {\n                    map.addLayer(layerWithOrgs);\n                    map.removeLayer(layer_0);\n                    map.removeLayer(layer_1);\n                    map.removeLayer(layer_2);\n                    map.removeLayer(layer_3);\n                }\n            } else {\n                if ( zoom > 4 && zoom < 5) {\n                    map.addLayer(layer_2)\n                    hideLabel('.region');\n                    map.removeLayer(layer_3);\n                } else if (zoom > 5 && zoom < 6) {\n                    map.addLayer(layer_2)\n                    showLabel('.region');\n                    map.removeLayer(layer_3);\n                } else if ( zoom > 6 && zoom < 7) {\n                    map.addLayer(layer_2)\n                    showLabel('.region');\n                    map.addLayer(layer_3);\n                    hideLabel('.city');\n                } else if ( zoom > 7 && zoom < 10) {\n                    map.removeLayer(layerWithOrgs);\n                    map.addLayer(layer_0);\n                    map.addLayer(layer_1);\n                    map.addLayer(layer_2)\n                    showLabel('.region');\n                    map.addLayer(layer_3);\n                    showLabel('.city');\n                    map.closePopup();\n                } else if ( zoom < 4) {\n                    map.addLayer(layer_0);\n                    map.addLayer(layer_1);\n                    map.removeLayer(layer_2);\n                    map.removeLayer(layer_3);\n                } else if ( zoom >= 10) {\n                    map.addLayer(layerWithOrgs);\n                    map.removeLayer(layer_0);\n                    map.removeLayer(layer_1);\n                    map.removeLayer(layer_2);\n                    map.removeLayer(layer_3);\n                }\n            }\n        }\n\n        setLayer(ZOOM)\n        \n        // handle zoomend event\n        map.on('zoomend', function(e) {\n            var zoom = e.target._zoom;\n            setLayer(zoom)\n        });\n    }\n});\n    ","$(function () {\n    var MOBILE_WIDTH = 600;\n\n    // function for hiding nav list and toggle hamburger class\n    var hideNavList = function () {\n        $('#js-navHamburger').removeClass('active');\n        $('#js-navListWrapper').slideUp();\n    }\n\n    // show active nav item\n    $('#js-navListWrapper ul>li>a').on('click', function () {\n        $('#js-navListWrapper ul>li>a').removeClass('active');\n        $(this).addClass('active');\n        if ($(window).width() <= MOBILE_WIDTH) {\n            hideNavList();\n        }\n    });\n\n    // show/hide nav on hamburger click\n    $('#js-navHamburger').on('click', function () {\n        $('#js-navHamburger').toggleClass('active');\n        $('#js-navListWrapper').slideToggle();\n    });\n\n    // hide nav on outside click\n    $(document).click(function(e) {\n        if ($(window).width() <= MOBILE_WIDTH) {\n            if ($(e.target).closest('#js-navListWrapper').length) return;\n            if ($(e.target).closest('#js-navHamburger').length) return;\n            hideNavList();\n            event.stopPropagation();\n        }\n    });\n\n    // show/hide nav on resize\n    $(window).on('resize', function () {\n        if ($(window).width() > MOBILE_WIDTH) {\n            $('#js-navListWrapper').show();\n            $('#js-navHamburger').removeClass('active');\n        } else {\n            hideNavList();\n        }\n    })\n\n});","$(window).on('load', function () {\n\n    var MOBILE_WIDTH = 600;\n\n    // show info popup\n    $('#js-overlay').fadeIn();\n\n    // hide controls and lang\n    if ($(window).width() <= MOBILE_WIDTH) {\n        $('.leaflet-control-container').addClass('hide');\n        $('#js-infoButton').addClass('hide');\n    }\n\n    // hide info popup on close click\n    $('#js-overlay .overlay__close').on('click', function () {\n        $('#js-overlay').fadeOut();\n        if ($(window).width() <= MOBILE_WIDTH) {\n            $('.leaflet-control-container').removeClass('hide');\n            $('#js-infoButton').removeClass('hide');\n        }\n    })\n\n    // hide info popup on outside click\n    $(document).click(function(e) {\n        if ($(e.target).closest('#js-overlay').length) return;\n        $('#js-overlay').fadeOut();\n        event.stopPropagation();\n        if ($(window).width() <= MOBILE_WIDTH) {\n            $('.leaflet-control-container').removeClass('hide');\n            $('#js-infoButton').removeClass('hide');\n        }\n    });\n});\n","$(function () {\n\n    // init scrollbar\n    $(\".popup__main\").niceScroll();\n\n    // show popup on nav click\n    $('#js-navListWrapper ul>li>a').on('click', function () {\n        var popup = $(this).attr('data-popup');\n        if ($('#js-' + popup).hasClass('open')) return;\n        // $('#js-jewmapHamburger').removeClass('move');\n        $('#js-jewmapHamburger').addClass('move');\n        $('#js-jewmapSearch').addClass('move');\n        $('.popup').removeClass('open');\n        $('#js-' + popup).addClass('open');\n    });\n\n    // hide popup on close click\n    $('.popup__close').on('click', function () {\n        $('.popup').removeClass('open');\n        $('#js-jewmapHamburger').removeClass('move');\n        $('#js-jewmapSearch').removeClass('move');\n        $('#js-navListWrapper ul>li>a').removeClass('active');\n    });\n\n    // hide popup on outside click\n    // $(document).click(function(e) {\n    //     if ($(e.target).closest('#js-nav').length) return;\n    //     if ($(e.target).closest('.popup').length) return;\n    //     $('.popup').removeClass('open');\n    //     $('#js-jewmapHamburger').removeClass('move');\n    //     $('#js-jewmapSearch').removeClass('move');\n    //     $('#js-navListWrapper ul>li>a').removeClass('active');\n    //     event.stopPropagation();\n    // });\n\n});","/**\n * jQiery scrollBar Plugin\n * @author Falk Müller (www-falk-m.de)\n * Thankts to https://codepen.io/IliaSky/pen/obowmv\n */\n;( function( $, window, document ) {\n\n\t\"use strict\";\n\n\t\tvar pluginName = \"scrollBox\",\n\t\t\tdefaults = {\n\t\t\t\tcontainerClass: \"sb-container\",\n                                containerNoScrollClass: \"sb-container-noscroll\",\n                                contentClass: \"sb-content\",\n                                scrollbarContainerClass: \"sb-scrollbar-container\",\n                                scrollBarClass: \"sb-scrollbar\"\n                                \n\t\t\t};\n\n\t\t// plugin constructor\n\t\tfunction Plugin ( element, options ) {\n\t\t\tthis.element = element;\n\n\t\t\tthis.settings = $.extend( {}, defaults, options );\n\t\t\tthis._defaults = defaults;\n\t\t\tthis._name = pluginName;\n\t\t\tthis.init();\n                        \n\t\t}\n\n\t\t// Avoid Plugin.prototype conflicts\n\t\t$.extend( Plugin.prototype, {\n\t\t\tinit: function() {\n\n\t\t\t\tthis.addScrollbar();\n                                this.addEvents();\n                                this.onResize();\n\t\t\t},\n\t\t\taddScrollbar: function() {\n                                $( this.element ).addClass(this.settings.containerClass);\n                                this.wrapper = $(\"<div class='\" + this.settings.contentClass + \"' />\");\n                                this.wrapper.append($( this.element ).contents());\n                                $( this.element ).append( this.wrapper );\n                                \n                                this.scollbarContainer = $(\"<div class='\" + this.settings.scrollbarContainerClass + \"' />\");\n                                this.scrollBar = $(\"<div class='\" + this.settings.scrollBarClass + \"' />\");\n                                this.scollbarContainer.append(this.scrollBar);\n                                $( this.element ).prepend(this.scollbarContainer);\n\t\t\t},\n                        addEvents: function(){\n                            \n                            this.wrapper.on(\"scroll.\" + pluginName, $.proxy(this.onScroll, this) )\n                            $(window).on(\"resize.\" + pluginName, $.proxy(this.onResize, this) )\n                            \n                            this.scrollBar.on('mousedown.' + pluginName, $.proxy(this.onMousedown, this));\n                            this.scrollBar.on('touchstart.' + pluginName, $.proxy(this.onTouchstart, this));\n                        },\n                        \n                        onTouchstart: function(ev){\n                            var me = this;\n                            \n                            ev.preventDefault();\n                            var y = me.scrollBar[0].offsetTop;\n\n                            var onMove = function(end){\n                                   var delta = end.touches[0].pageY - ev.touches[0].pageY;\n                                   me.scrollBar[0].style.top = Math.min(me.scollbarContainer[0].clientHeight - me.scrollBar[0].clientHeight, Math.max(0, y + delta)) + 'px';\n                                   me.wrapper[0].scrollTop = (me.wrapper[0].scrollHeight * me.scrollBar[0].offsetTop / me.scollbarContainer[0].clientHeight);\n                            };\n\n                           $(document).on(\"touchmove.\" + pluginName, onMove);\n                           $(document).on(\"touchend.\" + pluginName, function(){\n                               $(document).off(\"touchmove.\" + pluginName);\n                               $(document).off(\"touchend.\" + pluginName);\n                           });\n                        },\n                        \n                        onMousedown: function(ev){\n                            var me = this;\n                            \n                            ev.preventDefault();\n                            var y = me.scrollBar[0].offsetTop;\n\n                            var onMove = function(end){\n                                   var delta = end.pageY - ev.pageY;\n                                   me.scrollBar[0].style.top = Math.min(me.scollbarContainer[0].clientHeight - me.scrollBar[0].clientHeight, Math.max(0, y + delta)) + 'px';\n                                   me.wrapper[0].scrollTop = (me.wrapper[0].scrollHeight * me.scrollBar[0].offsetTop / me.scollbarContainer[0].clientHeight);\n                            };\n\n                           $(document).on(\"mousemove.\" + pluginName, onMove);\n                           $(document).on(\"mouseup.\" + pluginName, function(){\n                               $(document).off(\"mousemove.\" + pluginName);\n                               $(document).off(\"mouseup.\" + pluginName);\n                           });\n                        },\n                        \n                        onResize: function(){\n                            \n                            this.wrapper.css(\"max-height\", $(this.element).height());\n                            \n                            var wrapper_client_height = this.wrapper[0].clientHeight;\n                            \n                            this.scrollBar.css(\"height\", this.scollbarContainer[0].clientHeight * wrapper_client_height / this.wrapper[0].scrollHeight + \"px\");\n                             if(this.scollbarContainer[0].clientHeight <= this.scrollBar[0].clientHeight){\n                                 $( this.element ).addClass(this.settings.containerNoScrollClass);\n                             } else {\n                                 $( this.element ).removeClass(this.settings.containerNoScrollClass);\n                             }\n                             \n                             this.onScroll();\n                        },\n                        \n                        onScroll: function(){\n                            \n                            this.scrollBar.css(\"top\", Math.min(this.scollbarContainer[0].clientHeight - this.scrollBar[0].clientHeight, this.scollbarContainer[0].clientHeight * this.wrapper[0].scrollTop / this.wrapper[0].scrollHeight) + \"px\");\n                            \n                        }\n\t\t} );\n\n\t\t// A really lightweight plugin wrapper around the constructor,\n\t\t// preventing against multiple instantiations\n\t\t$.fn[pluginName] = function( options ) {\n\t\t\treturn this.each( function() {\n\t\t\t\tif ( !$.data( this, \"plugin_\" + pluginName ) ) {\n\t\t\t\t\t$.data( this, \"plugin_\" +\n\t\t\t\t\t\tpluginName, new Plugin( this, options ) );\n\t\t\t\t}\n\t\t\t} );\n\t\t};\n\n} )( jQuery, window, document );","$(function () {\n\n    var flyTo = function (map, point, zoom) {\n        if (zoom === undefined) {\n            zoom = map.getZoom();\n            zoom = zoom <= 10 ? 10 : zoom;\n        }\n        map.flyTo([point[0], point[1]], zoom, {duration: 1.1, easeLinearity: 0.45})\n    };\n\n    var addPopup = function (map, popup, object) {\n\n        var yandexLink = 'https://yandex.by/maps/?ll=' + object.lng + ',' + object.lat + '&z=16&text=' + object.name.split(' ').join('%20');\n\n        var html = '';\n\n        html += '<div class=\"jewmap-popup\">' +\n            '<p class=\"jewmap-popup__name\"><strong>' + object.name + '</strong></p>';\n        object.address !== '' ? html += '<a href=\"' + yandexLink + '\" class=\"jewmap-popup__text jewmap-popup__address\">' + object.address + '</a>' : '';\n\n        var phones = getPhonesWithLinks(object.phone.split(';'));\n        console.log(phones)\n\n        if (phones.length !== 0) {\n            html += '<div class=\"jewmap-popup__phone-wrapper\">';\n            Array.prototype.forEach.call(phones, function (elem, i) { \n                html += '<a href=\"tel:' + elem.phoneLink + '\" class=\"jewmap-popup__text jewmap-popup__phone\">' + elem.phone + '</a>';\n                i < phones.length - 1 ? html += ', ' : '';\n            }); \n            html += '</div>';\n        }\n        object.email !== '' ? html += '<a href=\"mailto:' + object.email + '\" class=\"jewmap-popup__text jewmap-popup__email\">' + object.email + '</a>' : '';\n        object.site !== '' ? html += '<a href=\"' + object.site + '\" class=\"jewmap-popup__text jewmap-popup__site\">' + object.site + '</a>' : '';\n        html += '</div>';\n\n        popup.setLatLng([object.lat, object.lng])\n            .setContent(html)\n            .openOn(map);\n    };\n\n    var getPhonesWithLinks = function (phones) {\n        var phoneArray = [];\n        Array.prototype.forEach.call(phones, function (phone) { \n            var phoneLink = phone.split(' ').join('').split('(').join('').split(')').join('').split('-').join('').split('?').join('');\n\n            phoneArray.push({\n                'phone': phone,\n                'phoneLink': phoneLink\n            });\n        });\n        return phoneArray;\n    }\n\n    window.util = {\n        flyTo: function (map, point, zoom) {\n            flyTo(map, point, zoom);\n        },\n        addPopup: function (map, popup, object) {\n            addPopup(map, popup, object);\n        },\n        getPhonesWithLinks: function (phones) {\n            getPhonesWithLinks(phones);\n        }\n    }\n});"]}