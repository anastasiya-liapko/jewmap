{"version":3,"sources":["classifier.js","lang.js","main.js","nav.js","popup.js","scroll-bar.js","util.js"],"names":["$","hideClassifier","removeClass","window","width","on","click","e","preventDefault","cityToFind","this","val","toUpperCase","cityToFindLength","length","find","each","cityWrapper","closest","city","text","substring","hide","show","classifier","addClassifier","map","array","orgs","sortedArray","sort","a","b","name","forEach","elem","splice","indexOf","unshift","halfLength","Math","ceil","half","interimArray","i","undefined","push","sortArray","Array","prototype","call","fragmentMenuItem","document","createDocumentFragment","templateElement","querySelector","content","cloneNode","setAttribute","id","textContent","status","point","appendChild","append","scrollBox","attr","split","util","flyTo","parseFloat","toggleClass","hasClass","addClass","BOUNDS_RUSSIA","L","LatLngBounds","mapbox","accessToken","doubleClickZoom","zoomControl","zoomDelta","zoomSnap","minZoom","setView","addLayer","styleLayer","fitBounds","padding","southWest","latLng","northEast","bounds","latLngBounds","setMaxBounds","panInsideBounds","animate","ajax","method","url","data","request","done","msg","obj","jQuery","parseJSON","console","log","getMarkersWithChildren","addCitiesOnMap","arrayItem","arrayItemIndex","parent","childs","child","address","value","item","itemIndex","layer_0","featureLayer","layer_1","layer_2","layer_3","layerWithOrgs","onClickCity","target","_latlng","lat","lng","markerElem","html","marker","icon","divIcon","className","zIndexOffset","addTo","place","phone","firstPart","pop","shift","thirdPart","phoneLink","yandexLink","join","person","showLabel","css","hideLabel","setLayer","zoom","removeLayer","_zoom","hideNavList","slideUp","slideToggle","event","stopPropagation","popup","pluginName","defaults","containerClass","containerNoScrollClass","contentClass","scrollbarContainerClass","scrollBarClass","Plugin","element","options","settings","extend","_defaults","_name","init","addScrollbar","addEvents","onResize","wrapper","contents","scollbarContainer","scrollBar","prepend","proxy","onScroll","onMousedown","onTouchstart","ev","me","y","offsetTop","end","delta","touches","pageY","style","top","min","clientHeight","max","scrollTop","scrollHeight","off","height","wrapper_client_height","fn","getZoom","duration","easeLinearity"],"mappings":"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","file":"main.min.js","sourcesContent":["$(function () {\n    var MOBILE_WIDTH = 600;\n\n    var hideClassifier = function () {\n        $('#js-jewmapHamburger').removeClass('active');\n        $('#js-classifier').removeClass('open');\n        if ($(window).width() <= MOBILE_WIDTH) {\n            $('.leaflet-control-container').removeClass('hide');\n            $('#js-lang').removeClass('hide');\n        }\n    }\n\n    // hide classifier on nav click\n    $(window).on('resize', function () {\n        hideClassifier();\n    });\n\n    // hide classifier on resize\n    $('#js-navListWrapper>ul>li>a').on('click', function () {\n        hideClassifier();\n    });\n\n    // remove submit button default behavior\n    $('#js-classifier button[type=\"submit\"]').click(function(e) {\n        e.preventDefault();\n    });\n\n    // show classifier items equal to entered by user\n    $('#js-classifier input[type=\"text\"]').on('change keydown keyup', function() {\n        var input = $(this);\n        var cityToFind = input.val().toUpperCase();\n        var cityToFindLength = cityToFind.length;\n        \n        var block = $('#js-classifier ul')\n\n        block.find('a').each(function() {\n            var cityWrapper = $(this).closest('li');\n            var city = $(this).text().toUpperCase();\n            city = city.substring(0, cityToFindLength);\n    \n            if (city !== cityToFind) {\n                cityWrapper.hide();\n            } else {\n                cityWrapper.show();\n            }\n        })\n    });\n    \n    // var citiesArray = [];\n\n    var cities = \n    [\n        'Москва',\n        'Санкт-Петербург',\n        'Новосибирск',\n        'Екатеринбург',\n        'Казань',\n        'Челябинск',\n        'Омск',\n        'Самара',\n        'Ростов-на-Дон',\n        'Уфа',\n        'Красноярск',\n        'Воронеж',\n        'Пермь',\n        'Волгоград',\n        'Краснодар',\n        'Саратов',\n        'Тюмень',\n        'Тольятти',\n        'Ижевск',\n        'Воронеж',\n        'Пермь',\n        'Волгоград',\n        'Краснодар',\n        'Саратов',\n        'Тюмень',\n        'Тольятти',\n        'Ижевск',\n        'Москва',\n        'Санкт-Петербург',\n        'Новосибирск',\n        'Екатеринбург',\n        'Казань',\n        'Челябинск',\n        'Омск',\n        'Самара',\n        'Ростов-на-Дон',\n        'Уфа',\n        'Красноярск',\n        'Воронеж',\n        'Пермь',\n        'Волгоград',\n        'Краснодар',\n        'Саратов',\n        'Тюмень',\n        'Тольятти',\n        'Ижевск',\n        'Воронеж',\n        'Пермь',\n        'Волгоград',\n        'Краснодар',\n        'Саратов',\n        'Тюмень',\n        'Тольятти',\n        'Ижевск'\n    ]\n\n    var addClassifier = function (map, orgs) {\n\n        // sort array\n        var sortArray = function (array) {\n\n            // sort by alphabet\n            array.sort(function(a, b){\n                if(a.name < b.name) { return -1; }\n                if(a.name > b.name) { return 1; }\n                return 0;\n            });\n\n            // spb to top\n            array.forEach(function (elem) {\n                if (elem.name === 'Санкт-Петербург') {\n                    array.splice(array.indexOf(elem), 1)\n                    array.unshift(elem);\n                    return false;\n                }\n            });\n\n            // moscow to top\n            array.forEach(function (elem) {\n                if (elem.name === 'Москва') {\n                    array.splice(array.indexOf(elem), 1)\n                    array.unshift(elem);\n                    return false;\n                }\n            });\n\n            // get index of center elem\n            var halfLength = Math.ceil(array.length / 2);\n\n            // cut array on two halves (half - first half, array - second half)\n            var half = array.splice(0, halfLength);\n\n            // add one elem from each half at a time\n            var interimArray = [];\n            \n            for (var i = 0; i < halfLength; i++) {\n                half[i] !== undefined ? interimArray.push(half[i]) : '';\n                array[i] !== undefined ? interimArray.push(array[i]) : '';\n            };\n\n            return array = interimArray;\n        }\n\n        sortedArray = sortArray(orgs);\n\n        // create classifier from template and array\n        var addPopup = function (array) {\n            // var fragmentMenu = document.createDocumentFragment();\n            // var template = document.querySelector('#js-templateClassifier').content.querySelector('.classifier');\n            // var templateElement = template.cloneNode(true);\n            // fragmentMenu.appendChild(templateElement);\n            // $('#js-jewmap').append(fragmentMenu);\n\n            Array.prototype.forEach.call(array, function (elem) {\n                var fragmentMenuItem = document.createDocumentFragment();\n                var template = document.querySelector('#js-templateClassifierItem').content.querySelector('.classifier__list-item');\n                var templateElement = template.cloneNode(true);\n                templateElement.querySelector('.classifier__list-link').setAttribute('data-id', elem.id);\n                templateElement.querySelector('.classifier__list-link').textContent = elem.name;\n                // templateElement.querySelector('.classifier__list-link').setAttribute('data-address', elem.address);\n                // templateElement.querySelector('.classifier__list-link').setAttribute('data-person', elem.person);\n                // templateElement.querySelector('.classifier__list-link').setAttribute('data-phone', elem.phone);\n                templateElement.querySelector('.classifier__list-link').setAttribute('data-status', elem.status);\n                templateElement.querySelector('.classifier__list-link').setAttribute('data-point', elem.point);\n                fragmentMenuItem.appendChild(templateElement);\n                document.querySelector('.classifier__list').append(fragmentMenuItem);\n            });\n\n            $('#js-classifierScrollbar').scrollBox();\n\n            $('.classifier__list-link').on('click', function () {\n                var point = $(this).attr('data-point').split(',');\n                window.util.flyTo(map, [ parseFloat(point[0]), parseFloat(point[1]) ]);\n                hideClassifier();\n            })\n\n            // show/hide classifier on jewmap hamburger click\n            $('.jewmap__hamburger').on('click', function () {\n                $('#js-jewmapHamburger').toggleClass('active');\n                $('#js-classifier').toggleClass('open');\n                if ($(window).width() <= MOBILE_WIDTH) {\n                    $('.leaflet-control-container').toggleClass('hide');\n                    $('#js-lang').toggleClass('hide');\n                }\n                if ($('.popup').hasClass('open')) {\n                    $('.popup').removeClass('open');\n                    $('#js-navListWrapper>ul>li>a').removeClass('active');\n                }\n            });\n        }\n\n        addPopup(sortedArray);\n    }\n    \n    window.classifier = {\n        addClassifier: function (map, array) {\n            addClassifier(map, array);\n        }\n    }\n});","$(function () {\n    $('#js-lang a').on('click', function () {\n        $('#js-lang a').removeClass('active');\n        $(this).addClass('active');\n    })\n});","$(function () {\n    \n    var orgs = [];\n    \n    var ZOOM = 4;\n    var BOUNDS_RUSSIA = new L.LatLngBounds([30.0, 15.0], [78.0, 188.0]);\n    if ($(window).width() < 575) {\n        BOUNDS_RUSSIA = new L.LatLngBounds([40.0, 25.0], [35.0, 180.0]);\n    }\n\n    L.mapbox.accessToken = 'pk.eyJ1IjoiYWxpYXBrbyIsImEiOiJjangyenVmeGMwcTFjM3lvNGhsdmUzejRoIn0.zdJYMN5sxS2SJXZV2Lb3aA';\n\n    var map = L.map('map', {\n        doubleClickZoom: false,\n        zoomControl: true,\n        zoomDelta: 0.25,\n        zoomSnap: 0,\n        // maxZoom: 10,\n        minZoom: 2,\n        // maxBounds: new L.LatLngBounds([10.0, 15.0],[25.0, 188.0]),\n        // zoomSnap: 0,\n        // maxBoundsViscosity: 1\n    })\n        .setView([63.674041, 99.742382], ZOOM)\n        .addLayer(L.mapbox.styleLayer('mapbox://styles/aliapko/cjzle879c057t1cn6tnldfw7p'));\n\n    map.fitBounds(BOUNDS_RUSSIA, { padding: [20, 20] });\n\n    var southWest = L.latLng(-89.98155760646617, -180),\n    northEast = L.latLng(89.99346179538875, 180);\n    var bounds = L.latLngBounds(southWest, northEast);\n\n    map.setMaxBounds(bounds);\n    map.on('drag', function() {\n        map.panInsideBounds(bounds, { animate: false });\n    });\n\n    $.ajax({\n        method: \"GET\",\n        url: \"post.php\",\n        data: {\n            request: 1\n        }\n      })\n        .done(function( msg ) {\n          var obj = jQuery.parseJSON(msg);\n          console.log(obj);\n          getMarkersWithChildren(obj);\n          window.classifier.addClassifier(map, orgs);\n          addCitiesOnMap(orgs);\n        });\n\n    // transform list of orgs into array of cities with children\n    var getMarkersWithChildren = function (array) {\n    \n        Array.prototype.forEach.call(array, function (arrayItem, arrayItemIndex) {\n            var parent = {\n                'id': arrayItemIndex,\n                'name': arrayItem['name_city'],\n                'point': [parseFloat(arrayItem['latitude_city']), parseFloat(arrayItem['longitude_city'])],\n                'status': arrayItem['status_city'],\n                'childs': []\n            };\n\n            var child = {\n                'name': arrayItem['post_title'],\n                'address': arrayItem['address'],\n                'point': [\n                    arrayItem['latitude'] === '' ? '' : parseFloat(arrayItem['latitude']),\n                    arrayItem['longitude'] === '' ? '' : parseFloat(arrayItem['longitude'])\n                ]\n                // 'person': place['person'],\n                // 'phone': place['phone']\n            };\n        \n            if (orgs.length === 0){\n                orgs.push(parent);\n                orgs[0].childs.push(child);\n            } else {\n                var value = false;\n\n                Array.prototype.forEach.call(orgs, function (item, itemIndex) {\n                    \n                    if (item['name'] === arrayItem['name_city']) {\n                        value = true;\n                        item.childs.push(child);\n                    }\n                })\n\n                if (value === false) {\n                    orgs.push(parent);\n                    orgs[orgs.length - 1].childs.push(child);\n                }\n            }\n        });\n    };\n\n    var addCitiesOnMap = function (array) {\n\n        // create lauers with cities\n        var layer_0 = L.mapbox.featureLayer();\n        var layer_1 = L.mapbox.featureLayer();\n        var layer_2 = L.mapbox.featureLayer();\n        var layer_3 = L.mapbox.featureLayer();\n        var layerWithOrgs = L.mapbox.featureLayer();\n\n        // handle click event\n        function onClickCity(e) {\n            var point = e.target._latlng\n            window.util.flyTo(map, [point.lat, point.lng])\n        }\n\n        // add markers on layers\n        Array.prototype.forEach.call(array, function (markerElem) { \n\n            if (markerElem['status'] === '1') {\n\n                if (markerElem['name'] === 'Москва') {\n                    var html = '<div class=\"jewmap__pin\"><div class=\"jewmap__pin-icon\"></div><span class=\"jewmap__pin-label\">' + markerElem.name + '</span></div>';\n                    var marker = L.marker(markerElem.point, {\n                        icon: L.divIcon({\n                            html: html,\n                            className: 'capital'\n                        }),\n                        zIndexOffset: 40\n                    }).addTo(layer_0);\n                    marker.on('click', onClickCity);\n\n                } else {\n                    var html = '<div class=\"jewmap__pin\"><div class=\"jewmap__pin-icon\"></div><span class=\"jewmap__pin-label\">' + markerElem.name + '</span></div>';\n                    var marker = L.marker(markerElem.point, {\n                        icon: L.divIcon({\n                            html: html,\n                            className: 'district'\n                        }),\n                        zIndexOffset: 30\n                    }).addTo(layer_1);\n                    marker.on('click', onClickCity);\n                }\n                \n            } else if (markerElem['status'] === '2') {\n                var html = '<div class=\"jewmap__pin\"><div class=\"jewmap__pin-icon\"></div><span class=\"jewmap__pin-label\">' + markerElem.name + '</span></div>';\n                var marker = L.marker(markerElem.point, {\n                    icon: L.divIcon({\n                        html: html,\n                        className: 'region'\n                    }),\n                    zIndexOffset: 20\n                }).addTo(layer_2);\n                marker.on('click', onClickCity);\n\n            } else if (markerElem['status'] === '3') {\n                var html = '<div class=\"jewmap__pin\"><div class=\"jewmap__pin-icon\"></div><span class=\"jewmap__pin-label\">' + markerElem.name + '</span></div>';\n                var marker = L.marker(markerElem.point, {\n                    icon: L.divIcon({\n                        html: html,\n                        className: 'city'\n                    }),\n                    zIndexOffset: 10\n                }).addTo(layer_3);\n                marker.on('click', onClickCity);\n            }\n\n            Array.prototype.forEach.call(markerElem.childs, function (place) { \n\n                if (place.point[0] !== '' || place.point[1] !== '') {\n                    \n                    if (place.phone !== undefined) {\n                        var firstPart = place.phone.split('(').pop().split(')').shift()\n                        var secondPart = place.phone.split(')').pop()\n                        var thirdPart = secondPart.split(' ').pop().split('-')\n                        var phoneLink = 8 + firstPart + thirdPart[0] + thirdPart[1] + thirdPart[2]\n                    }\n                    \n                    var yandexLink = 'https://yandex.by/maps/?text=' + place.name.split(' ').join('%20').split('\"').join('%20');\n                    var html = '';\n                    html += '<div class=\"popup popup-place d-flex flex-column\">' +\n                        '<p class=\"popup__name\">' + place.name + '</p>'\n                        if (place.person !== '') {\n                            html += '<p class=\"popup__person d-flex align-items-start\">' +\n                                '<span class=\"popup__icon icon-map-person d-flex align-items-center justify-content-center\"></span>' +\n                                '<span class=\"popup__text d-flex align-items-center\">' + place.person + '</span>' +\n                            '</p>'\n                        }\n                        html += '<a href=\"' + yandexLink + '\" class=\"popup__address d-flex align-items-start\" target=\"_blank\">' +\n                            '<span class=\"popup__icon icon-map d-flex align-items-center justify-content-center\"></span>' +\n                            '<span class=\"popup__text d-flex align-items-center\">' + place.address + '</span>' +\n                        '</a>' +\n                        '<a href=\"tel:' + phoneLink + '\" class=\"popup__phone d-flex align-items-start\">' +\n                            '<span class=\"popup__icon icon-phone d-flex align-items-center justify-content-center\"></span>' +\n                            '<span class=\"popup__text d-flex align-items-center\">' + place.phone + '</span>' +\n                        '</div>' +\n                    '</div>'\n\n                    var marker = L.marker(place.point, {\n                        icon: L.divIcon({\n                            html: '<div class=\"jewmap__pin\"><div class=\"jewmap__pin-icon\"></div></div>',\n                            className: 'org'\n                        }),\n                        id: place.id\n                    }).addTo(layerWithOrgs);\n                    // marker.bindPopup(html);\n                    // marker.on('click', function (e) {\n                    //     onClickPlace(place.city)\n                    // });\n                }\n            });\n        })\n\n        // show layers\n        map.addLayer(layer_1)\n        map.addLayer(layer_0)\n        // map.addLayer(layerWithOrgs)\n\n        // function to show label of marker\n        var showLabel = function (elem) {\n            $(elem + ' .jewmap__pin-label').css('opacity', '1');\n            $(elem + ' .jewmap__pin-label').css('pointer-events', 'auto');\n        }\n\n        // function to hide label of marker\n        var hideLabel = function (elem) {\n            $(elem + ' .jewmap__pin-label').css('opacity', '0');\n            $(elem + ' .jewmap__pin-label').css('pointer-events', 'none');\n        }\n\n        // show/hide layer on zoom value\n        var setLayer = function (zoom) {\n            if ($(window).width() < 575) {\n                if ( zoom > 2 && zoom < 3) {\n                    map.addLayer(layer_2)\n                    hideLabel('.region');\n                    map.removeLayer(layer_3);\n                } else if (zoom > 3 && zoom < 4) {\n                    map.addLayer(layer_2)\n                    showLabel('.region');\n                    map.removeLayer(layer_3);\n                } else if ( zoom > 4 && zoom < 5) {\n                    map.addLayer(layer_2)\n                    showLabel('.region');\n                    map.addLayer(layer_3);\n                    hideLabel('.city');\n                } else if ( zoom > 5 && zoom < 10) {\n                    map.removeLayer(layerWithOrgs);\n                    map.addLayer(layer_0);\n                    map.addLayer(layer_1);\n                    map.addLayer(layer_2)\n                    showLabel('.region');\n                    map.addLayer(layer_3);\n                    showLabel('.city');\n                } else if ( zoom < 2) {\n                    map.addLayer(layer_0);\n                    map.addLayer(layer_1);\n                    map.removeLayer(layer_2);\n                    map.removeLayer(layer_3);\n                } else if ( zoom >= 10) {\n                    map.addLayer(layerWithOrgs);\n                    map.removeLayer(layer_0);\n                    map.removeLayer(layer_1);\n                    map.removeLayer(layer_2);\n                    map.removeLayer(layer_3);\n                }\n            } else {\n                if ( zoom > 4 && zoom < 5) {\n                    map.addLayer(layer_2)\n                    hideLabel('.region');\n                    map.removeLayer(layer_3);\n                } else if (zoom > 5 && zoom < 6) {\n                    map.addLayer(layer_2)\n                    showLabel('.region');\n                    map.removeLayer(layer_3);\n                } else if ( zoom > 6 && zoom < 7) {\n                    map.addLayer(layer_2)\n                    showLabel('.region');\n                    map.addLayer(layer_3);\n                    hideLabel('.city');\n                } else if ( zoom > 7 && zoom < 10) {\n                    map.removeLayer(layerWithOrgs);\n                    map.addLayer(layer_0);\n                    map.addLayer(layer_1);\n                    map.addLayer(layer_2)\n                    showLabel('.region');\n                    map.addLayer(layer_3);\n                    showLabel('.city');\n                } else if ( zoom < 4) {\n                    map.addLayer(layer_0);\n                    map.addLayer(layer_1);\n                    map.removeLayer(layer_2);\n                    map.removeLayer(layer_3);\n                } else if ( zoom >= 10) {\n                    map.addLayer(layerWithOrgs);\n                    map.removeLayer(layer_0);\n                    map.removeLayer(layer_1);\n                    map.removeLayer(layer_2);\n                    map.removeLayer(layer_3);\n                }\n            }\n        }\n\n        setLayer(ZOOM)\n        \n        // handle zoomend event\n        map.on('zoomend', function(e) {\n            var zoom = e.target._zoom;\n            setLayer(zoom)\n        });\n    }\n});\n    ","$(function () {\n    var MOBILE_WIDTH = 600;\n\n    // function for hiding nav list and toggle hamburger class\n    var hideNavList = function () {\n        $('#js-navHamburger').removeClass('active');\n        $('#js-navListWrapper').slideUp();\n    }\n\n    // show active nav item\n    $('#js-navListWrapper>ul>li>a').on('click', function () {\n        $('#js-navListWrapper>ul>li>a').removeClass('active');\n        $(this).addClass('active');\n        if ($(window).width() <= MOBILE_WIDTH) {\n            hideNavList();\n        }\n    });\n\n    // show/hide nav on hamburger click\n    $('#js-navHamburger').on('click', function () {\n        $('#js-navHamburger').toggleClass('active');\n        $('#js-navListWrapper').slideToggle();\n    });\n\n    // hide nav on outside click\n    $(document).click(function(e) {\n        if ($(window).width() <= MOBILE_WIDTH) {\n            if ($(e.target).closest('#js-navListWrapper').length) return;\n            if ($(e.target).closest('#js-navHamburger').length) return;\n            hideNavList();\n            event.stopPropagation();\n        }\n    });\n\n    // show/hide nav on resize\n    $(window).on('resize', function () {\n        if ($(window).width() > MOBILE_WIDTH) {\n            $('#js-navListWrapper').show();\n            $('#js-navHamburger').removeClass('active');\n        } else {\n            hideNavList();\n        }\n    })\n\n});","$(function () {\n\n    // init scrollbar\n    $('.popup__main').scrollBox();\n    \n    // show popup on nav click\n    $('#js-navListWrapper>ul>li>a').on('click', function () {\n        var popup = $(this).attr('data-popup');\n        if ($('#js-' + popup).hasClass('open')) return;\n        // $('#js-jewmapHamburger').removeClass('move');\n        $('#js-jewmapHamburger').addClass('move');\n        $('#js-jewmapSearch').addClass('move');\n        $('.popup').removeClass('open');\n        $('#js-' + popup).addClass('open');\n    });\n\n    // hide popup on close click\n    $('.popup__close').on('click', function () {\n        $('.popup').removeClass('open');\n        $('#js-jewmapHamburger').removeClass('move');\n        $('#js-jewmapSearch').removeClass('move');\n        $('#js-navListWrapper>ul>li>a').removeClass('active');\n    });\n\n    // hide popup on outside click\n    $(document).click(function(e) {\n        // if ($(window).width() <= MOBILE_WIDTH) {\n        if ($(e.target).closest('#js-nav').length) return;\n        if ($(e.target).closest('.popup').length) return;\n        $('.popup').removeClass('open');\n        $('#js-jewmapHamburger').removeClass('move');\n        $('#js-jewmapSearch').removeClass('move');\n        $('#js-navListWrapper>ul>li>a').removeClass('active');\n        event.stopPropagation();\n        // }\n    });\n\n});","/**\n * jQiery scrollBar Plugin\n * @author Falk Müller (www-falk-m.de)\n * Thankts to https://codepen.io/IliaSky/pen/obowmv\n */\n;( function( $, window, document ) {\n\n\t\"use strict\";\n\n\t\tvar pluginName = \"scrollBox\",\n\t\t\tdefaults = {\n\t\t\t\tcontainerClass: \"sb-container\",\n                                containerNoScrollClass: \"sb-container-noscroll\",\n                                contentClass: \"sb-content\",\n                                scrollbarContainerClass: \"sb-scrollbar-container\",\n                                scrollBarClass: \"sb-scrollbar\"\n                                \n\t\t\t};\n\n\t\t// plugin constructor\n\t\tfunction Plugin ( element, options ) {\n\t\t\tthis.element = element;\n\n\t\t\tthis.settings = $.extend( {}, defaults, options );\n\t\t\tthis._defaults = defaults;\n\t\t\tthis._name = pluginName;\n\t\t\tthis.init();\n                        \n\t\t}\n\n\t\t// Avoid Plugin.prototype conflicts\n\t\t$.extend( Plugin.prototype, {\n\t\t\tinit: function() {\n\n\t\t\t\tthis.addScrollbar();\n                                this.addEvents();\n                                this.onResize();\n\t\t\t},\n\t\t\taddScrollbar: function() {\n                                $( this.element ).addClass(this.settings.containerClass);\n                                this.wrapper = $(\"<div class='\" + this.settings.contentClass + \"' />\");\n                                this.wrapper.append($( this.element ).contents());\n                                $( this.element ).append( this.wrapper );\n                                \n                                this.scollbarContainer = $(\"<div class='\" + this.settings.scrollbarContainerClass + \"' />\");\n                                this.scrollBar = $(\"<div class='\" + this.settings.scrollBarClass + \"' />\");\n                                this.scollbarContainer.append(this.scrollBar);\n                                $( this.element ).prepend(this.scollbarContainer);\n\t\t\t},\n                        addEvents: function(){\n                            \n                            this.wrapper.on(\"scroll.\" + pluginName, $.proxy(this.onScroll, this) )\n                            $(window).on(\"resize.\" + pluginName, $.proxy(this.onResize, this) )\n                            \n                            this.scrollBar.on('mousedown.' + pluginName, $.proxy(this.onMousedown, this));\n                            this.scrollBar.on('touchstart.' + pluginName, $.proxy(this.onTouchstart, this));\n                        },\n                        \n                        onTouchstart: function(ev){\n                            var me = this;\n                            \n                            ev.preventDefault();\n                            var y = me.scrollBar[0].offsetTop;\n\n                            var onMove = function(end){\n                                   var delta = end.touches[0].pageY - ev.touches[0].pageY;\n                                   me.scrollBar[0].style.top = Math.min(me.scollbarContainer[0].clientHeight - me.scrollBar[0].clientHeight, Math.max(0, y + delta)) + 'px';\n                                   me.wrapper[0].scrollTop = (me.wrapper[0].scrollHeight * me.scrollBar[0].offsetTop / me.scollbarContainer[0].clientHeight);\n                            };\n\n                           $(document).on(\"touchmove.\" + pluginName, onMove);\n                           $(document).on(\"touchend.\" + pluginName, function(){\n                               $(document).off(\"touchmove.\" + pluginName);\n                               $(document).off(\"touchend.\" + pluginName);\n                           });\n                        },\n                        \n                        onMousedown: function(ev){\n                            var me = this;\n                            \n                            ev.preventDefault();\n                            var y = me.scrollBar[0].offsetTop;\n\n                            var onMove = function(end){\n                                   var delta = end.pageY - ev.pageY;\n                                   me.scrollBar[0].style.top = Math.min(me.scollbarContainer[0].clientHeight - me.scrollBar[0].clientHeight, Math.max(0, y + delta)) + 'px';\n                                   me.wrapper[0].scrollTop = (me.wrapper[0].scrollHeight * me.scrollBar[0].offsetTop / me.scollbarContainer[0].clientHeight);\n                            };\n\n                           $(document).on(\"mousemove.\" + pluginName, onMove);\n                           $(document).on(\"mouseup.\" + pluginName, function(){\n                               $(document).off(\"mousemove.\" + pluginName);\n                               $(document).off(\"mouseup.\" + pluginName);\n                           });\n                        },\n                        \n                        onResize: function(){\n                            \n                            this.wrapper.css(\"max-height\", $(this.element).height());\n                            \n                            var wrapper_client_height = this.wrapper[0].clientHeight;\n                            \n                            this.scrollBar.css(\"height\", this.scollbarContainer[0].clientHeight * wrapper_client_height / this.wrapper[0].scrollHeight + \"px\");\n                             if(this.scollbarContainer[0].clientHeight <= this.scrollBar[0].clientHeight){\n                                 $( this.element ).addClass(this.settings.containerNoScrollClass);\n                             } else {\n                                 $( this.element ).removeClass(this.settings.containerNoScrollClass);\n                             }\n                             \n                             this.onScroll();\n                        },\n                        \n                        onScroll: function(){\n                            \n                            this.scrollBar.css(\"top\", Math.min(this.scollbarContainer[0].clientHeight - this.scrollBar[0].clientHeight, this.scollbarContainer[0].clientHeight * this.wrapper[0].scrollTop / this.wrapper[0].scrollHeight) + \"px\");\n                            \n                        }\n\t\t} );\n\n\t\t// A really lightweight plugin wrapper around the constructor,\n\t\t// preventing against multiple instantiations\n\t\t$.fn[pluginName] = function( options ) {\n\t\t\treturn this.each( function() {\n\t\t\t\tif ( !$.data( this, \"plugin_\" + pluginName ) ) {\n\t\t\t\t\t$.data( this, \"plugin_\" +\n\t\t\t\t\t\tpluginName, new Plugin( this, options ) );\n\t\t\t\t}\n\t\t\t} );\n\t\t};\n\n} )( jQuery, window, document );","$(function () {\n\n    var flyTo = function (map, point, zoom) {\n        if (zoom === undefined) {\n            zoom = map.getZoom();\n            zoom = zoom <= 10 ? 10 : zoom;\n        }\n        map.flyTo([point[0], point[1]], zoom, {duration: 1.1, easeLinearity: 0.45})\n    };\n\n    window.util = {\n        flyTo: function (map, point, zoom) {\n            flyTo(map, point, zoom);\n        }\n    }\n});"]}