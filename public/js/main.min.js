$(function(){for(var e=[],t=["Москва","Санкт-Петербург","Новосибирск","Екатеринбург","Казань","Челябинск","Омск","Самара","Ростов-на-Дон","Уфа","Красноярск","Воронеж","Пермь","Волгоград","Краснодар","Саратов","Тюмень","Тольятти","Ижевск","Воронеж","Пермь","Волгоград","Краснодар","Саратов","Тюмень","Тольятти","Ижевск","Москва","Санкт-Петербург","Новосибирск","Екатеринбург","Казань","Челябинск","Омск","Самара","Ростов-на-Дон","Уфа","Красноярск","Воронеж","Пермь","Волгоград","Краснодар","Саратов","Тюмень","Тольятти","Ижевск","Воронеж","Пермь","Волгоград","Краснодар","Саратов","Тюмень","Тольятти","Ижевск"],s=0;s<t.length;s++)e.push({id:s,name:t[s],address:"",preson:"",phone:"",point:""});sortedArray=function(t){t.sort(function(e,t){return e.name<t.name?-1:e.name>t.name?1:0}),t.forEach(function(e){if("Санкт-Петербург"===e.name)return t.splice(t.indexOf(e),1),t.unshift(e),!1}),t.forEach(function(e){if("Москва"===e.name)return t.splice(t.indexOf(e),1),t.unshift(e),!1});for(var e=Math.ceil(t.length/2),s=t.splice(0,e),n=[],o=0;o<e;o++)void 0!==s[o]&&n.push(s[o]),void 0!==t[o]&&n.push(t[o]);return t=n}(e);var n,o,a;n=sortedArray,o=document.createDocumentFragment(),a=document.querySelector("#js-templateClassifier").content.querySelector(".classifier").cloneNode(!0),o.appendChild(a),$("#js-jewmap").append(o),Array.prototype.forEach.call(n,function(e){var t=document.createDocumentFragment(),s=document.querySelector("#js-templateClassifierItem").content.querySelector(".classifier__list-item").cloneNode(!0);s.querySelector(".classifier__list-link").setAttribute("data-id",e.id),s.querySelector(".classifier__list-link").textContent=e.name,s.querySelector(".classifier__list-link").setAttribute("data-address",e.address),s.querySelector(".classifier__list-link").setAttribute("data-person",e.person),s.querySelector(".classifier__list-link").setAttribute("data-phone",e.phone),s.querySelector(".classifier__list-link").setAttribute("data-point",e.point),t.appendChild(s),document.querySelector(".classifier__list").append(t)}),$("#js-classifierScrollbar").scrollBox()}),$(function(){$("#js-jewmapHamburger").on("click",function(){$("#js-jewmapHamburger").toggleClass("active")});var e=new L.LatLngBounds([30,15],[78,188]);$(window).width()<575&&(e=new L.LatLngBounds([40,25],[35,180])),L.mapbox.accessToken="pk.eyJ1IjoiYWxpYXBrbyIsImEiOiJjangyenVmeGMwcTFjM3lvNGhsdmUzejRoIn0.zdJYMN5sxS2SJXZV2Lb3aA";var t=L.map("map",{doubleClickZoom:!1,zoomControl:!0,zoomDelta:.25,zoomSnap:0,maxZoom:10,minZoom:2}).setView([63.674041,99.742382],4).addLayer(L.mapbox.styleLayer("mapbox://styles/aliapko/cjzle879c057t1cn6tnldfw7p"));t.fitBounds(e,{padding:[20,20]});var s=L.latLng(-89.98155760646617,-180),n=L.latLng(89.99346179538875,180),o=L.latLngBounds(s,n);t.setMaxBounds(o),t.on("drag",function(){t.panInsideBounds(o,{animate:!1})})}),$(function(){function t(){$("#js-navHamburger").removeClass("active"),$("#js-navListWrapper").slideUp()}$("#js-navListWrapper>ul>li>a").on("click",function(){$("#js-navListWrapper>ul>li>a").removeClass("active"),$(this).addClass("active"),$(window).width()<=600&&t()}),$("#js-navHamburger").on("click",function(){$("#js-navHamburger").toggleClass("active"),$("#js-navListWrapper").slideToggle()}),$(document).click(function(e){if($(window).width()<=600){if($(e.target).closest("#js-navListWrapper").length)return;if($(e.target).closest("#js-navHamburger").length)return;t(),event.stopPropagation()}}),$(window).on("resize",function(){600<$(window).width()?($("#js-navListWrapper").show(),$("#js-navHamburger").removeClass("active")):t()})}),$(function(){$("#js-navListWrapper>ul>li>a").on("click",function(){var e=$(this).attr("data-popup");$("#js-"+e).hasClass("open")||($("#js-jewmapHamburger").removeClass("open"),$("#js-jewmapHamburger").addClass("open"),$(".popup").removeClass("open"),$("#js-"+e).addClass("open"))}),$(".popup__close").on("click",function(){$(".popup").removeClass("open"),$("#js-jewmapHamburger").removeClass("open"),$("#js-navListWrapper>ul>li>a").removeClass("active")}),$(document).click(function(e){$(e.target).closest("#js-nav").length||$(e.target).closest(".popup").length||($(".popup").removeClass("open"),$("#js-jewmapHamburger").removeClass("open"),event.stopPropagation())})}),function(a,e,t){"use strict";var r="scrollBox",s={containerClass:"sb-container",containerNoScrollClass:"sb-container-noscroll",contentClass:"sb-content",scrollbarContainerClass:"sb-scrollbar-container",scrollBarClass:"sb-scrollbar"};function n(e,t){this.element=e,this.settings=a.extend({},s,t),this._defaults=s,this._name=r,this.init()}a.extend(n.prototype,{init:function(){this.addScrollbar(),this.addEvents(),this.onResize()},addScrollbar:function(){a(this.element).addClass(this.settings.containerClass),this.wrapper=a("<div class='"+this.settings.contentClass+"' />"),this.wrapper.append(a(this.element).contents()),a(this.element).append(this.wrapper),this.scollbarContainer=a("<div class='"+this.settings.scrollbarContainerClass+"' />"),this.scrollBar=a("<div class='"+this.settings.scrollBarClass+"' />"),this.scollbarContainer.append(this.scrollBar),a(this.element).prepend(this.scollbarContainer)},addEvents:function(){this.wrapper.on("scroll."+r,a.proxy(this.onScroll,this)),a(e).on("resize."+r,a.proxy(this.onResize,this)),this.scrollBar.on("mousedown."+r,a.proxy(this.onMousedown,this)),this.scrollBar.on("touchstart."+r,a.proxy(this.onTouchstart,this))},onTouchstart:function(s){var n=this;s.preventDefault();var o=n.scrollBar[0].offsetTop;a(t).on("touchmove."+r,function(e){var t=e.touches[0].pageY-s.touches[0].pageY;n.scrollBar[0].style.top=Math.min(n.scollbarContainer[0].clientHeight-n.scrollBar[0].clientHeight,Math.max(0,o+t))+"px",n.wrapper[0].scrollTop=n.wrapper[0].scrollHeight*n.scrollBar[0].offsetTop/n.scollbarContainer[0].clientHeight}),a(t).on("touchend."+r,function(){a(t).off("touchmove."+r),a(t).off("touchend."+r)})},onMousedown:function(s){var n=this;s.preventDefault();var o=n.scrollBar[0].offsetTop;a(t).on("mousemove."+r,function(e){var t=e.pageY-s.pageY;n.scrollBar[0].style.top=Math.min(n.scollbarContainer[0].clientHeight-n.scrollBar[0].clientHeight,Math.max(0,o+t))+"px",n.wrapper[0].scrollTop=n.wrapper[0].scrollHeight*n.scrollBar[0].offsetTop/n.scollbarContainer[0].clientHeight}),a(t).on("mouseup."+r,function(){a(t).off("mousemove."+r),a(t).off("mouseup."+r)})},onResize:function(){this.wrapper.css("max-height",a(this.element).height());var e=this.wrapper[0].clientHeight;this.scrollBar.css("height",this.scollbarContainer[0].clientHeight*e/this.wrapper[0].scrollHeight+"px"),this.scollbarContainer[0].clientHeight<=this.scrollBar[0].clientHeight?a(this.element).addClass(this.settings.containerNoScrollClass):a(this.element).removeClass(this.settings.containerNoScrollClass),this.onScroll()},onScroll:function(){this.scrollBar.css("top",Math.min(this.scollbarContainer[0].clientHeight-this.scrollBar[0].clientHeight,this.scollbarContainer[0].clientHeight*this.wrapper[0].scrollTop/this.wrapper[0].scrollHeight)+"px")}}),a.fn[r]=function(e){return this.each(function(){a.data(this,"plugin_"+r)||a.data(this,"plugin_"+r,new n(this,e))})}}(jQuery,window,document);
//# sourceMappingURL=main.min.js.map
